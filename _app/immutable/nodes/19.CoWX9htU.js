import{s as ze,y as Ne,A as gt,j as ae,p as vt,F as It,q as bt,k as H,o as R,i as A,d as h,e as D,c as V,a as C,f as v,g as y,r as Ct,v as Tt,w as Mt,x as Nt,Q as Ee,t as J,b as K,h as te,B as Me,u as ne,H as Ot,N as $e,a0 as Ze,n as Oe}from"../chunks/scheduler.u6_2Foza.js";import{S as Be,i as Se,f as wt,b as Q,d as X,m as x,t as N,a as S,e as ee,g as re,c as oe}from"../chunks/index.TaJ1J9Bt.js";import{t as me}from"../chunks/apiInterceptor.CqcRa0WA.js";import{g as kt}from"../chunks/entry.BerDi5HW.js";import{M as ye,a as yt,c as Et,i as zt,u as $t,j as Fe,B as We,m as Dt,e as Bt}from"../chunks/index.m-M8DqUY.js";import{c as St}from"../chunks/index.DB1rH76Y.js";import{s as Vt,f as Ye}from"../chunks/index.-SMJ16wi.js";import{e as ie}from"../chunks/each.CpR_wfW1.js";import"../chunks/updater.DMCgqkGV.js";import{M as At,a as Pt,b as jt}from"../chunks/menu-trigger.BlezJqHv.js";import{m as Ge}from"../chunks/marked.esm._0_gBwjO.js";import{F as Lt}from"../chunks/fuse.CU2r43ac.js";import{f as Ht}from"../chunks/index.BFuekP1B.js";import{C as Rt}from"../chunks/ChevronDown.BdfXPb0q.js";import{C as Ut}from"../chunks/Check.DdGE4lbh.js";import{S as qt}from"../chunks/Search.DyzposVs.js";import{g as Zt,p as Ft,d as Wt}from"../chunks/index.f3d1Pg7r.js";import{g as Yt}from"../chunks/index.ZxAnKlTo.js";import{T as he}from"../chunks/Tooltip.3kB_H6zI.js";import{S as Gt}from"../chunks/Switch.pLAWisIs.js";import{C as Jt}from"../chunks/ChatBubbleOval.DXGZr-yu.js";function Je(a,e,t){const l=a.slice();return l[43]=e[t],l}function Ke(a,e,t){const l=a.slice();return l[46]=e[t],l[48]=t,l}function Qe(a,e,t){const l=a.slice();return l[49]=e[t],l}function Xe(a,e,t){const l=a.slice();return l[49]=e[t],l}function xe(a,e,t){const l=a.slice();return l[49]=e[t],l}function Kt(a){let e;return{c(){e=J(a[2])},l(t){e=K(t,a[2])},m(t,l){A(t,e,l)},p(t,l){l[0]&4&&te(e,t[2])},d(t){t&&h(e)}}}function Qt(a){let e=a[13].label+"",t;return{c(){t=J(e)},l(l){t=K(l,e)},m(l,r){A(l,t,r)},p(l,r){r[0]&8192&&e!==(e=l[13].label+"")&&te(t,e)},d(l){l&&h(t)}}}function Xt(a){let e,t,l,r,n;function o(u,c){return u[13]?Qt:Kt}let i=o(a),s=i(a);return l=new Rt({props:{className:" self-center ml-2 size-3",strokeWidth:"2.5"}}),{c(){e=D("div"),s.c(),t=H(),Q(l.$$.fragment),this.h()},l(u){e=V(u,"DIV",{class:!0});var c=C(e);s.l(c),t=R(c),X(l.$$.fragment,c),c.forEach(h),this.h()},h(){v(e,"class",r="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+a[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden")},m(u,c){A(u,e,c),s.m(e,null),y(e,t),x(l,e,null),n=!0},p(u,c){i===(i=o(u))&&s?s.p(u,c):(s.d(1),s=i(u),s&&(s.c(),s.m(e,t))),(!n||c[0]&128&&r!==(r="flex w-full text-left px-0.5 outline-hidden bg-transparent truncate "+u[7]+" justify-between font-medium placeholder-gray-400 focus:outline-hidden"))&&v(e,"class",r)},i(u){n||(N(l.$$.fragment,u),n=!0)},o(u){S(l.$$.fragment,u),n=!1},d(u){u&&h(e),s.d(),ee(l)}}}function et(a){let e,t,l,r,n,o,i;return t=new qt({props:{className:"size-4",strokeWidth:"2.5"}}),{c(){e=D("div"),Q(t.$$.fragment),l=H(),r=D("input"),this.h()},l(s){e=V(s,"DIV",{class:!0});var u=C(e);X(t.$$.fragment,u),l=R(u),r=V(u,"INPUT",{id:!0,class:!0,placeholder:!0,autocomplete:!0}),u.forEach(h),this.h()},h(){v(r,"id","model-search-input"),v(r,"class","w-full text-sm bg-transparent outline-hidden"),v(r,"placeholder",a[4]),v(r,"autocomplete","off"),v(e,"class","flex items-center gap-2.5 px-5 mt-3.5 mb-1.5")},m(s,u){A(s,e,u),x(t,e,null),y(e,l),y(e,r),Me(r,a[8]),n=!0,o||(i=[ne(r,"input",a[27]),ne(r,"keydown",a[28])],o=!0)},p(s,u){(!n||u[0]&16)&&v(r,"placeholder",s[4]),u[0]&256&&r.value!==s[8]&&Me(r,s[8])},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){S(t.$$.fragment,s),n=!1},d(s){s&&h(e),ee(t),o=!1,Ot(i)}}}function tt(a){let e,t,l,r=a[18].t("All")+"",n,o,i,s,u,c=ie(a[12]),g=[];for(let p=0;p<c.length;p+=1)g[p]=lt(xe(a,c,p));return{c(){e=D("div"),t=D("div"),l=D("button"),n=J(r),i=H();for(let p=0;p<g.length;p+=1)g[p].c();this.h()},l(p){e=V(p,"DIV",{class:!0});var E=C(e);t=V(E,"DIV",{class:!0});var b=C(t);l=V(b,"BUTTON",{class:!0});var I=C(l);n=K(I,r),I.forEach(h),i=R(b);for(let w=0;w<g.length;w+=1)g[w].l(b);b.forEach(h),E.forEach(h),this.h()},h(){v(l,"class",o="min-w-fit outline-none p-1.5 "+(a[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize"),v(t,"class","flex gap-1 scrollbar-none overflow-x-auto w-fit text-center text-sm font-medium rounded-full bg-transparent px-1.5 pb-0.5"),v(e,"class","flex w-full sticky")},m(p,E){A(p,e,E),y(e,t),y(t,l),y(l,n),y(t,i);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(t,null);a[31](t),s||(u=ne(l,"click",a[29]),s=!0)},p(p,E){if(E[0]&262144&&r!==(r=p[18].t("All")+"")&&te(n,r),E[0]&512&&o!==(o="min-w-fit outline-none p-1.5 "+(p[9]===""?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(l,"class",o),E[0]&4608){c=ie(p[12]);let b;for(b=0;b<c.length;b+=1){const I=xe(p,c,b);g[b]?g[b].p(I,E):(g[b]=lt(I),g[b].c(),g[b].m(t,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=c.length}},d(p){p&&h(e),Ee(g,p),a[31](null),s=!1,u()}}}function lt(a){let e,t=a[49]+"",l,r,n,o,i;function s(){return a[30](a[49])}return{c(){e=D("button"),l=J(t),r=H(),this.h()},l(u){e=V(u,"BUTTON",{class:!0});var c=C(e);l=K(c,t),r=R(c),c.forEach(h),this.h()},h(){v(e,"class",n="min-w-fit outline-none p-1.5 "+(a[9]===a[49]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")},m(u,c){A(u,e,c),y(e,l),y(e,r),o||(i=ne(e,"click",s),o=!0)},p(u,c){a=u,c[0]&4096&&t!==(t=a[49]+"")&&te(l,t),c[0]&4608&&n!==(n="min-w-fit outline-none p-1.5 "+(a[9]===a[49]?"":"text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition capitalize")&&v(e,"class",n)},d(u){u&&h(e),o=!1,i()}}}function at(a){let e,t,l=a[18].t("No results found")+"",r;return{c(){e=D("div"),t=D("div"),r=J(l),this.h()},l(n){e=V(n,"DIV",{});var o=C(e);t=V(o,"DIV",{class:!0});var i=C(t);r=K(i,l),i.forEach(h),o.forEach(h),this.h()},h(){v(t,"class","block px-3 py-2 text-sm text-gray-700 dark:text-gray-100")},m(n,o){A(n,e,o),y(e,t),y(t,r)},p(n,o){o[0]&262144&&l!==(l=n[18].t("No results found")+"")&&te(r,l)},d(n){n&&h(e)}}}function rt(a){var r,n;let e,t=ie((n=(r=a[46].model)==null?void 0:r.info)==null?void 0:n.meta.tags),l=[];for(let o=0;o<t.length;o+=1)l[o]=ot(Xe(a,t,o));return{c(){e=D("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=V(o,"DIV",{class:!0});var i=C(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-start h-full mb-1.5 -translate-x-1")},m(o,i){A(o,e,i);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(o,i){var s,u;if(i[0]&65536){t=ie((u=(s=o[46].model)==null?void 0:s.info)==null?void 0:u.meta.tags);let c;for(c=0;c<t.length;c+=1){const g=Xe(o,t,c);l[c]?l[c].p(g,i):(l[c]=ot(g),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=t.length}},d(o){o&&h(e),Ee(l,o)}}}function ot(a){let e,t=a[49].name+"",l,r;return{c(){e=D("div"),l=J(t),r=H(),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=C(e);l=K(o,t),r=R(o),o.forEach(h),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase line-clamp-1 bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(n,o){A(n,e,o),y(e,l),y(e,r)},p(n,o){o[0]&65536&&t!==(t=n[49].name+"")&&te(l,t)},d(n){n&&h(e)}}}function xt(a){let e,t,l,r=a[46].label+"",n;return{c(){e=D("img"),l=H(),n=J(r),this.h()},l(o){e=V(o,"IMG",{src:!0,alt:!0,class:!0}),l=R(o),n=K(o,r),this.h()},h(){var o,i,s;Ze(e.src,t=((s=(i=(o=a[46].model)==null?void 0:o.info)==null?void 0:i.meta)==null?void 0:s.profile_image_url)??"/static/favicon.png")||v(e,"src",t),v(e,"alt","Model"),v(e,"class","rounded-full size-5 flex items-center mr-2")},m(o,i){A(o,e,i),A(o,l,i),A(o,n,i)},p(o,i){var s,u,c;i[0]&65536&&!Ze(e.src,t=((c=(u=(s=o[46].model)==null?void 0:s.info)==null?void 0:u.meta)==null?void 0:c.profile_image_url)??"/static/favicon.png")&&v(e,"src",t),i[0]&65536&&r!==(r=o[46].label+"")&&te(n,r)},d(o){o&&(h(e),h(l),h(n))}}}function nt(a){var r,n,o,i,s,u;let e,t,l;return t=new he({props:{content:`${(n=(r=a[46].model.ollama)==null?void 0:r.details)!=null&&n.quantization_level?((i=(o=a[46].model.ollama)==null?void 0:o.details)==null?void 0:i.quantization_level)+" ":""}${(s=a[46].model.ollama)!=null&&s.size?`(${(((u=a[46].model.ollama)==null?void 0:u.size)/1024**3).toFixed(1)}GB)`:""}`,className:"self-end",$$slots:{default:[el]},$$scope:{ctx:a}}}),{c(){e=D("div"),Q(t.$$.fragment),this.h()},l(c){e=V(c,"DIV",{class:!0});var g=C(e);X(t.$$.fragment,g),g.forEach(h),this.h()},h(){v(e,"class","flex ml-1 items-center translate-y-[0.5px]")},m(c,g){A(c,e,g),x(t,e,null),l=!0},p(c,g){var E,b,I,w,L,T;const p={};g[0]&65536&&(p.content=`${(b=(E=c[46].model.ollama)==null?void 0:E.details)!=null&&b.quantization_level?((w=(I=c[46].model.ollama)==null?void 0:I.details)==null?void 0:w.quantization_level)+" ":""}${(L=c[46].model.ollama)!=null&&L.size?`(${(((T=c[46].model.ollama)==null?void 0:T.size)/1024**3).toFixed(1)}GB)`:""}`),g[0]&65536|g[1]&128&&(p.$$scope={dirty:g,ctx:c}),t.$set(p)},i(c){l||(N(t.$$.fragment,c),l=!0)},o(c){S(t.$$.fragment,c),l=!1},d(c){c&&h(e),ee(t)}}}function el(a){var r,n;let e,t=(((n=(r=a[46].model.ollama)==null?void 0:r.details)==null?void 0:n.parameter_size)??"")+"",l;return{c(){e=D("span"),l=J(t),this.h()},l(o){e=V(o,"SPAN",{class:!0});var i=C(e);l=K(i,t),i.forEach(h),this.h()},h(){v(e,"class","text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1")},m(o,i){A(o,e,i),y(e,l)},p(o,i){var s,u;i[0]&65536&&t!==(t=(((u=(s=o[46].model.ollama)==null?void 0:s.details)==null?void 0:u.parameter_size)??"")+"")&&te(l,t)},d(o){o&&h(e)}}}function tl(a){let e,t;return e=new he({props:{content:"External",$$slots:{default:[al]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ll(a){let e,t;return e=new he({props:{content:"Direct",$$slots:{default:[rl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function al(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd"></path></svg>';return{c(){e=D("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-n3uai6"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){A(l,e,r)},p:Oe,d(l){l&&h(e)}}}function rl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-3"><path fill-rule="evenodd" d="M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z" clip-rule="evenodd"></path></svg>';return{c(){e=D("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-1dup7go"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){A(l,e,r)},p:Oe,d(l){l&&h(e)}}}function st(a){var l,r,n;let e,t;return e=new he({props:{content:`${Ge.parse(Ye((n=(r=(l=a[46].model)==null?void 0:l.info)==null?void 0:r.meta)==null?void 0:n.description).replaceAll(`
`,"<br>"))}`,$$slots:{default:[ol]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,i){x(e,o,i),t=!0},p(o,i){var u,c,g;const s={};i[0]&65536&&(s.content=`${Ge.parse(Ye((g=(c=(u=o[46].model)==null?void 0:u.info)==null?void 0:c.meta)==null?void 0:g.description).replaceAll(`
`,"<br>"))}`),i[1]&128&&(s.$$scope={dirty:i,ctx:o}),e.$set(s)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){S(e.$$.fragment,o),t=!1},d(o){ee(e,o)}}}function ol(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>';return{c(){e=D("div"),e.innerHTML=t,this.h()},l(l){e=V(l,"DIV",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-1mqbvzr"&&(e.innerHTML=t),this.h()},h(){v(e,"class","translate-y-[1px]")},m(l,r){A(l,e,r)},p:Oe,d(l){l&&h(e)}}}function it(a){var o,i;let e,t,l=ie((i=(o=a[46].model)==null?void 0:o.info)==null?void 0:i.meta.tags),r=[];for(let s=0;s<l.length;s+=1)r[s]=ft(Qe(a,l,s));const n=s=>S(r[s],1,1,()=>{r[s]=null});return{c(){e=D("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=V(s,"DIV",{class:!0});var u=C(e);for(let c=0;c<r.length;c+=1)r[c].l(u);u.forEach(h),this.h()},h(){v(e,"class","flex gap-0.5 self-center items-center h-full translate-y-[0.5px] overflow-x-auto scrollbar-none")},m(s,u){A(s,e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);t=!0},p(s,u){var c,g;if(u[0]&65536){l=ie((g=(c=s[46].model)==null?void 0:c.info)==null?void 0:g.meta.tags);let p;for(p=0;p<l.length;p+=1){const E=Qe(s,l,p);r[p]?(r[p].p(E,u),N(r[p],1)):(r[p]=ft(E),r[p].c(),N(r[p],1),r[p].m(e,null))}for(re(),p=l.length;p<r.length;p+=1)n(p);oe()}},i(s){if(!t){for(let u=0;u<l.length;u+=1)N(r[u]);t=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)S(r[u]);t=!1},d(s){s&&h(e),Ee(r,s)}}}function nl(a){let e,t=a[49].name+"",l,r;return{c(){e=D("div"),l=J(t),r=H(),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=C(e);l=K(o,t),o.forEach(h),r=R(n),this.h()},h(){v(e,"class","text-xs font-bold px-1 rounded-sm uppercase bg-gray-500/20 text-gray-700 dark:text-gray-200")},m(n,o){A(n,e,o),y(e,l),A(n,r,o)},p(n,o){o[0]&65536&&t!==(t=n[49].name+"")&&te(l,t)},d(n){n&&(h(e),h(r))}}}function ft(a){let e,t;return e=new he({props:{content:a[49].name,className:"flex-shrink-0",$$slots:{default:[nl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},p(l,r){const n={};r[0]&65536&&(n.content=l[49].name),r[0]&65536|r[1]&128&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function ut(a){let e,t,l;return t=new Ut({}),{c(){e=D("div"),Q(t.$$.fragment),this.h()},l(r){e=V(r,"DIV",{class:!0});var n=C(e);X(t.$$.fragment,n),n.forEach(h),this.h()},h(){v(e,"class","ml-auto pl-2 pr-2 md:pr-0")},m(r,n){A(r,e,n),x(t,e,null),l=!0},i(r){l||(N(t.$$.fragment,r),l=!0)},o(r){S(t.$$.fragment,r),l=!1},d(r){r&&h(e),ee(t)}}}function ct(a){var Z,le,fe,ue,pe,_e,ge,ve,be,we,De,Ve,Ie,Ce,Te;let e,t,l,r,n,o,i,s,u,c,g,p,E,b,I,w,L,T,O,P,M=a[19]&&(((ue=(fe=(le=(Z=a[46])==null?void 0:Z.model)==null?void 0:le.info)==null?void 0:fe.meta)==null?void 0:ue.tags)??[]).length>0&&rt(a);s=new he({props:{content:((pe=a[20])==null?void 0:pe.role)==="admin"?((_e=a[46])==null?void 0:_e.value)??"":"",placement:"top-start",$$slots:{default:[xt]},$$scope:{ctx:a}}});let j=a[46].model.owned_by==="ollama"&&(((ve=(ge=a[46].model.ollama)==null?void 0:ge.details)==null?void 0:ve.parameter_size)??"")!==""&&nt(a);const k=[ll,tl],f=[];function _(d,B){var U;return(U=d[46].model)!=null&&U.direct?0:d[46].model.owned_by==="openai"?1:-1}~(g=_(a))&&(p=f[g]=k[g](a));let m=((De=(we=(be=a[46].model)==null?void 0:be.info)==null?void 0:we.meta)==null?void 0:De.description)&&st(a),$=!a[19]&&(((Te=(Ce=(Ie=(Ve=a[46])==null?void 0:Ve.model)==null?void 0:Ie.info)==null?void 0:Ce.meta)==null?void 0:Te.tags)??[]).length>0&&it(a),z=a[0]===a[46].value&&ut();function F(){return a[32](a[46],a[48])}return{c(){e=D("button"),t=D("div"),M&&M.c(),l=H(),r=D("div"),n=D("div"),o=D("div"),i=D("div"),Q(s.$$.fragment),u=H(),j&&j.c(),c=H(),p&&p.c(),E=H(),m&&m.c(),b=H(),$&&$.c(),I=H(),z&&z.c(),this.h()},l(d){e=V(d,"BUTTON",{"aria-label":!0,class:!0,"data-arrow-selected":!0});var B=C(e);t=V(B,"DIV",{class:!0});var U=C(t);M&&M.l(U),l=R(U),r=V(U,"DIV",{class:!0});var q=C(r);n=V(q,"DIV",{class:!0});var W=C(n);o=V(W,"DIV",{class:!0});var Y=C(o);i=V(Y,"DIV",{class:!0});var se=C(i);X(s.$$.fragment,se),se.forEach(h),Y.forEach(h),u=R(W),j&&j.l(W),W.forEach(h),c=R(q),p&&p.l(q),E=R(q),m&&m.l(q),b=R(q),$&&$.l(q),q.forEach(h),U.forEach(h),I=R(B),z&&z.l(B),B.forEach(h),this.h()},h(){v(i,"class","flex items-center min-w-fit"),v(o,"class","line-clamp-1"),v(n,"class","flex items-center min-w-fit"),v(r,"class","flex items-center gap-2"),v(t,"class","flex flex-col"),v(e,"aria-label","model-item"),v(e,"class",w="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[48]===a[15]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")),v(e,"data-arrow-selected",L=a[48]===a[15])},m(d,B){A(d,e,B),y(e,t),M&&M.m(t,null),y(t,l),y(t,r),y(r,n),y(n,o),y(o,i),x(s,i,null),y(n,u),j&&j.m(n,null),y(r,c),~g&&f[g].m(r,null),y(r,E),m&&m.m(r,null),y(r,b),$&&$.m(r,null),y(e,I),z&&z.m(e,null),T=!0,O||(P=ne(e,"click",F),O=!0)},p(d,B){var W,Y,se,ke,ce,G,de,Ae,Pe,je,Le,He,Re,Ue,qe;a=d,a[19]&&(((ke=(se=(Y=(W=a[46])==null?void 0:W.model)==null?void 0:Y.info)==null?void 0:se.meta)==null?void 0:ke.tags)??[]).length>0?M?M.p(a,B):(M=rt(a),M.c(),M.m(t,l)):M&&(M.d(1),M=null);const U={};B[0]&1114112&&(U.content=((ce=a[20])==null?void 0:ce.role)==="admin"?((G=a[46])==null?void 0:G.value)??"":""),B[0]&65536|B[1]&128&&(U.$$scope={dirty:B,ctx:a}),s.$set(U),a[46].model.owned_by==="ollama"&&(((Ae=(de=a[46].model.ollama)==null?void 0:de.details)==null?void 0:Ae.parameter_size)??"")!==""?j?(j.p(a,B),B[0]&65536&&N(j,1)):(j=nt(a),j.c(),N(j,1),j.m(n,null)):j&&(re(),S(j,1,1,()=>{j=null}),oe());let q=g;g=_(a),g!==q&&(p&&(re(),S(f[q],1,1,()=>{f[q]=null}),oe()),~g?(p=f[g],p||(p=f[g]=k[g](a),p.c()),N(p,1),p.m(r,E)):p=null),(Le=(je=(Pe=a[46].model)==null?void 0:Pe.info)==null?void 0:je.meta)!=null&&Le.description?m?(m.p(a,B),B[0]&65536&&N(m,1)):(m=st(a),m.c(),N(m,1),m.m(r,b)):m&&(re(),S(m,1,1,()=>{m=null}),oe()),!a[19]&&(((qe=(Ue=(Re=(He=a[46])==null?void 0:He.model)==null?void 0:Re.info)==null?void 0:Ue.meta)==null?void 0:qe.tags)??[]).length>0?$?($.p(a,B),B[0]&589824&&N($,1)):($=it(a),$.c(),N($,1),$.m(r,null)):$&&(re(),S($,1,1,()=>{$=null}),oe()),a[0]===a[46].value?z?B[0]&65537&&N(z,1):(z=ut(),z.c(),N(z,1),z.m(e,null)):z&&(re(),S(z,1,1,()=>{z=null}),oe()),(!T||B[0]&32768&&w!==(w="flex w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted "+(a[48]===a[15]?"bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent":"")))&&v(e,"class",w),(!T||B[0]&32768&&L!==(L=a[48]===a[15]))&&v(e,"data-arrow-selected",L)},i(d){T||(N(s.$$.fragment,d),N(j),N(p),N(m),N($),N(z),T=!0)},o(d){S(s.$$.fragment,d),S(j),S(p),S(m),S($),S(z),T=!1},d(d){d&&h(e),M&&M.d(),ee(s),j&&j.d(),~g&&f[g].d(),m&&m.d(),$&&$.d(),z&&z.d(),O=!1,P()}}}function dt(a){let e,t;return e=new he({props:{content:a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]}),placement:"top-start",$$slots:{default:[sl]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},p(l,r){const n={};r[0]&262400&&(n.content=l[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:l[8]})),r[0]&262400|r[1]&128&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}function sl(a){let e,t,l=a[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:a[8]})+"",r,n,o;return{c(){e=D("button"),t=D("div"),r=J(l),this.h()},l(i){e=V(i,"BUTTON",{class:!0});var s=C(e);t=V(s,"DIV",{class:!0});var u=C(t);r=K(u,l),u.forEach(h),s.forEach(h),this.h()},h(){v(t,"class","truncate"),v(e,"class","flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(i,s){A(i,e,s),y(e,t),y(t,r),n||(o=ne(e,"click",a[33]),n=!0)},p(i,s){s[0]&262400&&l!==(l=i[18].t('Pull "{{searchValue}}" from Ollama.com',{searchValue:i[8]})+"")&&te(r,l)},d(i){i&&h(e),n=!1,o()}}}function mt(a){let e,t=a[17][a[43]].digest+"",l;return{c(){e=D("div"),l=J(t),this.h()},l(r){e=V(r,"DIV",{class:!0});var n=C(e);l=K(n,t),n.forEach(h),this.h()},h(){v(e,"class","-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1")},m(r,n){A(r,e,n),y(e,l)},p(r,n){n[0]&131072&&t!==(t=r[17][r[43]].digest+"")&&te(l,t)},d(r){r&&h(e)}}}function il(a){let e,t='<svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 17.94 6M18 18 6.06 6"></path></svg>',l,r;function n(){return a[34](a[43])}return{c(){e=D("button"),e.innerHTML=t,this.h()},l(o){e=V(o,"BUTTON",{class:!0,"data-svelte-h":!0}),$e(e)!=="svelte-19bzgft"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-gray-800 dark:text-gray-100")},m(o,i){A(o,e,i),l||(r=ne(e,"click",n),l=!0)},p(o,i){a=o},d(o){o&&h(e),l=!1,r()}}}function ht(a){let e,t,l,r=`<svg class="size-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`,n,o,i,s,u,c=a[43]+"",g,p,E,b,I="pullProgress"in a[17][a[43]]?`(${a[17][a[43]].pullProgress}%)`:"",w,L,T,O,P,M,j,k="digest"in a[17][a[43]]&&a[17][a[43]].digest&&mt(a);return P=new he({props:{content:a[18].t("Cancel"),$$slots:{default:[il]},$$scope:{ctx:a}}}),{c(){e=D("div"),t=D("div"),l=D("div"),l.innerHTML=r,n=H(),o=D("div"),i=D("div"),s=D("div"),u=J('Downloading "'),g=J(c),p=J('"'),E=H(),b=D("div"),w=J(I),L=H(),k&&k.c(),T=H(),O=D("div"),Q(P.$$.fragment),M=H(),this.h()},l(f){e=V(f,"DIV",{class:!0});var _=C(e);t=V(_,"DIV",{class:!0});var m=C(t);l=V(m,"DIV",{class:!0,"data-svelte-h":!0}),$e(l)!=="svelte-102rp4j"&&(l.innerHTML=r),n=R(m),o=V(m,"DIV",{class:!0});var $=C(o);i=V($,"DIV",{class:!0});var z=C(i);s=V(z,"DIV",{class:!0});var F=C(s);u=K(F,'Downloading "'),g=K(F,c),p=K(F,'"'),F.forEach(h),E=R(z),b=V(z,"DIV",{class:!0});var Z=C(b);w=K(Z,I),Z.forEach(h),z.forEach(h),L=R($),k&&k.l($),$.forEach(h),m.forEach(h),T=R(_),O=V(_,"DIV",{class:!0});var le=C(O);X(P.$$.fragment,le),le.forEach(h),M=R(_),_.forEach(h),this.h()},h(){v(l,"class","-ml-2 mr-2.5 translate-y-0.5"),v(s,"class","line-clamp-1"),v(b,"class","shrink-0"),v(i,"class","flex gap-1"),v(o,"class","flex flex-col self-start"),v(t,"class","flex"),v(O,"class","mr-2 ml-1 translate-y-0.5"),v(e,"class","flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-lg cursor-pointer data-highlighted:bg-muted")},m(f,_){A(f,e,_),y(e,t),y(t,l),y(t,n),y(t,o),y(o,i),y(i,s),y(s,u),y(s,g),y(s,p),y(i,E),y(i,b),y(b,w),y(o,L),k&&k.m(o,null),y(e,T),y(e,O),x(P,O,null),y(e,M),j=!0},p(f,_){(!j||_[0]&131072)&&c!==(c=f[43]+"")&&te(g,c),(!j||_[0]&131072)&&I!==(I="pullProgress"in f[17][f[43]]?`(${f[17][f[43]].pullProgress}%)`:"")&&te(w,I),"digest"in f[17][f[43]]&&f[17][f[43]].digest?k?k.p(f,_):(k=mt(f),k.c(),k.m(o,null)):k&&(k.d(1),k=null);const m={};_[0]&262144&&(m.content=f[18].t("Cancel")),_[0]&131072|_[1]&128&&(m.$$scope={dirty:_,ctx:f}),P.$set(m)},i(f){j||(N(P.$$.fragment,f),j=!0)},o(f){S(P.$$.fragment,f),j=!1},d(f){f&&h(e),k&&k.d(),ee(P)}}}function pt(a){let e,t,l,r,n,o,i,s=a[18].t("Temporary Chat")+"",u,c,g,p,E,b,I;return o=new Jt({props:{className:"size-4",strokeWidth:"2.5"}}),p=new Gt({props:{state:a[21]}}),{c(){e=D("hr"),t=H(),l=D("div"),r=D("button"),n=D("div"),Q(o.$$.fragment),i=H(),u=J(s),c=H(),g=D("div"),Q(p.$$.fragment),this.h()},l(w){e=V(w,"HR",{class:!0}),t=R(w),l=V(w,"DIV",{class:!0});var L=C(l);r=V(L,"BUTTON",{class:!0});var T=C(r);n=V(T,"DIV",{class:!0});var O=C(n);X(o.$$.fragment,O),i=R(O),u=K(O,s),O.forEach(h),c=R(T),g=V(T,"DIV",{});var P=C(g);X(p.$$.fragment,P),P.forEach(h),T.forEach(h),L.forEach(h),this.h()},h(){v(e,"class","border-gray-100 dark:border-gray-800"),v(n,"class","flex gap-2.5 items-center"),v(r,"class","flex justify-between w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 px-3 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg cursor-pointer data-highlighted:bg-muted"),v(l,"class","flex items-center mx-2 my-2")},m(w,L){A(w,e,L),A(w,t,L),A(w,l,L),y(l,r),y(r,n),x(o,n,null),y(n,i),y(n,u),y(r,c),y(r,g),x(p,g,null),E=!0,b||(I=ne(r,"click",a[35]),b=!0)},p(w,L){(!E||L[0]&262144)&&s!==(s=w[18].t("Temporary Chat")+"")&&te(u,s);const T={};L[0]&2097152&&(T.state=w[21]),p.$set(T)},i(w){E||(N(o.$$.fragment,w),N(p.$$.fragment,w),E=!0)},o(w){S(o.$$.fragment,w),S(p.$$.fragment,w),E=!1},d(w){w&&(h(e),h(t),h(l)),ee(o),ee(p),b=!1,I()}}}function fl(a){let e,t,l,r,n=!(a[8].trim()in a[17])&&a[8]&&a[14]&&a[20].role==="admin",o,i,s,u,c,g,p,E=a[3]&&et(a),b=a[12]&&tt(a),I=ie(a[16]),w=[];for(let f=0;f<I.length;f+=1)w[f]=ct(Ke(a,I,f));const L=f=>S(w[f],1,1,()=>{w[f]=null});let T=null;I.length||(T=at(a));let O=n&&dt(a),P=ie(Object.keys(a[17])),M=[];for(let f=0;f<P.length;f+=1)M[f]=ht(Je(a,P,f));const j=f=>S(M[f],1,1,()=>{M[f]=null});let k=a[5]&&pt(a);return{c(){E&&E.c(),e=H(),t=D("div"),b&&b.c(),l=H();for(let f=0;f<w.length;f+=1)w[f].c();T&&T.c(),r=H(),O&&O.c(),o=H();for(let f=0;f<M.length;f+=1)M[f].c();i=H(),k&&k.c(),s=H(),u=D("div"),c=H(),g=D("div"),this.h()},l(f){E&&E.l(f),e=R(f),t=V(f,"DIV",{class:!0});var _=C(t);b&&b.l(_),l=R(_);for(let m=0;m<w.length;m+=1)w[m].l(_);T&&T.l(_),r=R(_),O&&O.l(_),o=R(_);for(let m=0;m<M.length;m+=1)M[m].l(_);_.forEach(h),i=R(f),k&&k.l(f),s=R(f),u=V(f,"DIV",{class:!0}),C(u).forEach(h),c=R(f),g=V(f,"DIV",{class:!0}),C(g).forEach(h),this.h()},h(){v(t,"class","px-3 mb-2 max-h-64 overflow-y-auto scrollbar-hidden group relative"),v(u,"class","hidden w-[42rem]"),v(g,"class","hidden w-[32rem]")},m(f,_){E&&E.m(f,_),A(f,e,_),A(f,t,_),b&&b.m(t,null),y(t,l);for(let m=0;m<w.length;m+=1)w[m]&&w[m].m(t,null);T&&T.m(t,null),y(t,r),O&&O.m(t,null),y(t,o);for(let m=0;m<M.length;m+=1)M[m]&&M[m].m(t,null);A(f,i,_),k&&k.m(f,_),A(f,s,_),A(f,u,_),A(f,c,_),A(f,g,_),p=!0},p(f,_){if(f[3]?E?(E.p(f,_),_[0]&8&&N(E,1)):(E=et(f),E.c(),N(E,1),E.m(e.parentNode,e)):E&&(re(),S(E,1,1,()=>{E=null}),oe()),f[12]?b?b.p(f,_):(b=tt(f),b.c(),b.m(t,l)):b&&(b.d(1),b=null),_[0]&1935361){I=ie(f[16]);let m;for(m=0;m<I.length;m+=1){const $=Ke(f,I,m);w[m]?(w[m].p($,_),N(w[m],1)):(w[m]=ct($),w[m].c(),N(w[m],1),w[m].m(t,r))}for(re(),m=I.length;m<w.length;m+=1)L(m);oe(),!I.length&&T?T.p(f,_):I.length?T&&(T.d(1),T=null):(T=at(f),T.c(),T.m(t,r))}if(_[0]&1196288&&(n=!(f[8].trim()in f[17])&&f[8]&&f[14]&&f[20].role==="admin"),n?O?(O.p(f,_),_[0]&1196288&&N(O,1)):(O=dt(f),O.c(),N(O,1),O.m(t,o)):O&&(re(),S(O,1,1,()=>{O=null}),oe()),_[0]&17170432){P=ie(Object.keys(f[17]));let m;for(m=0;m<P.length;m+=1){const $=Je(f,P,m);M[m]?(M[m].p($,_),N(M[m],1)):(M[m]=ht($),M[m].c(),N(M[m],1),M[m].m(t,null))}for(re(),m=P.length;m<M.length;m+=1)j(m);oe()}f[5]?k?(k.p(f,_),_[0]&32&&N(k,1)):(k=pt(f),k.c(),N(k,1),k.m(s.parentNode,s)):k&&(re(),S(k,1,1,()=>{k=null}),oe())},i(f){if(!p){N(E);for(let _=0;_<I.length;_+=1)N(w[_]);N(O);for(let _=0;_<P.length;_+=1)N(M[_]);N(k),p=!0}},o(f){S(E),w=w.filter(Boolean);for(let _=0;_<w.length;_+=1)S(w[_]);S(O),M=M.filter(Boolean);for(let _=0;_<M.length;_+=1)S(M[_]);S(k),p=!1},d(f){f&&(h(e),h(t),h(i),h(s),h(u),h(c),h(g)),E&&E.d(f),b&&b.d(),Ee(w,f),T&&T.d(),O&&O.d(),Ee(M,f),k&&k.d(f)}}}function ul(a){let e;const t=a[26].default,l=Ct(t,a,a[38],null),r=l||fl(a);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,o){r&&r.m(n,o),e=!0},p(n,o){l?l.p&&(!e||o[1]&128)&&Tt(l,t,n,n[38],e?Nt(t,n[38],o,null):Mt(n[38]),null):r&&r.p&&(!e||o[0]&4185913)&&r.p(n,e?o:[-1,-1])},i(n){e||(N(r,n),e=!0)},o(n){S(r,n),e=!1},d(n){r&&r.d(n)}}}function cl(a){let e,t,l,r;return e=new Pt({props:{class:"relative w-full font-primary","aria-label":a[2],id:"model-selector-"+a[1]+"-button",$$slots:{default:[Xt]},$$scope:{ctx:a}}}),l=new jt({props:{class:" z-40 "+(a[19]?"w-full":`${a[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden",transition:Ht,side:a[19]?"bottom":"bottom-start",sideOffset:3,$$slots:{default:[ul]},$$scope:{ctx:a}}}),{c(){Q(e.$$.fragment),t=H(),Q(l.$$.fragment)},l(n){X(e.$$.fragment,n),t=R(n),X(l.$$.fragment,n)},m(n,o){x(e,n,o),A(n,t,o),x(l,n,o),r=!0},p(n,o){const i={};o[0]&4&&(i["aria-label"]=n[2]),o[0]&2&&(i.id="model-selector-"+n[1]+"-button"),o[0]&8324|o[1]&128&&(i.$$scope={dirty:o,ctx:n}),e.$set(i);const s={};o[0]&524352&&(s.class=" z-40 "+(n[19]?"w-full":`${n[6]}`)+" max-w-[calc(100vw-1rem)] justify-start rounded-xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden"),o[0]&524288&&(s.side=n[19]?"bottom":"bottom-start"),o[0]&4185913|o[1]&128&&(s.$$scope={dirty:o,ctx:n}),l.$set(s)},i(n){r||(N(e.$$.fragment,n),N(l.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),S(l.$$.fragment,n),r=!1},d(n){n&&h(t),ee(e,n),ee(l,n)}}}function dl(a){let e,t,l;function r(o){a[37](o)}let n={onOpenChange:a[36],closeFocus:!1,$$slots:{default:[cl]},$$scope:{ctx:a}};return a[11]!==void 0&&(n.open=a[11]),e=new At({props:n}),Ne.push(()=>wt(e,"open",r)),{c(){Q(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,i){x(e,o,i),l=!0},p(o,i){const s={};i[0]&33024&&(s.onOpenChange=o[36]),i[0]&4194303|i[1]&128&&(s.$$scope={dirty:i,ctx:o}),!t&&i[0]&2048&&(t=!0,s.open=o[11],gt(()=>t=!1)),e.$set(s)},i(o){l||(N(e.$$.fragment,o),l=!0)},o(o){S(e.$$.fragment,o),l=!1},d(o){ee(e,o)}}}function ml(a,e,t){let l,r,n,o,i,s,u,c;ae(a,ye,d=>t(17,r=d)),ae(a,yt,d=>t(39,o=d)),ae(a,Et,d=>t(40,i=d)),ae(a,zt,d=>t(19,s=d)),ae(a,$t,d=>t(20,u=d)),ae(a,Fe,d=>t(21,c=d));let{$$slots:g={},$$scope:p}=e;const E=vt("i18n");ae(a,E,d=>t(18,n=d)),It();let{id:b=""}=e,{value:I=We}=e,{placeholder:w="Select a model"}=e,{searchEnabled:L=!0}=e,{searchPlaceholder:T=n.t("Search a model")}=e,{showTemporaryChatControl:O=!1}=e,{items:P=[]}=e,{className:M="w-[32rem]"}=e,{triggerClassName:j="text-lg"}=e,k,f=!1,_=[],m="",$="",z="",F=null,Z=0;const le=new Lt(P.map(d=>{var U,q,W,Y,se,ke,ce,G;return{...d,modelName:(U=d.model)==null?void 0:U.name,tags:(se=(Y=(W=(q=d.model)==null?void 0:q.info)==null?void 0:W.meta)==null?void 0:Y.tags)==null?void 0:se.map(de=>de.name).join(" "),desc:(G=(ce=(ke=d.model)==null?void 0:ke.info)==null?void 0:ce.meta)==null?void 0:G.description}}),{keys:["value","tags","modelName"],threshold:.4}),fe=async()=>{var q;const d=$.trim().replace(/^ollama\s+(run|pull)\s+/,"");if(console.log(r),r[d]){me.error(n.t("Model '{{modelTag}}' is already in queue for downloading.",{modelTag:d}));return}if(Object.keys(r).length===3){me.error(n.t("Maximum of 3 models can be downloaded simultaneously. Please try again later."));return}const[B,U]=await Ft(localStorage.token,d,"0").catch(W=>(me.error(`${W}`),null));if(B){const W=B.body.pipeThrough(new TextDecoderStream).pipeThrough(Vt(`
`)).getReader();for(ye.set({...r,[d]:{...r[d],abortController:U,reader:W,done:!1}});;)try{const{value:Y,done:se}=await W.read();if(se)break;let ke=Y.split(`
`);for(const ce of ke)if(ce!==""){let G=JSON.parse(ce);if(console.log(G),G.error)throw G.error;if(G.detail)throw G.detail;if(G.status)if(G.digest){let de=0;G.completed?de=Math.round(G.completed/G.total*1e3)/10:de=100,ye.set({...r,[d]:{...r[d],pullProgress:de,digest:G.digest}})}else me.success(G.status),ye.set({...r,[d]:{...r[d],done:G.status==="success"}})}}catch(Y){console.log(Y),typeof Y!="string"&&(Y=Y.message),me.error(`${Y}`);break}r[d].done?(me.success(n.t("Model '{{modelName}}' has been successfully downloaded.",{modelName:d})),Dt.set(await Yt(localStorage.token,((q=i==null?void 0:i.features)==null?void 0:q.enable_direct_connections)&&((o==null?void 0:o.directConnections)??null)))):me.error(n.t("Download canceled")),delete r[d],ye.set({...r})}};bt(async()=>{t(14,F=await Zt(localStorage.token).catch(d=>!1)),P&&(t(12,_=P.flatMap(d=>{var B,U,q;return((q=(U=(B=d.model)==null?void 0:B.info)==null?void 0:U.meta)==null?void 0:q.tags)??[]}).map(d=>d.name)),t(12,_=Array.from(new Set(_)).sort((d,B)=>d.localeCompare(B))))});const ue=async d=>{const{reader:B,abortController:U}=r[d];U&&U.abort(),B&&(await B.cancel(),delete r[d],ye.set({...r}),await Wt(localStorage.token,d),me.success(`${d} download has been canceled`))};function pe(){$=this.value,t(8,$)}const _e=d=>{if(d.code==="Enter"&&l.length>0){t(0,I=l[Z].value),t(11,f=!1);return}else d.code==="ArrowDown"?t(15,Z=Math.min(Z+1,l.length-1)):d.code==="ArrowUp"?t(15,Z=Math.max(Z-1,0)):t(15,Z=0);const B=document.querySelector('[data-arrow-selected="true"]');B==null||B.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})},ge=()=>{t(9,z="")},ve=d=>{t(9,z=d)};function be(d){Ne[d?"unshift":"push"](()=>{k=d,t(10,k)})}const we=(d,B)=>{t(0,I=d.value),t(15,Z=B),t(11,f=!1)},De=()=>{fe()},Ve=d=>{ue(d)},Ie=async()=>{Fe.set(!c),await kt("/");const d=document.getElementById("new-chat-button");setTimeout(()=>{d==null||d.click()},0),c?history.replaceState(null,"","?temporary-chat=true"):history.replaceState(null,"",location.pathname),t(11,f=!1)},Ce=async()=>{t(8,$=""),t(15,Z=0),window.setTimeout(()=>{var d;return(d=document.getElementById("model-search-input"))==null?void 0:d.focus()},0)};function Te(d){f=d,t(11,f)}return a.$$set=d=>{"id"in d&&t(1,b=d.id),"value"in d&&t(0,I=d.value),"placeholder"in d&&t(2,w=d.placeholder),"searchEnabled"in d&&t(3,L=d.searchEnabled),"searchPlaceholder"in d&&t(4,T=d.searchPlaceholder),"showTemporaryChatControl"in d&&t(5,O=d.showTemporaryChatControl),"items"in d&&t(25,P=d.items),"className"in d&&t(6,M=d.className),"triggerClassName"in d&&t(7,j=d.triggerClassName),"$$scope"in d&&t(38,p=d.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&33554432&&t(13,m=P.find(d=>d.value===We)??""),a.$$.dirty[0]&33555200&&t(16,l=$?le.search($).map(d=>d.item).filter(d=>{var B,U,q,W;return z===""?!0:(W=(q=(U=(B=d.model)==null?void 0:B.info)==null?void 0:U.meta)==null?void 0:q.tags)==null?void 0:W.map(Y=>Y.name).includes(z)}):P.filter(d=>{var B,U,q,W;return z===""?!0:(W=(q=(U=(B=d.model)==null?void 0:B.info)==null?void 0:U.meta)==null?void 0:q.tags)==null?void 0:W.map(Y=>Y.name).includes(z)}))},[I,b,w,L,T,O,M,j,$,z,k,f,_,m,F,Z,l,r,n,s,u,c,E,fe,ue,P,g,pe,_e,ge,ve,be,we,De,Ve,Ie,Ce,Te,p]}class hl extends Be{constructor(e){super(),Se(this,e,ml,dl,ze,{id:1,value:0,placeholder:2,searchEnabled:3,searchPlaceholder:4,showTemporaryChatControl:5,items:25,className:6,triggerClassName:7},null,[-1,-1])}}function pl(a){let e,t=a[5].t("Cancel")+"",l,r,n;return{c(){e=D("button"),l=J(t),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var i=C(e);l=K(i,t),i.forEach(h),this.h()},h(){v(e,"class","px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-full")},m(o,i){A(o,e,i),y(e,l),r||(n=ne(e,"click",a[13]),r=!0)},p(o,i){i&32&&t!==(t=o[5].t("Cancel")+"")&&te(l,t)},d(o){o&&h(e),r=!1,n()}}}function _l(a){let e,t=a[5].t("Run")+"",l,r,n;return{c(){e=D("button"),l=J(t),this.h()},l(o){e=V(o,"BUTTON",{class:!0});var i=C(e);l=K(i,t),i.forEach(h),this.h()},h(){v(e,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full")},m(o,i){A(o,e,i),y(e,l),r||(n=ne(e,"click",a[12]),r=!0)},p(o,i){i&32&&t!==(t=o[5].t("Run")+"")&&te(l,t)},d(o){o&&h(e),r=!1,n()}}}function gl(a){let e,t,l,r,n,o,i,s,u,c,g,p,E,b,I,w,L,T,O,P,M;function j($){a[9]($)}let k={placeholder:a[5].t("Select a model"),items:a[4].map(_t)};a[1]!==void 0&&(k.value=a[1]),u=new hl({props:k}),Ne.push(()=>wt(u,"value",j));function f($,z){return $[2]?pl:_l}let _=f(a),m=_(a);return{c(){e=D("div"),t=D("div"),l=D("div"),r=D("div"),n=D("div"),o=D("div"),i=D("div"),s=D("div"),Q(u.$$.fragment),g=H(),p=D("div"),E=D("div"),b=D("div"),I=D("textarea"),L=H(),T=D("div"),m.c(),this.h()},l($){e=V($,"DIV",{class:!0});var z=C(e);t=V(z,"DIV",{class:!0});var F=C(t);l=V(F,"DIV",{class:!0});var Z=C(l);r=V(Z,"DIV",{class:!0});var le=C(r);n=V(le,"DIV",{class:!0});var fe=C(n);o=V(fe,"DIV",{class:!0});var ue=C(o);i=V(ue,"DIV",{class:!0});var pe=C(i);s=V(pe,"DIV",{class:!0});var _e=C(s);X(u.$$.fragment,_e),_e.forEach(h),pe.forEach(h),ue.forEach(h),fe.forEach(h),le.forEach(h),g=R(Z),p=V(Z,"DIV",{class:!0,id:!0});var ge=C(p);E=V(ge,"DIV",{class:!0});var ve=C(E);b=V(ve,"DIV",{class:!0});var be=C(b);I=V(be,"TEXTAREA",{id:!0,class:!0,placeholder:!0}),C(I).forEach(h),be.forEach(h),ve.forEach(h),ge.forEach(h),L=R(Z),T=V(Z,"DIV",{class:!0});var we=C(T);m.l(we),we.forEach(h),Z.forEach(h),F.forEach(h),z.forEach(h),this.h()},h(){v(s,"class","max-w-full"),v(i,"class","overflow-hidden w-full"),v(o,"class","flex w-full"),v(n,"class","flex flex-col gap-1 w-full"),v(r,"class","flex flex-col justify-between mb-1 gap-1"),v(I,"id","text-completion-textarea"),v(I,"class","w-full h-full p-3 bg-transparent border border-gray-100 dark:border-gray-850 outline-hidden resize-none rounded-lg text-sm"),v(I,"placeholder",w=a[5].t("You're a helpful assistant.")),v(b,"class","flex-1"),v(E,"class","h-full w-full flex flex-col"),v(p,"class","pt-0.5 pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0"),v(p,"id","messages-container"),v(T,"class","pb-3 flex justify-end"),v(l,"class","flex flex-col h-full px-4"),v(t,"class","mx-auto w-full md:px-0 h-full"),v(e,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m($,z){A($,e,z),y(e,t),y(t,l),y(l,r),y(r,n),y(n,o),y(o,i),y(i,s),x(u,s,null),y(l,g),y(l,p),y(p,E),y(E,b),y(b,I),a[10](I),Me(I,a[0]),y(l,L),y(l,T),m.m(T,null),O=!0,P||(M=ne(I,"input",a[11]),P=!0)},p($,[z]){const F={};z&32&&(F.placeholder=$[5].t("Select a model")),z&16&&(F.items=$[4].map(_t)),!c&&z&2&&(c=!0,F.value=$[1],gt(()=>c=!1)),u.$set(F),(!O||z&32&&w!==(w=$[5].t("You're a helpful assistant.")))&&v(I,"placeholder",w),z&1&&Me(I,$[0]),_===(_=f($))&&m?m.p($,z):(m.d(1),m=_($),m&&(m.c(),m.m(T,null)))},i($){O||(N(u.$$.fragment,$),O=!0)},o($){S(u.$$.fragment,$),O=!1},d($){$&&h(e),ee(u),a[10](null),m.d(),P=!1,M()}}}const _t=a=>({value:a.id,label:a.name,model:a});function vl(a,e,t){let l,r,n,o,i;ae(a,Et,k=>t(16,l=k)),ae(a,yt,k=>t(17,r=k)),ae(a,$t,k=>t(18,n=k)),ae(a,Dt,k=>t(4,o=k));const s=vt("i18n");ae(a,s,k=>t(5,i=k));let u="",c="",g=!1,p=!1,E;const b=()=>{const k=E;k&&(k.scrollTop=k==null?void 0:k.scrollHeight)},I=()=>{p=!0,console.log("stopResponse")},w=async()=>{const k=o.find(m=>m.id===c),[f,_]=await St(localStorage.token,{model:k.id,stream:!0,messages:[{role:"assistant",content:u}]},`${Bt}/api`);if(f&&f.ok){const m=f.body.pipeThrough(new TextDecoderStream).pipeThrough(Vt(`
`)).getReader();for(;;){const{value:$,done:z}=await m.read();if(z||p){p&&_.abort("User: Stop Response");break}try{let F=$.split(`
`);for(const Z of F)if(Z!=="")if(Z.includes("[DONE]"))console.log("done");else{let le=JSON.parse(Z.replace(/^data: /,""));console.log(le),t(0,u+=le.choices[0].delta.content??"")}}catch(F){console.log(F)}b()}}},L=async()=>{c&&(t(2,g=!0),await w(),t(2,g=!1),p=!1)};bt(async()=>{(n==null?void 0:n.role)!=="admin"&&await kt("/"),r!=null&&r.models?t(1,c=r==null?void 0:r.models[0]):l!=null&&l.default_models?t(1,c=l==null?void 0:l.default_models.split(",")[0]):t(1,c="")});function T(k){c=k,t(1,c)}function O(k){Ne[k?"unshift":"push"](()=>{E=k,t(3,E)})}function P(){u=this.value,t(0,u)}return[u,c,g,E,o,i,s,I,L,T,O,P,()=>{L()},()=>{I()}]}class bl extends Be{constructor(e){super(),Se(this,e,vl,gl,ze,{})}}function wl(a){let e,t;return e=new bl({}),{c(){Q(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},p:Oe,i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){ee(e,l)}}}class Ul extends Be{constructor(e){super(),Se(this,e,null,wl,ze,{})}}export{Ul as component};
