import{A as je}from"./index.m-M8DqUY.js";import{a as Fe}from"./apiInterceptor.CqcRa0WA.js";function q0(M){return new Int8Array(M)}function M0(M){return new Int16Array(M)}function w0(M){return new Int32Array(M)}function S0(M){return new Float32Array(M)}function Z0(M){return new Float64Array(M)}function A0(M){if(M.length==1)return S0(M[0]);var D=M[0];M=M.slice(1);for(var P=[],j=0;j<D;j++)P.push(A0(M));return P}function R0(M){if(M.length==1)return w0(M[0]);var D=M[0];M=M.slice(1);for(var P=[],j=0;j<D;j++)P.push(R0(M));return P}function B0(M){if(M.length==1)return M0(M[0]);var D=M[0];M=M.slice(1);for(var P=[],j=0;j<D;j++)P.push(B0(M));return P}function T0(M){if(M.length==1)return new Array(M[0]);var D=M[0];M=M.slice(1);for(var P=[],j=0;j<D;j++)P.push(T0(M));return P}var k0={};k0.fill=function(M,D,P,j){if(arguments.length==2)for(var n1=0;n1<M.length;n1++)M[n1]=arguments[1];else for(var n1=D;n1<P;n1++)M[n1]=j};var ea={};ea.arraycopy=function(M,D,P,j,n1){for(var Z=D+n1;D<Z;)P[j++]=M[D++]};ea.out={};ea.out.println=function(M){console.log(M)};ea.out.printf=function(){console.log.apply(console,arguments)};var fa={};fa.SQRT2=1.4142135623730951;fa.FAST_LOG10=function(M){return Math.log10(M)};fa.FAST_LOG10_X=function(M,D){return Math.log10(M)*D};function Ae(M){this.ordinal=M}Ae.short_block_allowed=new Ae(0);Ae.short_block_coupled=new Ae(1);Ae.short_block_dispensed=new Ae(2);Ae.short_block_forced=new Ae(3);var E0={};E0.MAX_VALUE=34028235e31;function ce(M){this.ordinal=M}ce.vbr_off=new ce(0);ce.vbr_mt=new ce(1);ce.vbr_rh=new ce(2);ce.vbr_abr=new ce(3);ce.vbr_mtrh=new ce(4);ce.vbr_default=ce.vbr_mtrh;var G0=function(M){},z1={System:ea,VbrMode:ce,Float:E0,ShortBlock:Ae,Util:fa,Arrays:k0,new_array_n:T0,new_byte:q0,new_double:Z0,new_float:S0,new_float_n:A0,new_int:w0,new_int_n:R0,new_short:M0,new_short_n:B0,assert:G0},Sa,Qa;function z0(){if(Qa)return Sa;Qa=1;var M=z1,D=M.System,P=M.Util,j=M.Arrays,n1=M.new_float,Z=te();function G(){var V=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*P.SQRT2*.5/2384e-9,.017876148*P.SQRT2*.5/2384e-9,.003134727*P.SQRT2*.5/2384e-9,.002457142*P.SQRT2*.5/2384e-9,971317e-9*P.SQRT2*.5/2384e-9,218868e-9*P.SQRT2*.5/2384e-9,101566e-9*P.SQRT2*.5/2384e-9,13828e-9*P.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],J=12,u1=36,d=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],p=d[Z.SHORT_TYPE],H=d[Z.SHORT_TYPE],r1=d[Z.SHORT_TYPE],W=d[Z.SHORT_TYPE],s1=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function K(h,v,e){for(var l=10,A=v+238-14-286,y=-15;y<0;y++){var N,B,E;N=V[l+-10],B=h[A+-224]*N,E=h[v+224]*N,N=V[l+-9],B+=h[A+-160]*N,E+=h[v+160]*N,N=V[l+-8],B+=h[A+-96]*N,E+=h[v+96]*N,N=V[l+-7],B+=h[A+-32]*N,E+=h[v+32]*N,N=V[l+-6],B+=h[A+32]*N,E+=h[v+-32]*N,N=V[l+-5],B+=h[A+96]*N,E+=h[v+-96]*N,N=V[l+-4],B+=h[A+160]*N,E+=h[v+-160]*N,N=V[l+-3],B+=h[A+224]*N,E+=h[v+-224]*N,N=V[l+-2],B+=h[v+-256]*N,E-=h[A+256]*N,N=V[l+-1],B+=h[v+-192]*N,E-=h[A+192]*N,N=V[l+0],B+=h[v+-128]*N,E-=h[A+128]*N,N=V[l+1],B+=h[v+-64]*N,E-=h[A+64]*N,N=V[l+2],B+=h[v+0]*N,E-=h[A+0]*N,N=V[l+3],B+=h[v+64]*N,E-=h[A+-64]*N,N=V[l+4],B+=h[v+128]*N,E-=h[A+-128]*N,N=V[l+5],B+=h[v+192]*N,E-=h[A+-192]*N,B*=V[l+6],N=E-B,e[30+y*2]=E+B,e[31+y*2]=V[l+7]*N,l+=18,v--,A++}{var B,E,i1,b;E=h[v+-16]*V[l+-10],B=h[v+-32]*V[l+-2],E+=(h[v+-48]-h[v+16])*V[l+-9],B+=h[v+-96]*V[l+-1],E+=(h[v+-80]+h[v+48])*V[l+-8],B+=h[v+-160]*V[l+0],E+=(h[v+-112]-h[v+80])*V[l+-7],B+=h[v+-224]*V[l+1],E+=(h[v+-144]+h[v+112])*V[l+-6],B-=h[v+32]*V[l+2],E+=(h[v+-176]-h[v+144])*V[l+-5],B-=h[v+96]*V[l+3],E+=(h[v+-208]+h[v+176])*V[l+-4],B-=h[v+160]*V[l+4],E+=(h[v+-240]-h[v+208])*V[l+-3],B-=h[v+224],i1=B-E,b=B+E,E=e[14],B=e[15]-E,e[31]=b+E,e[30]=i1+B,e[15]=i1-B,e[14]=b-E}{var t;t=e[28]-e[0],e[0]+=e[28],e[28]=t*V[l+-2*18+7],t=e[29]-e[1],e[1]+=e[29],e[29]=t*V[l+-2*18+7],t=e[26]-e[2],e[2]+=e[26],e[26]=t*V[l+-4*18+7],t=e[27]-e[3],e[3]+=e[27],e[27]=t*V[l+-4*18+7],t=e[24]-e[4],e[4]+=e[24],e[24]=t*V[l+-6*18+7],t=e[25]-e[5],e[5]+=e[25],e[25]=t*V[l+-6*18+7],t=e[22]-e[6],e[6]+=e[22],e[22]=t*P.SQRT2,t=e[23]-e[7],e[7]+=e[23],e[23]=t*P.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],t=e[6],e[6]=e[31]-t,e[31]=e[31]+t,t=e[7],e[7]=e[30]-t,e[30]=e[30]+t,t=e[22],e[22]=e[15]-t,e[15]=e[15]+t,t=e[23],e[23]=e[14]-t,e[14]=e[14]+t,t=e[20]-e[8],e[8]+=e[20],e[20]=t*V[l+-10*18+7],t=e[21]-e[9],e[9]+=e[21],e[21]=t*V[l+-10*18+7],t=e[18]-e[10],e[10]+=e[18],e[18]=t*V[l+-12*18+7],t=e[19]-e[11],e[11]+=e[19],e[19]=t*V[l+-12*18+7],t=e[16]-e[12],e[12]+=e[16],e[16]=t*V[l+-14*18+7],t=e[17]-e[13],e[13]+=e[17],e[17]=t*V[l+-14*18+7],t=-e[20]+e[24],e[20]+=e[24],e[24]=t*V[l+-12*18+7],t=-e[21]+e[25],e[21]+=e[25],e[25]=t*V[l+-12*18+7],t=e[4]-e[8],e[4]+=e[8],e[8]=t*V[l+-12*18+7],t=e[5]-e[9],e[5]+=e[9],e[9]=t*V[l+-12*18+7],t=e[0]-e[12],e[0]+=e[12],e[12]=t*V[l+-4*18+7],t=e[1]-e[13],e[1]+=e[13],e[13]=t*V[l+-4*18+7],t=e[16]-e[28],e[16]+=e[28],e[28]=t*V[l+-4*18+7],t=-e[17]+e[29],e[17]+=e[29],e[29]=t*V[l+-4*18+7],t=P.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=t,t=P.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=t,t=P.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=t-e[18],t=P.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=t-e[19],t=e[2],e[19]-=e[3],e[3]-=t,e[2]=e[31]-t,e[31]+=t,t=e[3],e[11]-=e[19],e[18]-=t,e[3]=e[30]-t,e[30]+=t,t=e[18],e[27]-=e[11],e[19]-=t,e[18]=e[15]-t,e[15]+=t,t=e[19],e[10]-=t,e[19]=e[14]-t,e[14]+=t,t=e[10],e[11]-=t,e[10]=e[23]-t,e[23]+=t,t=e[11],e[26]-=t,e[11]=e[22]-t,e[22]+=t,t=e[26],e[27]-=t,e[26]=e[7]-t,e[7]+=t,t=e[27],e[27]=e[6]-t,e[6]+=t,t=P.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=t,t=P.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=t,t=P.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=t,t=P.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=t,t=-P.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=t-e[8],t=-P.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=t-e[9],t=-P.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=t-e[25],t=-P.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=t-e[24],t=e[24]-e[16],e[24]=t,t=e[20]-t,e[20]=t,t=e[28]-t,e[28]=t,t=e[25]-e[17],e[25]=t,t=e[21]-t,e[21]=t,t=e[29]-t,e[29]=t,t=e[17]-e[1],e[17]=t,t=e[9]-t,e[9]=t,t=e[25]-t,e[25]=t,t=e[5]-t,e[5]=t,t=e[21]-t,e[21]=t,t=e[13]-t,e[13]=t,t=e[29]-t,e[29]=t,t=e[1]-e[0],e[1]=t,t=e[16]-t,e[16]=t,t=e[17]-t,e[17]=t,t=e[8]-t,e[8]=t,t=e[9]-t,e[9]=t,t=e[24]-t,e[24]=t,t=e[25]-t,e[25]=t,t=e[4]-t,e[4]=t,t=e[5]-t,e[5]=t,t=e[20]-t,e[20]=t,t=e[21]-t,e[21]=t,t=e[12]-t,e[12]=t,t=e[13]-t,e[13]=t,t=e[28]-t,e[28]=t,t=e[29]-t,e[29]=t,t=e[0],e[0]+=e[31],e[31]-=t,t=e[1],e[1]+=e[30],e[30]-=t,t=e[16],e[16]+=e[15],e[15]-=t,t=e[17],e[17]+=e[14],e[14]-=t,t=e[8],e[8]+=e[23],e[23]-=t,t=e[9],e[9]+=e[22],e[22]-=t,t=e[24],e[24]+=e[7],e[7]-=t,t=e[25],e[25]+=e[6],e[6]-=t,t=e[4],e[4]+=e[27],e[27]-=t,t=e[5],e[5]+=e[26],e[26]-=t,t=e[20],e[20]+=e[11],e[11]-=t,t=e[21],e[21]+=e[10],e[10]-=t,t=e[12],e[12]+=e[19],e[19]-=t,t=e[13],e[13]+=e[18],e[18]-=t,t=e[28],e[28]+=e[3],e[3]-=t,t=e[29],e[29]+=e[2],e[2]-=t}}function w(h,v){for(var e=0;e<3;e++){var l,A,y,N,B,E;N=h[v+2*3]*d[Z.SHORT_TYPE][0]-h[v+5*3],l=h[v+0*3]*d[Z.SHORT_TYPE][2]-h[v+3*3],A=N+l,y=N-l,N=h[v+5*3]*d[Z.SHORT_TYPE][0]+h[v+2*3],l=h[v+3*3]*d[Z.SHORT_TYPE][2]+h[v+0*3],B=N+l,E=-N+l,l=(h[v+1*3]*d[Z.SHORT_TYPE][1]-h[v+4*3])*2069978111953089e-26,N=(h[v+4*3]*d[Z.SHORT_TYPE][1]+h[v+1*3])*2069978111953089e-26,h[v+3*0]=A*190752519173728e-25+l,h[v+3*5]=-B*190752519173728e-25+N,y=y*.8660254037844387*1907525191737281e-26,B=B*.5*1907525191737281e-26+N,h[v+3*1]=y-B,h[v+3*2]=y+B,A=A*.5*1907525191737281e-26-l,E=E*.8660254037844387*1907525191737281e-26,h[v+3*3]=A+E,h[v+3*4]=A-E,v++}}function f(h,v,e){var l,A;{var y,N,B,E,i1,b,t,g;y=e[17]-e[9],B=e[15]-e[11],E=e[14]-e[12],i1=e[0]+e[8],b=e[1]+e[7],t=e[2]+e[6],g=e[3]+e[5],h[v+17]=i1+t-g-(b-e[4]),A=(i1+t-g)*H[19]+(b-e[4]),l=(y-B-E)*H[18],h[v+5]=l+A,h[v+6]=l-A,N=(e[16]-e[10])*H[18],b=b*H[19]+e[4],l=y*H[12]+N+B*H[13]+E*H[14],A=-i1*H[16]+b-t*H[17]+g*H[15],h[v+1]=l+A,h[v+2]=l-A,l=y*H[13]-N-B*H[14]+E*H[12],A=-i1*H[17]+b-t*H[15]+g*H[16],h[v+9]=l+A,h[v+10]=l-A,l=y*H[14]-N+B*H[12]-E*H[13],A=i1*H[15]-b+t*H[16]-g*H[17],h[v+13]=l+A,h[v+14]=l-A}{var x,L,I,z,R,r,n,a;x=e[8]-e[0],I=e[6]-e[2],z=e[5]-e[3],R=e[17]+e[9],r=e[16]+e[10],n=e[15]+e[11],a=e[14]+e[12],h[v+0]=R+n+a+(r+e[13]),l=(R+n+a)*H[19]-(r+e[13]),A=(x-I+z)*H[18],h[v+11]=l+A,h[v+12]=l-A,L=(e[7]-e[1])*H[18],r=e[13]-r*H[19],l=R*H[15]-r+n*H[16]+a*H[17],A=x*H[14]+L+I*H[12]+z*H[13],h[v+3]=l+A,h[v+4]=l-A,l=-R*H[17]+r-n*H[15]-a*H[16],A=x*H[13]+L-I*H[14]-z*H[12],h[v+7]=l+A,h[v+8]=l-A,l=-R*H[16]+r-n*H[17]-a*H[15],A=x*H[12]-L+I*H[13]-z*H[14],h[v+15]=l+A,h[v+16]=l-A}}this.mdct_sub48=function(h,v,e){for(var l=v,A=286,y=0;y<h.channels_out;y++){for(var N=0;N<h.mode_gr;N++){for(var B,E=h.l3_side.tt[N][y],i1=E.xr,b=0,t=h.sb_sample[y][1-N],g=0,x=0;x<18/2;x++)for(K(l,A,t[g]),K(l,A+32,t[g+1]),g+=2,A+=64,B=1;B<32;B+=2)t[g-1][B]*=-1;for(B=0;B<32;B++,b+=18){var L=E.block_type,I=h.sb_sample[y][N],z=h.sb_sample[y][1-N];if(E.mixed_block_flag!=0&&B<2&&(L=0),h.amp_filter[B]<1e-12)j.fill(i1,b+0,b+18,0);else{if(h.amp_filter[B]<1)for(var x=0;x<18;x++)z[x][s1[B]]*=h.amp_filter[B];if(L==Z.SHORT_TYPE){for(var x=-J/4;x<0;x++){var R=d[Z.SHORT_TYPE][x+3];i1[b+x*3+9]=I[9+x][s1[B]]*R-I[8-x][s1[B]],i1[b+x*3+18]=I[14-x][s1[B]]*R+I[15+x][s1[B]],i1[b+x*3+10]=I[15+x][s1[B]]*R-I[14-x][s1[B]],i1[b+x*3+19]=z[2-x][s1[B]]*R+z[3+x][s1[B]],i1[b+x*3+11]=z[3+x][s1[B]]*R-z[2-x][s1[B]],i1[b+x*3+20]=z[8-x][s1[B]]*R+z[9+x][s1[B]]}w(i1,b)}else{for(var r=n1(18),x=-u1/4;x<0;x++){var n,a;n=d[L][x+27]*z[x+9][s1[B]]+d[L][x+36]*z[8-x][s1[B]],a=d[L][x+9]*I[x+9][s1[B]]-d[L][x+18]*I[8-x][s1[B]],r[x+9]=n-a*p[3+x+9],r[x+18]=n*p[3+x+9]+a}f(i1,b,r)}}if(L!=Z.SHORT_TYPE&&B!=0)for(var x=7;x>=0;--x){var _,u;_=i1[b+x]*r1[20+x]+i1[b+-1-x]*W[28+x],u=i1[b+x]*W[28+x]-i1[b+-1-x]*r1[20+x],i1[b+-1-x]=_,i1[b+x]=u}}}if(l=e,A=286,h.mode_gr==1)for(var C=0;C<18;C++)D.arraycopy(h.sb_sample[y][1][C],0,h.sb_sample[y][0][C],0,32)}}}return Sa=G,Sa}var Aa,Wa;function y0(){if(Wa)return Aa;Wa=1;var M=te(),D=z1,P=D.System,j=D.new_float,n1=D.new_float_n;function Z(){this.l=j(M.SBMAX_l),this.s=n1([M.SBMAX_s,3]);var G=this;this.assign=function(V){P.arraycopy(V.l,0,G.l,0,M.SBMAX_l);for(var J=0;J<M.SBMAX_s;J++)for(var u1=0;u1<3;u1++)G.s[J][u1]=V.s[J][u1]}}return Aa=Z,Aa}var Ra,Ka;function Q0(){if(Ka)return Ra;Ka=1;var M=y0();function D(){this.thm=new M,this.en=new M}return Ra=D,Ra}function ge(M){var D=M;this.ordinal=function(){return D}}ge.STEREO=new ge(0);ge.JOINT_STEREO=new ge(1);ge.DUAL_CHANNEL=new ge(2);ge.MONO=new ge(3);ge.NOT_SET=new ge(4);var aa=ge,Ba,Ja;function te(){if(Ja)return Ba;Ja=1;var M=z1,D=M.System,P=M.VbrMode,j=M.new_array_n,n1=M.new_float,Z=M.new_float_n,G=M.new_int,V=M.assert;J.ENCDELAY=576,J.POSTDELAY=1152,J.MDCTDELAY=48,J.FFTOFFSET=224+J.MDCTDELAY,J.DECDELAY=528,J.SBLIMIT=32,J.CBANDS=64,J.SBPSY_l=21,J.SBPSY_s=12,J.SBMAX_l=22,J.SBMAX_s=13,J.PSFB21=6,J.PSFB12=6,J.BLKSIZE=1024,J.HBLKSIZE=J.BLKSIZE/2+1,J.BLKSIZE_s=256,J.HBLKSIZE_s=J.BLKSIZE_s/2+1,J.NORM_TYPE=0,J.START_TYPE=1,J.SHORT_TYPE=2,J.STOP_TYPE=3,J.MPG_MD_LR_LR=0,J.MPG_MD_LR_I=1,J.MPG_MD_MS_LR=2,J.MPG_MD_MS_I=3,J.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function J(){var u1=z0(),d=Q0(),p=aa,H=J.FFTOFFSET,r1=J.MPG_MD_MS_LR,W=null;this.psy=null;var s1=null,K=null,w=null;this.setModules=function(l,A,y,N){W=l,this.psy=A,s1=A,K=N,w=y};var f=new u1;function h(l){var A,y;if(l.ATH.useAdjust==0){l.ATH.adjust=1;return}if(y=l.loudness_sq[0][0],A=l.loudness_sq[1][0],l.channels_out==2?(y+=l.loudness_sq[0][1],A+=l.loudness_sq[1][1]):(y+=y,A+=A),l.mode_gr==2&&(y=Math.max(y,A)),y*=.5,y*=l.ATH.aaSensitivityP,y>.03125)l.ATH.adjust>=1?l.ATH.adjust=1:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=1;else{var N=31.98*y+625e-6;l.ATH.adjust>=N?(l.ATH.adjust*=N*.075+.925,l.ATH.adjust<N&&(l.ATH.adjust=N)):l.ATH.adjustLimit>=N?l.ATH.adjust=N:l.ATH.adjust<l.ATH.adjustLimit&&(l.ATH.adjust=l.ATH.adjustLimit),l.ATH.adjustLimit=N}}function v(l){var A,y;for(V(0<=l.bitrate_index&&l.bitrate_index<16),V(0<=l.mode_ext&&l.mode_ext<4),l.bitrate_stereoMode_Hist[l.bitrate_index][4]++,l.bitrate_stereoMode_Hist[15][4]++,l.channels_out==2&&(l.bitrate_stereoMode_Hist[l.bitrate_index][l.mode_ext]++,l.bitrate_stereoMode_Hist[15][l.mode_ext]++),A=0;A<l.mode_gr;++A)for(y=0;y<l.channels_out;++y){var N=l.l3_side.tt[A][y].block_type|0;l.l3_side.tt[A][y].mixed_block_flag!=0&&(N=4),l.bitrate_blockType_Hist[l.bitrate_index][N]++,l.bitrate_blockType_Hist[l.bitrate_index][5]++,l.bitrate_blockType_Hist[15][N]++,l.bitrate_blockType_Hist[15][5]++}}function e(l,A){var y=l.internal_flags,N,B;if(y.lame_encode_frame_init==0){var E,i1,b=n1(2014),t=n1(2014);for(y.lame_encode_frame_init=1,E=0,i1=0;E<286+576*(1+y.mode_gr);++E)E<576*y.mode_gr?(b[E]=0,y.channels_out==2&&(t[E]=0)):(b[E]=A[0][i1],y.channels_out==2&&(t[E]=A[1][i1]),++i1);for(B=0;B<y.mode_gr;B++)for(N=0;N<y.channels_out;N++)y.l3_side.tt[B][N].block_type=J.SHORT_TYPE;f.mdct_sub48(y,b,t),V(576>=J.FFTOFFSET),V(y.mf_size>=J.BLKSIZE+l.framesize-J.FFTOFFSET),V(y.mf_size>=512+l.framesize-32)}}this.lame_encode_mp3_frame=function(l,A,y,N,B,E){var i1,b=j([2,2]);b[0][0]=new d,b[0][1]=new d,b[1][0]=new d,b[1][1]=new d;var t=j([2,2]);t[0][0]=new d,t[0][1]=new d,t[1][0]=new d,t[1][1]=new d;var g,x=[null,null],L=l.internal_flags,I=Z([2,4]),z=[.5,.5],R=[[0,0],[0,0]],r=[[0,0],[0,0]],n,a,_;if(x[0]=A,x[1]=y,L.lame_encode_frame_init==0&&e(l,x),L.padding=0,(L.slot_lag-=L.frac_SpF)<0&&(L.slot_lag+=l.out_samplerate,L.padding=1),L.psymodel!=0){var u,C=[null,null],U=0,T=G(2);for(_=0;_<L.mode_gr;_++){for(a=0;a<L.channels_out;a++)C[a]=x[a],U=576+_*576-J.FFTOFFSET;if(l.VBR==P.vbr_mtrh||l.VBR==P.vbr_mt?u=s1.L3psycho_anal_vbr(l,C,U,_,b,t,R[_],r[_],I[_],T):u=s1.L3psycho_anal_ns(l,C,U,_,b,t,R[_],r[_],I[_],T),u!=0)return-4;for(l.mode==p.JOINT_STEREO&&(z[_]=I[_][2]+I[_][3],z[_]>0&&(z[_]=I[_][3]/z[_])),a=0;a<L.channels_out;a++){var F=L.l3_side.tt[_][a];F.block_type=T[a],F.mixed_block_flag=0}}}else for(_=0;_<L.mode_gr;_++)for(a=0;a<L.channels_out;a++)L.l3_side.tt[_][a].block_type=J.NORM_TYPE,L.l3_side.tt[_][a].mixed_block_flag=0,r[_][a]=R[_][a]=700;if(h(L),f.mdct_sub48(L,x[0],x[1]),L.mode_ext=J.MPG_MD_LR_LR,l.force_ms)L.mode_ext=J.MPG_MD_MS_LR;else if(l.mode==p.JOINT_STEREO){var _1=0,h1=0;for(_=0;_<L.mode_gr;_++)for(a=0;a<L.channels_out;a++)_1+=r[_][a],h1+=R[_][a];if(_1<=1*h1){var g1=L.l3_side.tt[0],S1=L.l3_side.tt[L.mode_gr-1];g1[0].block_type==g1[1].block_type&&S1[0].block_type==S1[1].block_type&&(L.mode_ext=J.MPG_MD_MS_LR)}}if(L.mode_ext==r1?(g=t,n=r):(g=b,n=R),l.analysis&&L.pinfo!=null)for(_=0;_<L.mode_gr;_++)for(a=0;a<L.channels_out;a++)L.pinfo.ms_ratio[_]=L.ms_ratio[_],L.pinfo.ms_ener_ratio[_]=z[_],L.pinfo.blocktype[_][a]=L.l3_side.tt[_][a].block_type,L.pinfo.pe[_][a]=n[_][a],D.arraycopy(L.l3_side.tt[_][a].xr,0,L.pinfo.xr[_][a],0,576),L.mode_ext==r1&&(L.pinfo.ers[_][a]=L.pinfo.ers[_][a+2],D.arraycopy(L.pinfo.energy[_][a+2],0,L.pinfo.energy[_][a],0,L.pinfo.energy[_][a].length));if(l.VBR==P.vbr_off||l.VBR==P.vbr_abr){var v1,M1;for(v1=0;v1<18;v1++)L.nsPsy.pefirbuf[v1]=L.nsPsy.pefirbuf[v1+1];for(M1=0,_=0;_<L.mode_gr;_++)for(a=0;a<L.channels_out;a++)M1+=n[_][a];for(L.nsPsy.pefirbuf[18]=M1,M1=L.nsPsy.pefirbuf[9],v1=0;v1<9;v1++)M1+=(L.nsPsy.pefirbuf[v1]+L.nsPsy.pefirbuf[18-v1])*J.fircoef[v1];for(M1=670*5*L.mode_gr*L.channels_out/M1,_=0;_<L.mode_gr;_++)for(a=0;a<L.channels_out;a++)n[_][a]*=M1}if(L.iteration_loop.iteration_loop(l,n,z,g),W.format_bitstream(l),i1=W.copy_buffer(L,N,B,E,1),l.bWriteVbrTag&&K.addVbrFrame(l),l.analysis&&L.pinfo!=null){for(a=0;a<L.channels_out;a++){var T1;for(T1=0;T1<H;T1++)L.pinfo.pcmdata[a][T1]=L.pinfo.pcmdata[a][T1+l.framesize];for(T1=H;T1<1600;T1++)L.pinfo.pcmdata[a][T1]=x[a][T1-H]}w.set_frame_pinfo(l,g)}return v(L),i1}}return Ba=J,Ba}var x0=z1,$a=x0.Util,Ua=x0.new_float,$1=te();function W0(){var M=Ua($1.BLKSIZE),D=Ua($1.BLKSIZE_s/2),P=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function j(Z,G,V){var J=0,u1,d,p;V<<=1;var H=G+V;u1=4;do{var r1,W,s1,K,w,f,h;h=u1>>1,K=u1,w=u1<<1,f=w+K,u1=w<<1,d=G,p=d+h;do{var v,e,l,A;e=Z[d+0]-Z[d+K],v=Z[d+0]+Z[d+K],A=Z[d+w]-Z[d+f],l=Z[d+w]+Z[d+f],Z[d+w]=v-l,Z[d+0]=v+l,Z[d+f]=e-A,Z[d+K]=e+A,e=Z[p+0]-Z[p+K],v=Z[p+0]+Z[p+K],A=$a.SQRT2*Z[p+f],l=$a.SQRT2*Z[p+w],Z[p+w]=v-l,Z[p+0]=v+l,Z[p+f]=e-A,Z[p+K]=e+A,p+=u1,d+=u1}while(d<H);for(W=P[J+0],r1=P[J+1],s1=1;s1<h;s1++){var y,N;y=1-2*r1*r1,N=2*r1*W,d=G+s1,p=G+K-s1;do{var B,E,i1,v,e,b,l,t,A,g;E=N*Z[d+K]-y*Z[p+K],B=y*Z[d+K]+N*Z[p+K],e=Z[d+0]-B,v=Z[d+0]+B,b=Z[p+0]-E,i1=Z[p+0]+E,E=N*Z[d+f]-y*Z[p+f],B=y*Z[d+f]+N*Z[p+f],A=Z[d+w]-B,l=Z[d+w]+B,g=Z[p+w]-E,t=Z[p+w]+E,E=r1*l-W*g,B=W*l+r1*g,Z[d+w]=v-B,Z[d+0]=v+B,Z[p+f]=b-E,Z[p+K]=b+E,E=W*t-r1*A,B=r1*t+W*A,Z[p+w]=i1-B,Z[p+0]=i1+B,Z[d+f]=e-E,Z[d+K]=e+E,p+=u1,d+=u1}while(d<H);y=W,W=y*P[J+0]-r1*P[J+1],r1=y*P[J+1]+r1*P[J+0]}J+=2}while(u1<V)}var n1=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(Z,G,V,J,u1){for(var d=0;d<3;d++){var p=$1.BLKSIZE_s/2,H=65535&576/3*(d+1),r1=$1.BLKSIZE_s/8-1;do{var W,s1,K,w,f,h=n1[r1<<2]&255;W=D[h]*J[V][u1+h+H],f=D[127-h]*J[V][u1+h+H+128],s1=W-f,W=W+f,K=D[h+64]*J[V][u1+h+H+64],f=D[63-h]*J[V][u1+h+H+192],w=K-f,K=K+f,p-=4,G[d][p+0]=W+K,G[d][p+2]=W-K,G[d][p+1]=s1+w,G[d][p+3]=s1-w,W=D[h+1]*J[V][u1+h+H+1],f=D[126-h]*J[V][u1+h+H+129],s1=W-f,W=W+f,K=D[h+65]*J[V][u1+h+H+65],f=D[62-h]*J[V][u1+h+H+193],w=K-f,K=K+f,G[d][p+$1.BLKSIZE_s/2+0]=W+K,G[d][p+$1.BLKSIZE_s/2+2]=W-K,G[d][p+$1.BLKSIZE_s/2+1]=s1+w,G[d][p+$1.BLKSIZE_s/2+3]=s1-w}while(--r1>=0);j(G[d],p,$1.BLKSIZE_s/2)}},this.fft_long=function(Z,G,V,J,u1){var d=$1.BLKSIZE/8-1,p=$1.BLKSIZE/2;do{var H,r1,W,s1,K,w=n1[d]&255;H=M[w]*J[V][u1+w],K=M[w+512]*J[V][u1+w+512],r1=H-K,H=H+K,W=M[w+256]*J[V][u1+w+256],K=M[w+768]*J[V][u1+w+768],s1=W-K,W=W+K,p-=4,G[p+0]=H+W,G[p+2]=H-W,G[p+1]=r1+s1,G[p+3]=r1-s1,H=M[w+1]*J[V][u1+w+1],K=M[w+513]*J[V][u1+w+513],r1=H-K,H=H+K,W=M[w+257]*J[V][u1+w+257],K=M[w+769]*J[V][u1+w+769],s1=W-K,W=W+K,G[p+$1.BLKSIZE/2+0]=H+W,G[p+$1.BLKSIZE/2+2]=H-W,G[p+$1.BLKSIZE/2+1]=r1+s1,G[p+$1.BLKSIZE/2+3]=r1-s1}while(--d>=0);j(G,p,$1.BLKSIZE/2)},this.init_fft=function(Z){for(var G=0;G<$1.BLKSIZE;G++)M[G]=.42-.5*Math.cos(2*Math.PI*(G+.5)/$1.BLKSIZE)+.08*Math.cos(4*Math.PI*(G+.5)/$1.BLKSIZE);for(var G=0;G<$1.BLKSIZE_s/2;G++)D[G]=.5*(1-Math.cos(2*Math.PI*(G+.5)/$1.BLKSIZE_s))}}var K0=W0,Re=z1,Xe=Re.VbrMode,e0=Re.Float,Ne=Re.ShortBlock,re=Re.Util,J0=Re.Arrays,U1=Re.new_float,ue=Re.new_float_n,xe=Re.new_int,X1=Re.assert,$0=K0,t1=te();function U0(){var M=aa,D=new $0,P=2.302585092994046,j=2,n1=16,Z=2,G=16,V=.34,J=1/(14752*14752)/(t1.BLKSIZE/2),u1=.01,d=.8,p=.6,H=.3,r1=3.5,W=21,s1=.2302585093;function K(o,c){for(var S=0,k=0;k<t1.BLKSIZE/2;++k)S+=o[k]*c.ATH.eql_w[k];return S*=J,S}function w(o,c,S,k,O,m,Y,q,X,a1,Q){var e1=o.internal_flags;if(X<2)D.fft_long(e1,k[O],X,a1,Q),D.fft_short(e1,m[Y],X,a1,Q);else if(X==2){for(var p1=t1.BLKSIZE-1;p1>=0;--p1){var x1=k[O+0][p1],o1=k[O+1][p1];k[O+0][p1]=(x1+o1)*re.SQRT2*.5,k[O+1][p1]=(x1-o1)*re.SQRT2*.5}for(var y1=2;y1>=0;--y1)for(var p1=t1.BLKSIZE_s-1;p1>=0;--p1){var x1=m[Y+0][y1][p1],o1=m[Y+1][y1][p1];m[Y+0][y1][p1]=(x1+o1)*re.SQRT2*.5,m[Y+1][y1][p1]=(x1-o1)*re.SQRT2*.5}}c[0]=k[O+0][0],c[0]*=c[0];for(var p1=t1.BLKSIZE/2-1;p1>=0;--p1){var $=k[O+0][t1.BLKSIZE/2-p1],w1=k[O+0][t1.BLKSIZE/2+p1];c[t1.BLKSIZE/2-p1]=($*$+w1*w1)*.5}for(var y1=2;y1>=0;--y1){S[y1][0]=m[Y+0][y1][0],S[y1][0]*=S[y1][0];for(var p1=t1.BLKSIZE_s/2-1;p1>=0;--p1){var $=m[Y+0][y1][t1.BLKSIZE_s/2-p1],w1=m[Y+0][y1][t1.BLKSIZE_s/2+p1];S[y1][t1.BLKSIZE_s/2-p1]=($*$+w1*w1)*.5}}{for(var N1=0,p1=11;p1<t1.HBLKSIZE;p1++)N1+=c[p1];e1.tot_ener[X]=N1}if(o.analysis){for(var p1=0;p1<t1.HBLKSIZE;p1++)e1.pinfo.energy[q][X][p1]=e1.pinfo.energy_save[X][p1],e1.pinfo.energy_save[X][p1]=c[p1];e1.pinfo.pe[q][X]=e1.pe[X]}o.athaa_loudapprox==2&&X<2&&(e1.loudness_sq[q][X]=e1.loudness_sq_save[X],e1.loudness_sq_save[X]=K(c,e1))}var f=8,h=23,v=15,e,l,A,y=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function N(){e=Math.pow(10,(f+1)/16),l=Math.pow(10,(h+1)/16),A=Math.pow(10,v/10)}var B=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],E=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],i1=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function b(o,c,S,k,O,m){var Y;if(c>o)if(c<o*l)Y=c/o;else return o+c;else{if(o>=c*l)return o+c;Y=o/c}if(o+=c,k+3<=6){if(Y>=e)return o;var q=0|re.FAST_LOG10_X(Y,16);return o*E[q]}var q=0|re.FAST_LOG10_X(Y,16);if(c=O.ATH.cb_l[S]*O.ATH.adjust,o<A*c){if(o>c){var X,a1;return X=1,q<=13&&(X=i1[q]),a1=re.FAST_LOG10_X(o/c,10/15),o*((B[q]-X)*a1+X)}return q>13?o:o*i1[q]}return o*B[q]}var t=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function g(o,c,S){var k;if(o<0&&(o=0),c<0&&(c=0),o<=0)return c;if(c<=0)return o;if(c>o?k=c/o:k=o/c,-2<=S&&S<=2){if(k>=e)return o+c;var O=0|re.FAST_LOG10_X(k,16);return(o+c)*t[O]}return k<l?o+c:(o<c&&(o=c),o)}function x(o,c){var S=o.internal_flags;if(S.channels_out>1){for(var k=0;k<t1.SBMAX_l;k++){var O=S.thm[0].l[k],m=S.thm[1].l[k];S.thm[0].l[k]+=m*c,S.thm[1].l[k]+=O*c}for(var k=0;k<t1.SBMAX_s;k++)for(var Y=0;Y<3;Y++){var O=S.thm[0].s[k][Y],m=S.thm[1].s[k][Y];S.thm[0].s[k][Y]+=m*c,S.thm[1].s[k][Y]+=O*c}}}function L(o){for(var c=0;c<t1.SBMAX_l;c++)if(!(o.thm[0].l[c]>1.58*o.thm[1].l[c]||o.thm[1].l[c]>1.58*o.thm[0].l[c])){var S=o.mld_l[c]*o.en[3].l[c],k=Math.max(o.thm[2].l[c],Math.min(o.thm[3].l[c],S));S=o.mld_l[c]*o.en[2].l[c];var O=Math.max(o.thm[3].l[c],Math.min(o.thm[2].l[c],S));o.thm[2].l[c]=k,o.thm[3].l[c]=O}for(var c=0;c<t1.SBMAX_s;c++)for(var m=0;m<3;m++)if(!(o.thm[0].s[c][m]>1.58*o.thm[1].s[c][m]||o.thm[1].s[c][m]>1.58*o.thm[0].s[c][m])){var S=o.mld_s[c]*o.en[3].s[c][m],k=Math.max(o.thm[2].s[c][m],Math.min(o.thm[3].s[c][m],S));S=o.mld_s[c]*o.en[2].s[c][m];var O=Math.max(o.thm[3].s[c][m],Math.min(o.thm[2].s[c][m],S));o.thm[2].s[c][m]=k,o.thm[3].s[c][m]=O}}function I(o,c,S){var k=c,O=Math.pow(10,S);c*=2,k*=2;for(var m=0;m<t1.SBMAX_l;m++){var Y,q,X,a1;if(a1=o.ATH.cb_l[o.bm_l[m]]*O,Y=Math.min(Math.max(o.thm[0].l[m],a1),Math.max(o.thm[1].l[m],a1)),q=Math.max(o.thm[2].l[m],a1),X=Math.max(o.thm[3].l[m],a1),Y*c<q+X){var Q=Y*k/(q+X);q*=Q,X*=Q}o.thm[2].l[m]=Math.min(q,o.thm[2].l[m]),o.thm[3].l[m]=Math.min(X,o.thm[3].l[m])}O*=t1.BLKSIZE_s/t1.BLKSIZE;for(var m=0;m<t1.SBMAX_s;m++)for(var e1=0;e1<3;e1++){var Y,q,X,a1;if(a1=o.ATH.cb_s[o.bm_s[m]]*O,Y=Math.min(Math.max(o.thm[0].s[m][e1],a1),Math.max(o.thm[1].s[m][e1],a1)),q=Math.max(o.thm[2].s[m][e1],a1),X=Math.max(o.thm[3].s[m][e1],a1),Y*c<q+X){var Q=Y*c/(q+X);q*=Q,X*=Q}o.thm[2].s[m][e1]=Math.min(o.thm[2].s[m][e1],q),o.thm[3].s[m][e1]=Math.min(o.thm[3].s[m][e1],X)}}function z(o,c,S,k,O){var m,Y,q=0,X=0;for(m=Y=0;m<t1.SBMAX_s;++Y,++m){for(var a1=o.bo_s[m],Q=o.npart_s,e1=a1<Q?a1:Q;Y<e1;)X1(c[Y]>=0),X1(S[Y]>=0),q+=c[Y],X+=S[Y],Y++;if(o.en[k].s[m][O]=q,o.thm[k].s[m][O]=X,Y>=Q){++m;break}X1(c[Y]>=0),X1(S[Y]>=0);{var p1=o.PSY.bo_s_weight[m],x1=1-p1;q=p1*c[Y],X=p1*S[Y],o.en[k].s[m][O]+=q,o.thm[k].s[m][O]+=X,q=x1*c[Y],X=x1*S[Y]}}for(;m<t1.SBMAX_s;++m)o.en[k].s[m][O]=0,o.thm[k].s[m][O]=0}function R(o,c,S,k){var O,m,Y=0,q=0;for(O=m=0;O<t1.SBMAX_l;++m,++O){for(var X=o.bo_l[O],a1=o.npart_l,Q=X<a1?X:a1;m<Q;)X1(c[m]>=0),X1(S[m]>=0),Y+=c[m],q+=S[m],m++;if(o.en[k].l[O]=Y,o.thm[k].l[O]=q,m>=a1){++O;break}X1(c[m]>=0),X1(S[m]>=0);{var e1=o.PSY.bo_l_weight[O],p1=1-e1;Y=e1*c[m],q=e1*S[m],o.en[k].l[O]+=Y,o.thm[k].l[O]+=q,Y=p1*c[m],q=p1*S[m]}}for(;O<t1.SBMAX_l;++O)o.en[k].l[O]=0,o.thm[k].l[O]=0}function r(o,c,S,k,O,m){var Y=o.internal_flags,q,X;for(X=q=0;X<Y.npart_s;++X){for(var a1=0,Q=Y.numlines_s[X],e1=0;e1<Q;++e1,++q){var p1=c[m][q];a1+=p1}S[X]=a1}for(X1(X==Y.npart_s),q=X=0;X<Y.npart_s;X++){var x1=Y.s3ind_s[X][0],o1=Y.s3_ss[q++]*S[x1];for(++x1;x1<=Y.s3ind_s[X][1];)o1+=Y.s3_ss[q]*S[x1],++q,++x1;{var y1=Z*Y.nb_s1[O][X];k[X]=Math.min(o1,y1)}if(Y.blocktype_old[O&1]==t1.SHORT_TYPE){var y1=G*Y.nb_s2[O][X],$=k[X];k[X]=Math.min(y1,$)}Y.nb_s2[O][X]=Y.nb_s1[O][X],Y.nb_s1[O][X]=o1,X1(k[X]>=0)}for(;X<=t1.CBANDS;++X)S[X]=0,k[X]=0}function n(o,c,S,k){var O=o.internal_flags;o.short_blocks==Ne.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var m=0;m<O.channels_out;m++)k[m]=t1.NORM_TYPE,o.short_blocks==Ne.short_block_dispensed&&(c[m]=1),o.short_blocks==Ne.short_block_forced&&(c[m]=0),c[m]!=0?(X1(O.blocktype_old[m]!=t1.START_TYPE),O.blocktype_old[m]==t1.SHORT_TYPE&&(k[m]=t1.STOP_TYPE)):(k[m]=t1.SHORT_TYPE,O.blocktype_old[m]==t1.NORM_TYPE&&(O.blocktype_old[m]=t1.START_TYPE),O.blocktype_old[m]==t1.STOP_TYPE&&(O.blocktype_old[m]=t1.SHORT_TYPE)),S[m]=O.blocktype_old[m],O.blocktype_old[m]=k[m]}function a(o,c,S){return S>=1?o:S<=0?c:c>0?Math.pow(o/c,S)*c:0}var _=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function u(o,c){for(var S=309.07,k=0;k<t1.SBMAX_s-1;k++)for(var O=0;O<3;O++){var m=o.thm.s[k][O];if(m>0){var Y=m*c,q=o.en.s[k][O];q>Y&&(q>Y*1e10?S+=_[k]*(10*P):S+=_[k]*re.FAST_LOG10(q/Y))}}return S}var C=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function U(o,c){for(var S=281.0575,k=0;k<t1.SBMAX_l-1;k++){var O=o.thm.l[k];if(O>0){var m=O*c,Y=o.en.l[k];Y>m&&(Y>m*1e10?S+=C[k]*(10*P):S+=C[k]*re.FAST_LOG10(Y/m))}}return S}function T(o,c,S,k,O){var m,Y;for(m=Y=0;m<o.npart_l;++m){var q=0,X=0,a1;for(a1=0;a1<o.numlines_l[m];++a1,++Y){var Q=c[Y];q+=Q,X<Q&&(X=Q)}S[m]=q,k[m]=X,O[m]=q*o.rnumlines_l[m],X1(o.rnumlines_l[m]>=0),X1(S[m]>=0),X1(k[m]>=0),X1(O[m]>=0)}}function F(o,c,S,k){var O=y.length-1,m=0,Y=S[m]+S[m+1];if(Y>0){var q=c[m];q<c[m+1]&&(q=c[m+1]),X1(o.numlines_l[m]+o.numlines_l[m+1]-1>0),Y=20*(q*2-Y)/(Y*(o.numlines_l[m]+o.numlines_l[m+1]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;for(m=1;m<o.npart_l-1;m++)if(Y=S[m-1]+S[m]+S[m+1],Y>0){var q=c[m-1];q<c[m]&&(q=c[m]),q<c[m+1]&&(q=c[m+1]),X1(o.numlines_l[m-1]+o.numlines_l[m]+o.numlines_l[m+1]-1>0),Y=20*(q*3-Y)/(Y*(o.numlines_l[m-1]+o.numlines_l[m]+o.numlines_l[m+1]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;if(X1(m==o.npart_l-1),Y=S[m-1]+S[m],Y>0){var q=c[m-1];q<c[m]&&(q=c[m]),X1(o.numlines_l[m-1]+o.numlines_l[m]-1>0),Y=20*(q*2-Y)/(Y*(o.numlines_l[m-1]+o.numlines_l[m]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;X1(m==o.npart_l-1)}var _1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(o,c,S,k,O,m,Y,q,X,a1){var Q=o.internal_flags,e1=ue([2,t1.BLKSIZE]),p1=ue([2,3,t1.BLKSIZE_s]),x1=U1(t1.CBANDS+1),o1=U1(t1.CBANDS+1),y1=U1(t1.CBANDS+2),$=xe(2),w1=xe(2),N1,l1,R1,f1,I1,F1,m1,D1,O1=ue([2,576]),q1,oe=xe(t1.CBANDS+2),J1=xe(t1.CBANDS+2);for(J0.fill(J1,0),N1=Q.channels_out,o.mode==M.JOINT_STEREO&&(N1=4),o.VBR==Xe.vbr_off?q1=Q.ResvMax==0?0:Q.ResvSize/Q.ResvMax*.5:o.VBR==Xe.vbr_rh||o.VBR==Xe.vbr_mtrh||o.VBR==Xe.vbr_mt?q1=.6:q1=1,l1=0;l1<Q.channels_out;l1++){var Z1=c[l1],se=S+576-350-W+192;for(f1=0;f1<576;f1++){var le,fe;for(le=Z1[se+f1+10],fe=0,I1=0;I1<(W-1)/2-1;I1+=2)le+=_1[I1]*(Z1[se+f1+I1]+Z1[se+f1+W-I1]),fe+=_1[I1+1]*(Z1[se+f1+I1+1]+Z1[se+f1+W-I1-1]);O1[l1][f1]=le+fe}O[k][l1].en.assign(Q.en[l1]),O[k][l1].thm.assign(Q.thm[l1]),N1>2&&(m[k][l1].en.assign(Q.en[l1+2]),m[k][l1].thm.assign(Q.thm[l1+2]))}for(l1=0;l1<N1;l1++){var be,me,ae=U1(12),ve=[0,0,0,0],De=U1(12),pa=1,ja,Fa=U1(t1.CBANDS),qa=U1(t1.CBANDS),G1=[0,0,0,0],Za=U1(t1.HBLKSIZE),Ga=ue([3,t1.HBLKSIZE_s]);for(X1(Q.npart_s<=t1.CBANDS),X1(Q.npart_l<=t1.CBANDS),f1=0;f1<3;f1++)ae[f1]=Q.nsPsy.last_en_subshort[l1][f1+6],X1(Q.nsPsy.last_en_subshort[l1][f1+4]>0),De[f1]=ae[f1]/Q.nsPsy.last_en_subshort[l1][f1+4],ve[0]+=ae[f1];if(l1==2)for(f1=0;f1<576;f1++){var ba,ma;ba=O1[0][f1],ma=O1[1][f1],O1[0][f1]=ba+ma,O1[1][f1]=ba-ma}{var za=O1[l1&1],ze=0;for(f1=0;f1<9;f1++){for(var F0=ze+64,ee=1;ze<F0;ze++)ee<Math.abs(za[ze])&&(ee=Math.abs(za[ze]));Q.nsPsy.last_en_subshort[l1][f1]=ae[f1+3]=ee,ve[1+f1/3]+=ee,ee>ae[f1+3-2]?(X1(ae[f1+3-2]>0),ee=ee/ae[f1+3-2]):ae[f1+3-2]>ee*10?ee=ae[f1+3-2]/(ee*10):ee=0,De[f1+3]=ee}}if(o.analysis){var da=De[0];for(f1=1;f1<12;f1++)da<De[f1]&&(da=De[f1]);Q.pinfo.ers[k][l1]=Q.pinfo.ers_save[l1],Q.pinfo.ers_save[l1]=da}for(ja=l1==3?Q.nsPsy.attackthre_s:Q.nsPsy.attackthre,f1=0;f1<12;f1++)G1[f1/3]==0&&De[f1]>ja&&(G1[f1/3]=f1%3+1);for(f1=1;f1<4;f1++){var ga;ve[f1-1]>ve[f1]?(X1(ve[f1]>0),ga=ve[f1-1]/ve[f1]):(X1(ve[f1-1]>0),ga=ve[f1]/ve[f1-1]),ga<1.7&&(G1[f1]=0,f1==1&&(G1[0]=0))}for(G1[0]!=0&&Q.nsPsy.lastAttacks[l1]!=0&&(G1[0]=0),(Q.nsPsy.lastAttacks[l1]==3||G1[0]+G1[1]+G1[2]+G1[3]!=0)&&(pa=0,G1[1]!=0&&G1[0]!=0&&(G1[1]=0),G1[2]!=0&&G1[1]!=0&&(G1[2]=0),G1[3]!=0&&G1[2]!=0&&(G1[3]=0)),l1<2?w1[l1]=pa:pa==0&&(w1[0]=w1[1]=0),X[l1]=Q.tot_ener[l1],me=p1,be=e1,w(o,Za,Ga,be,l1&1,me,l1&1,k,l1,c,S),T(Q,Za,x1,Fa,qa),F(Q,Fa,qa,oe),D1=0;D1<3;D1++){var va,ne;for(r(o,Ga,o1,y1,l1,D1),z(Q,o1,y1,l1,D1),m1=0;m1<t1.SBMAX_s;m1++){if(ne=Q.thm[l1].s[m1][D1],ne*=d,G1[D1]>=2||G1[D1+1]==1){var Qe=D1!=0?D1-1:2,ee=a(Q.thm[l1].s[m1][Qe],ne,p*q1);ne=Math.min(ne,ee)}if(G1[D1]==1){var Qe=D1!=0?D1-1:2,ee=a(Q.thm[l1].s[m1][Qe],ne,H*q1);ne=Math.min(ne,ee)}else if(D1!=0&&G1[D1-1]==3||D1==0&&Q.nsPsy.lastAttacks[l1]==3){var Qe=D1!=2?D1+1:0,ee=a(Q.thm[l1].s[m1][Qe],ne,H*q1);ne=Math.min(ne,ee)}va=ae[D1*3+3]+ae[D1*3+4]+ae[D1*3+5],ae[D1*3+5]*6<va&&(ne*=.5,ae[D1*3+4]*6<va&&(ne*=.5)),Q.thm[l1].s[m1][D1]=ne}}for(Q.nsPsy.lastAttacks[l1]=G1[2],F1=0,R1=0;R1<Q.npart_l;R1++){for(var Ee=Q.s3ind[R1][0],Ma=x1[Ee]*y[oe[Ee]],ye=Q.s3_ll[F1++]*Ma;++Ee<=Q.s3ind[R1][1];)Ma=x1[Ee]*y[oe[Ee]],ye=b(ye,Q.s3_ll[F1++]*Ma,Ee,Ee-R1,Q);ye*=.158489319246111,Q.blocktype_old[l1&1]==t1.SHORT_TYPE?y1[R1]=ye:y1[R1]=a(Math.min(ye,Math.min(j*Q.nb_1[l1][R1],n1*Q.nb_2[l1][R1])),ye,q1),Q.nb_2[l1][R1]=Q.nb_1[l1][R1],Q.nb_1[l1][R1]=ye}for(;R1<=t1.CBANDS;++R1)x1[R1]=0,y1[R1]=0;R(Q,x1,y1,l1)}if((o.mode==M.STEREO||o.mode==M.JOINT_STEREO)&&o.interChRatio>0&&x(o,o.interChRatio),o.mode==M.JOINT_STEREO){var wa;L(Q),wa=o.msfix,Math.abs(wa)>0&&I(Q,wa,o.ATHlower*Q.ATH.adjust)}for(n(o,w1,a1,$),l1=0;l1<N1;l1++){var We,Ke=0,ta,sa;l1>1?(We=q,Ke=-2,ta=t1.NORM_TYPE,(a1[0]==t1.SHORT_TYPE||a1[1]==t1.SHORT_TYPE)&&(ta=t1.SHORT_TYPE),sa=m[k][l1-2]):(We=Y,Ke=0,ta=a1[l1],sa=O[k][l1]),ta==t1.SHORT_TYPE?We[Ke+l1]=u(sa,Q.masking_lower):We[Ke+l1]=U(sa,Q.masking_lower),o.analysis&&(Q.pinfo.pe[k][l1]=We[Ke+l1])}return 0};function h1(o,c,S,k,O,m,Y,q){var X=o.internal_flags;if(k<2)D.fft_long(X,Y[q],k,c,S);else if(k==2)for(var a1=t1.BLKSIZE-1;a1>=0;--a1){var Q=Y[q+0][a1],e1=Y[q+1][a1];Y[q+0][a1]=(Q+e1)*re.SQRT2*.5,Y[q+1][a1]=(Q-e1)*re.SQRT2*.5}m[0]=Y[q+0][0],m[0]*=m[0];for(var a1=t1.BLKSIZE/2-1;a1>=0;--a1){var p1=Y[q+0][t1.BLKSIZE/2-a1],x1=Y[q+0][t1.BLKSIZE/2+a1];m[t1.BLKSIZE/2-a1]=(p1*p1+x1*x1)*.5}{for(var o1=0,a1=11;a1<t1.HBLKSIZE;a1++)o1+=m[a1];X.tot_ener[k]=o1}if(o.analysis){for(var a1=0;a1<t1.HBLKSIZE;a1++)X.pinfo.energy[O][k][a1]=X.pinfo.energy_save[k][a1],X.pinfo.energy_save[k][a1]=m[a1];X.pinfo.pe[O][k]=X.pe[k]}}function g1(o,c,S,k,O,m,Y,q){var X=o.internal_flags;if(O==0&&k<2&&D.fft_short(X,Y[q],k,c,S),k==2)for(var a1=t1.BLKSIZE_s-1;a1>=0;--a1){var Q=Y[q+0][O][a1],e1=Y[q+1][O][a1];Y[q+0][O][a1]=(Q+e1)*re.SQRT2*.5,Y[q+1][O][a1]=(Q-e1)*re.SQRT2*.5}m[O][0]=Y[q+0][O][0],m[O][0]*=m[O][0];for(var a1=t1.BLKSIZE_s/2-1;a1>=0;--a1){var p1=Y[q+0][O][t1.BLKSIZE_s/2-a1],x1=Y[q+0][O][t1.BLKSIZE_s/2+a1];m[O][t1.BLKSIZE_s/2-a1]=(p1*p1+x1*x1)*.5}}function S1(o,c,S,k){var O=o.internal_flags;o.athaa_loudapprox==2&&S<2&&(O.loudness_sq[c][S]=O.loudness_sq_save[S],O.loudness_sq_save[S]=K(k,O))}var v1=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function M1(o,c,S,k,O,m,Y,q,X,a1){for(var Q=ue([2,576]),e1=o.internal_flags,p1=e1.channels_out,x1=o.mode==M.JOINT_STEREO?4:p1,o1=0;o1<p1;o1++){firbuf=c[o1];for(var y1=S+576-350-W+192,$=0;$<576;$++){var w1,N1;w1=firbuf[y1+$+10],N1=0;for(var l1=0;l1<(W-1)/2-1;l1+=2)w1+=v1[l1]*(firbuf[y1+$+l1]+firbuf[y1+$+W-l1]),N1+=v1[l1+1]*(firbuf[y1+$+l1+1]+firbuf[y1+$+W-l1-1]);Q[o1][$]=w1+N1}O[k][o1].en.assign(e1.en[o1]),O[k][o1].thm.assign(e1.thm[o1]),x1>2&&(m[k][o1].en.assign(e1.en[o1+2]),m[k][o1].thm.assign(e1.thm[o1+2]))}for(var o1=0;o1<x1;o1++){var R1=U1(12),f1=U1(12),I1=[0,0,0,0],F1=Q[o1&1],m1=0,D1=o1==3?e1.nsPsy.attackthre_s:e1.nsPsy.attackthre,O1=1;if(o1==2)for(var $=0,l1=576;l1>0;++$,--l1){var q1=Q[0][$],oe=Q[1][$];Q[0][$]=q1+oe,Q[1][$]=q1-oe}for(var $=0;$<3;$++)f1[$]=e1.nsPsy.last_en_subshort[o1][$+6],X1(e1.nsPsy.last_en_subshort[o1][$+4]>0),R1[$]=f1[$]/e1.nsPsy.last_en_subshort[o1][$+4],I1[0]+=f1[$];for(var $=0;$<9;$++){for(var J1=m1+64,Z1=1;m1<J1;m1++)Z1<Math.abs(F1[m1])&&(Z1=Math.abs(F1[m1]));e1.nsPsy.last_en_subshort[o1][$]=f1[$+3]=Z1,I1[1+$/3]+=Z1,Z1>f1[$+3-2]?(X1(f1[$+3-2]>0),Z1=Z1/f1[$+3-2]):f1[$+3-2]>Z1*10?Z1=f1[$+3-2]/(Z1*10):Z1=0,R1[$+3]=Z1}for(var $=0;$<3;++$){var se=f1[$*3+3]+f1[$*3+4]+f1[$*3+5],le=1;f1[$*3+5]*6<se&&(le*=.5,f1[$*3+4]*6<se&&(le*=.5)),q[o1][$]=le}if(o.analysis){for(var fe=R1[0],$=1;$<12;$++)fe<R1[$]&&(fe=R1[$]);e1.pinfo.ers[k][o1]=e1.pinfo.ers_save[o1],e1.pinfo.ers_save[o1]=fe}for(var $=0;$<12;$++)X[o1][$/3]==0&&R1[$]>D1&&(X[o1][$/3]=$%3+1);for(var $=1;$<4;$++){var be=I1[$-1],me=I1[$],ae=Math.max(be,me);ae<4e4&&be<1.7*me&&me<1.7*be&&($==1&&X[o1][0]<=X[o1][$]&&(X[o1][0]=0),X[o1][$]=0)}X[o1][0]<=e1.nsPsy.lastAttacks[o1]&&(X[o1][0]=0),(e1.nsPsy.lastAttacks[o1]==3||X[o1][0]+X[o1][1]+X[o1][2]+X[o1][3]!=0)&&(O1=0,X[o1][1]!=0&&X[o1][0]!=0&&(X[o1][1]=0),X[o1][2]!=0&&X[o1][1]!=0&&(X[o1][2]=0),X[o1][3]!=0&&X[o1][2]!=0&&(X[o1][3]=0)),o1<2?a1[o1]=O1:O1==0&&(a1[0]=a1[1]=0),Y[o1]=e1.tot_ener[o1]}}function T1(o,c,S){if(S==0)for(var k=0;k<o.npart_s;k++)o.nb_s2[c][k]=o.nb_s1[c][k],o.nb_s1[c][k]=0}function j1(o,c){for(var S=0;S<o.npart_l;S++)o.nb_2[c][S]=o.nb_1[c][S],o.nb_1[c][S]=0}function he(o,c,S,k){var O=y.length-1,m=0,Y=S[m]+S[m+1];if(Y>0){var q=c[m];q<c[m+1]&&(q=c[m+1]),X1(o.numlines_s[m]+o.numlines_s[m+1]-1>0),Y=20*(q*2-Y)/(Y*(o.numlines_s[m]+o.numlines_s[m+1]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;for(m=1;m<o.npart_s-1;m++)if(Y=S[m-1]+S[m]+S[m+1],X1(m+1<o.npart_s),Y>0){var q=c[m-1];q<c[m]&&(q=c[m]),q<c[m+1]&&(q=c[m+1]),X1(o.numlines_s[m-1]+o.numlines_s[m]+o.numlines_s[m+1]-1>0),Y=20*(q*3-Y)/(Y*(o.numlines_s[m-1]+o.numlines_s[m]+o.numlines_s[m+1]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;if(X1(m==o.npart_s-1),Y=S[m-1]+S[m],Y>0){var q=c[m-1];q<c[m]&&(q=c[m]),X1(o.numlines_s[m-1]+o.numlines_s[m]-1>0),Y=20*(q*2-Y)/(Y*(o.numlines_s[m-1]+o.numlines_s[m]-1));var X=0|Y;X>O&&(X=O),k[m]=X}else k[m]=0;X1(m==o.npart_s-1)}function s(o,c,S,k,O,m){var Y=o.internal_flags,q=new float[t1.CBANDS],X=U1(t1.CBANDS),a1,Q,e1,p1=new int[t1.CBANDS];for(e1=Q=0;e1<Y.npart_s;++e1){var x1=0,o1=0,y1=Y.numlines_s[e1];for(a1=0;a1<y1;++a1,++Q){var $=c[m][Q];x1+=$,o1<$&&(o1=$)}S[e1]=x1,q[e1]=o1,X[e1]=x1/y1,X1(X[e1]>=0)}for(X1(e1==Y.npart_s);e1<t1.CBANDS;++e1)q[e1]=0,X[e1]=0;for(he(Y,q,X,p1),Q=e1=0;e1<Y.npart_s;e1++){var w1=Y.s3ind_s[e1][0],N1=Y.s3ind_s[e1][1],l1,R1,f1,I1,F1;for(l1=p1[w1],R1=1,I1=Y.s3_ss[Q]*S[w1]*y[p1[w1]],++Q,++w1;w1<=N1;)l1+=p1[w1],R1+=1,f1=Y.s3_ss[Q]*S[w1]*y[p1[w1]],I1=g(I1,f1,w1-e1),++Q,++w1;l1=(1+2*l1)/(2*R1),F1=y[l1]*.5,I1*=F1,k[e1]=I1,Y.nb_s2[O][e1]=Y.nb_s1[O][e1],Y.nb_s1[O][e1]=I1,f1=q[e1],f1*=Y.minval_s[e1],f1*=F1,k[e1]>f1&&(k[e1]=f1),Y.masking_lower>1&&(k[e1]*=Y.masking_lower),k[e1]>S[e1]&&(k[e1]=S[e1]),Y.masking_lower<1&&(k[e1]*=Y.masking_lower),X1(k[e1]>=0)}for(;e1<t1.CBANDS;++e1)S[e1]=0,k[e1]=0}function i(o,c,S,k,O){var m=U1(t1.CBANDS),Y=U1(t1.CBANDS),q=xe(t1.CBANDS+2),X;T(o,c,S,m,Y),F(o,m,Y,q);var a1=0;for(X=0;X<o.npart_l;X++){var Q,e1,p1,x1,o1=o.s3ind[X][0],y1=o.s3ind[X][1],$=0,w1=0;for($=q[o1],w1+=1,e1=o.s3_ll[a1]*S[o1]*y[q[o1]],++a1,++o1;o1<=y1;)$+=q[o1],w1+=1,Q=o.s3_ll[a1]*S[o1]*y[q[o1]],x1=g(e1,Q,o1-X),e1=x1,++a1,++o1;if($=(1+2*$)/(2*w1),p1=y[$]*.5,e1*=p1,o.blocktype_old[O&1]==t1.SHORT_TYPE){var N1=j*o.nb_1[O][X];N1>0?k[X]=Math.min(e1,N1):k[X]=Math.min(e1,S[X]*H)}else{var l1=n1*o.nb_2[O][X],R1=j*o.nb_1[O][X],N1;l1<=0&&(l1=e1),R1<=0&&(R1=e1),o.blocktype_old[O&1]==t1.NORM_TYPE?N1=Math.min(R1,l1):N1=R1,k[X]=Math.min(e1,N1)}o.nb_2[O][X]=o.nb_1[O][X],o.nb_1[O][X]=e1,Q=m[X],Q*=o.minval_l[X],Q*=p1,k[X]>Q&&(k[X]=Q),o.masking_lower>1&&(k[X]*=o.masking_lower),k[X]>S[X]&&(k[X]=S[X]),o.masking_lower<1&&(k[X]*=o.masking_lower),X1(k[X]>=0)}for(;X<t1.CBANDS;++X)S[X]=0,k[X]=0}function d1(o,c){var S=o.internal_flags;o.short_blocks==Ne.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var k=0;k<S.channels_out;k++)o.short_blocks==Ne.short_block_dispensed&&(c[k]=1),o.short_blocks==Ne.short_block_forced&&(c[k]=0)}function A1(o,c,S){for(var k=o.internal_flags,O=0;O<k.channels_out;O++){var m=t1.NORM_TYPE;c[O]!=0?(X1(k.blocktype_old[O]!=t1.START_TYPE),k.blocktype_old[O]==t1.SHORT_TYPE&&(m=t1.STOP_TYPE)):(m=t1.SHORT_TYPE,k.blocktype_old[O]==t1.NORM_TYPE&&(k.blocktype_old[O]=t1.START_TYPE),k.blocktype_old[O]==t1.STOP_TYPE&&(k.blocktype_old[O]=t1.SHORT_TYPE)),S[O]=k.blocktype_old[O],k.blocktype_old[O]=m}}function V1(o,c,S,k,O,m,Y){for(var q=m*2,X=m>0?Math.pow(10,O):1,a1,Q,e1=0;e1<Y;++e1){var p1=o[2][e1],x1=o[3][e1],o1=c[0][e1],y1=c[1][e1],$=c[2][e1],w1=c[3][e1];if(o1<=1.58*y1&&y1<=1.58*o1){var N1=S[e1]*x1,l1=S[e1]*p1;Q=Math.max($,Math.min(w1,N1)),a1=Math.max(w1,Math.min($,l1))}else Q=$,a1=w1;if(m>0){var R1,f1,I1=k[e1]*X;if(R1=Math.min(Math.max(o1,I1),Math.max(y1,I1)),$=Math.max(Q,I1),w1=Math.max(a1,I1),f1=$+w1,f1>0&&R1*q<f1){var F1=R1*q/f1;$*=F1,w1*=F1}Q=Math.min($,Q),a1=Math.min(w1,a1)}Q>p1&&(Q=p1),a1>x1&&(a1=x1),c[2][e1]=Q,c[3][e1]=a1}}this.L3psycho_anal_vbr=function(o,c,S,k,O,m,Y,q,X,a1){var Q=o.internal_flags,e1,p1,x1=U1(t1.HBLKSIZE),o1=ue([3,t1.HBLKSIZE_s]),y1=ue([2,t1.BLKSIZE]),$=ue([2,3,t1.BLKSIZE_s]),w1=ue([4,t1.CBANDS]),N1=ue([4,t1.CBANDS]),l1=ue([4,3]),R1=.6,f1=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],I1=xe(2),F1=o.mode==M.JOINT_STEREO?4:Q.channels_out;M1(o,c,S,k,O,m,X,l1,f1,I1),d1(o,I1);{for(var m1=0;m1<F1;m1++){var D1=m1&1;e1=y1,h1(o,c,S,m1,k,x1,e1,D1),S1(o,k,m1,x1),I1[D1]!=0?i(Q,x1,w1[m1],N1[m1],m1):j1(Q,m1)}I1[0]+I1[1]==2&&o.mode==M.JOINT_STEREO&&V1(w1,N1,Q.mld_cb_l,Q.ATH.cb_l,o.ATHlower*Q.ATH.adjust,o.msfix,Q.npart_l);for(var m1=0;m1<F1;m1++){var D1=m1&1;I1[D1]!=0&&R(Q,w1[m1],N1[m1],m1)}}{for(var O1=0;O1<3;O1++){for(var m1=0;m1<F1;++m1){var D1=m1&1;I1[D1]!=0?T1(Q,m1,O1):(p1=$,g1(o,c,S,m1,O1,o1,p1,D1),s(o,o1,w1[m1],N1[m1],m1,O1))}I1[0]+I1[1]==0&&o.mode==M.JOINT_STEREO&&V1(w1,N1,Q.mld_cb_s,Q.ATH.cb_s,o.ATHlower*Q.ATH.adjust,o.msfix,Q.npart_s);for(var m1=0;m1<F1;++m1){var D1=m1&1;I1[D1]==0&&z(Q,w1[m1],N1[m1],m1,O1)}}for(var m1=0;m1<F1;m1++){var D1=m1&1;if(I1[D1]==0)for(var q1=0;q1<t1.SBMAX_s;q1++){for(var oe=U1(3),O1=0;O1<3;O1++){var J1=Q.thm[m1].s[q1][O1];if(J1*=d,f1[m1][O1]>=2||f1[m1][O1+1]==1){var Z1=O1!=0?O1-1:2,se=a(Q.thm[m1].s[q1][Z1],J1,p*R1);J1=Math.min(J1,se)}else if(f1[m1][O1]==1){var Z1=O1!=0?O1-1:2,se=a(Q.thm[m1].s[q1][Z1],J1,H*R1);J1=Math.min(J1,se)}else if(O1!=0&&f1[m1][O1-1]==3||O1==0&&Q.nsPsy.lastAttacks[m1]==3){var Z1=O1!=2?O1+1:0,se=a(Q.thm[m1].s[q1][Z1],J1,H*R1);J1=Math.min(J1,se)}J1*=l1[m1][O1],oe[O1]=J1}for(var O1=0;O1<3;O1++)Q.thm[m1].s[q1][O1]=oe[O1]}}}for(var m1=0;m1<F1;m1++)Q.nsPsy.lastAttacks[m1]=f1[m1][2];A1(o,I1,a1);for(var m1=0;m1<F1;m1++){var le,fe,be,me;m1>1?(le=q,fe=-2,be=t1.NORM_TYPE,(a1[0]==t1.SHORT_TYPE||a1[1]==t1.SHORT_TYPE)&&(be=t1.SHORT_TYPE),me=m[k][m1-2]):(le=Y,fe=0,be=a1[m1],me=O[k][m1]),be==t1.SHORT_TYPE?le[fe+m1]=u(me,Q.masking_lower):le[fe+m1]=U(me,Q.masking_lower),o.analysis&&(Q.pinfo.pe[k][m1]=le[fe+m1])}return 0};function E1(o,c){var S=o,k;return S>=0?k=-S*27:k=S*c,k<=-72?0:Math.exp(k*s1)}function k1(o){var c=0,S=0;{var k=0,O,m;for(k=0;E1(k,o)>1e-20;k-=1);for(O=k,m=0;Math.abs(m-O)>1e-12;)k=(m+O)/2,E1(k,o)>0?m=k:O=k;c=O}{var k=0,O,m;for(k=0;E1(k,o)>1e-20;k+=1);for(O=0,m=k;Math.abs(m-O)>1e-12;)k=(m+O)/2,E1(k,o)>0?O=k:m=k;S=m}{var Y=0,q=1e3,X;for(X=0;X<=q;++X){var k=c+X*(S-c)/q,a1=E1(k,o);Y+=a1}{var Q=(q+1)/(Y*(S-c));return Q}}}function B1(o){var c,S,k,O;return c=o,c>=0?c*=3:c*=1.5,c>=.5&&c<=2.5?(O=c-.5,S=8*(O*O-2*O)):S=0,c+=.474,k=15.811389+7.5*c-17.5*Math.sqrt(1+c*c),k<=-60?0:(c=Math.exp((S+k)*s1),c/=.6609193,c)}function L1(o){return o<0&&(o=0),o=o*.001,13*Math.atan(.76*o)+3.5*Math.atan(o*o/(7.5*7.5))}function P1(o,c,S,k,O,m,Y,q,X,a1,Q,e1){var p1=U1(t1.CBANDS+1),x1=q/(e1>15?2*576:2*192),o1=xe(t1.HBLKSIZE),y1;q/=X;var $=0,w1=0;for(y1=0;y1<t1.CBANDS;y1++){var N1,l1;for(N1=L1(q*$),p1[y1]=q*$,l1=$;L1(q*l1)-N1<V&&l1<=X/2;l1++);for(o[y1]=l1-$,w1=y1+1;$<l1;)X1($<t1.HBLKSIZE),o1[$++]=y1;if($>X/2){$=X/2,++y1;break}}X1(y1<t1.CBANDS),p1[y1]=q*$;for(var R1=0;R1<e1;R1++){var f1,I1,F1,m1,D1;F1=a1[R1],m1=a1[R1+1],f1=0|Math.floor(.5+Q*(F1-.5)),f1<0&&(f1=0),I1=0|Math.floor(.5+Q*(m1-.5)),I1>X/2&&(I1=X/2),S[R1]=(o1[f1]+o1[I1])/2,c[R1]=o1[I1];var O1=x1*m1;Y[R1]=(O1-p1[c[R1]])/(p1[c[R1]+1]-p1[c[R1]]),Y[R1]<0?Y[R1]=0:Y[R1]>1&&(Y[R1]=1),D1=L1(q*a1[R1]*Q),D1=Math.min(D1,15.5)/15.5,m[R1]=Math.pow(10,1.25*(1-Math.cos(Math.PI*D1))-2.5)}$=0;for(var q1=0;q1<w1;q1++){var oe=o[q1],N1,J1;N1=L1(q*$),J1=L1(q*($+oe-1)),k[q1]=.5*(N1+J1),N1=L1(q*($-.5)),J1=L1(q*($+oe-.5)),O[q1]=J1-N1,$+=oe}return w1}function b1(o,c,S,k,O,m){var Y=ue([t1.CBANDS,t1.CBANDS]),q,X=0;if(m)for(var a1=0;a1<c;a1++)for(q=0;q<c;q++){var Q=B1(S[a1]-S[q])*k[q];Y[a1][q]=Q*O[a1]}else for(q=0;q<c;q++)for(var e1=15+Math.min(21/S[q],12),p1=k1(e1),a1=0;a1<c;a1++){var Q=p1*E1(S[a1]-S[q],e1)*k[q];Y[a1][q]=Q*O[a1]}for(var a1=0;a1<c;a1++){for(q=0;q<c&&!(Y[a1][q]>0);q++);for(o[a1][0]=q,q=c-1;q>0&&!(Y[a1][q]>0);q--);o[a1][1]=q,X+=o[a1][1]-o[a1][0]+1}for(var x1=U1(X),o1=0,a1=0;a1<c;a1++)for(q=o[a1][0];q<=o[a1][1];q++)x1[o1++]=Y[a1][q];return x1}function C1(o){var c=L1(o);return c=Math.min(c,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*c))-2.5)}this.psymodel_init=function(o){var c=o.internal_flags,S,k=!0,O=13,m=24,Y=0,q=0,X=-8.25,a1=-4.5,Q=U1(t1.CBANDS),e1=U1(t1.CBANDS),p1=U1(t1.CBANDS),x1=o.out_samplerate;switch(o.experimentalZ){default:case 0:k=!0;break;case 1:k=!(o.VBR==Xe.vbr_mtrh||o.VBR==Xe.vbr_mt);break;case 2:k=!1;break;case 3:O=8,Y=-1.75,q=-.0125,X=-8.25,a1=-2.25;break}for(c.ms_ener_ratio_old=.25,c.blocktype_old[0]=c.blocktype_old[1]=t1.NORM_TYPE,S=0;S<4;++S){for(var $=0;$<t1.CBANDS;++$)c.nb_1[S][$]=1e20,c.nb_2[S][$]=1e20,c.nb_s1[S][$]=c.nb_s2[S][$]=1;for(var o1=0;o1<t1.SBMAX_l;o1++)c.en[S].l[o1]=1e20,c.thm[S].l[o1]=1e20;for(var $=0;$<3;++$){for(var o1=0;o1<t1.SBMAX_s;o1++)c.en[S].s[o1][$]=1e20,c.thm[S].s[o1][$]=1e20;c.nsPsy.lastAttacks[S]=0}for(var $=0;$<9;$++)c.nsPsy.last_en_subshort[S][$]=10}for(c.loudness_sq_save[0]=c.loudness_sq_save[1]=0,c.npart_l=P1(c.numlines_l,c.bo_l,c.bm_l,Q,e1,c.mld_l,c.PSY.bo_l_weight,x1,t1.BLKSIZE,c.scalefac_band.l,t1.BLKSIZE/(2*576),t1.SBMAX_l),X1(c.npart_l<t1.CBANDS),S=0;S<c.npart_l;S++){var y1=Y;Q[S]>=O&&(y1=q*(Q[S]-O)/(m-O)+Y*(m-Q[S])/(m-O)),p1[S]=Math.pow(10,y1/10),c.numlines_l[S]>0?c.rnumlines_l[S]=1/c.numlines_l[S]:c.rnumlines_l[S]=0}c.s3_ll=b1(c.s3ind,c.npart_l,Q,e1,p1,k);var $=0;for(S=0;S<c.npart_l;S++){var w1;w1=e0.MAX_VALUE;for(var N1=0;N1<c.numlines_l[S];N1++,$++){var l1=x1*$/(1e3*t1.BLKSIZE),R1;R1=this.ATHformula(l1*1e3,o)-20,R1=Math.pow(10,.1*R1),R1*=c.numlines_l[S],w1>R1&&(w1=R1)}c.ATH.cb_l[S]=w1,w1=-20+Q[S]*20/10,w1>6&&(w1=100),w1<-15&&(w1=-15),w1-=8,c.minval_l[S]=Math.pow(10,w1/10)*c.numlines_l[S]}for(c.npart_s=P1(c.numlines_s,c.bo_s,c.bm_s,Q,e1,c.mld_s,c.PSY.bo_s_weight,x1,t1.BLKSIZE_s,c.scalefac_band.s,t1.BLKSIZE_s/(2*192),t1.SBMAX_s),X1(c.npart_s<t1.CBANDS),$=0,S=0;S<c.npart_s;S++){var w1,y1=X;Q[S]>=O&&(y1=a1*(Q[S]-O)/(m-O)+X*(m-Q[S])/(m-O)),p1[S]=Math.pow(10,y1/10),w1=e0.MAX_VALUE;for(var N1=0;N1<c.numlines_s[S];N1++,$++){var l1=x1*$/(1e3*t1.BLKSIZE_s),R1;R1=this.ATHformula(l1*1e3,o)-20,R1=Math.pow(10,.1*R1),R1*=c.numlines_s[S],w1>R1&&(w1=R1)}c.ATH.cb_s[S]=w1,w1=-7+Q[S]*7/12,Q[S]>12&&(w1*=1+Math.log(1+w1)*3.1),Q[S]<12&&(w1*=1+Math.log(1-w1)*2.3),w1<-15&&(w1=-15),w1-=8,c.minval_s[S]=Math.pow(10,w1/10)*c.numlines_s[S]}c.s3_ss=b1(c.s3ind_s,c.npart_s,Q,e1,p1,k),N(),D.init_fft(c),c.decay=Math.exp(-1*P/(u1*x1/192));{var f1;f1=r1,o.exp_nspsytune&2&&(f1=1),Math.abs(o.msfix)>0&&(f1=o.msfix),o.msfix=f1;for(var I1=0;I1<c.npart_l;I1++)c.s3ind[I1][1]>c.npart_l-1&&(c.s3ind[I1][1]=c.npart_l-1)}var F1=576*c.mode_gr/x1;if(c.ATH.decay=Math.pow(10,-12/10*F1),c.ATH.adjust=.01,c.ATH.adjustLimit=1,X1(c.bo_l[t1.SBMAX_l-1]<=c.npart_l),X1(c.bo_s[t1.SBMAX_s-1]<=c.npart_s),o.ATHtype!=-1){var l1,m1=o.out_samplerate/t1.BLKSIZE,D1=0;for(l1=0,S=0;S<t1.BLKSIZE/2;++S)l1+=m1,c.ATH.eql_w[S]=1/Math.pow(10,this.ATHformula(l1,o)/10),D1+=c.ATH.eql_w[S];for(D1=1/D1,S=t1.BLKSIZE/2;--S>=0;)c.ATH.eql_w[S]*=D1}{for(var I1=$=0;I1<c.npart_s;++I1)for(S=0;S<c.numlines_s[I1];++S)++$;for(var I1=$=0;I1<c.npart_l;++I1)for(S=0;S<c.numlines_l[I1];++S)++$}for($=0,S=0;S<c.npart_l;S++){var l1=x1*($+c.numlines_l[S]/2)/(1*t1.BLKSIZE);c.mld_cb_l[S]=C1(l1),$+=c.numlines_l[S]}for(;S<t1.CBANDS;++S)c.mld_cb_l[S]=1;for($=0,S=0;S<c.npart_s;S++){var l1=x1*($+c.numlines_s[S]/2)/(1*t1.BLKSIZE_s);c.mld_cb_s[S]=C1(l1),$+=c.numlines_s[S]}for(;S<t1.CBANDS;++S)c.mld_cb_s[S]=1;return 0};function Q1(o,c){o<-.3&&(o=3410),o/=1e3,o=Math.max(.1,o);var S=3.64*Math.pow(o,-.8)-6.8*Math.exp(-.6*Math.pow(o-3.4,2))+6*Math.exp(-.15*Math.pow(o-8.7,2))+(.6+.04*c)*.001*Math.pow(o,4);return S}this.ATHformula=function(o,c){var S;switch(c.ATHtype){case 0:S=Q1(o,9);break;case 1:S=Q1(o,-1);break;case 2:S=Q1(o,0);break;case 3:S=Q1(o,1)+6;break;case 4:S=Q1(o,c.ATHcurve);break;default:S=Q1(o,0);break}return S}}var et=U0,at=aa;function tt(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=at.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var st=tt,nt=te(),P0={};P0.SFBMAX=nt.SBMAX_s*3;var ca=P0,I0=z1,rt=I0.new_float,Pe=I0.new_int,Ta=ca;function _t(){this.xr=rt(576),this.l3_enc=Pe(576),this.scalefac=Pe(Ta.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Pe(3),this.subblock_gain=Pe(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Pe(Ta.SFBMAX),this.window=Pe(Ta.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Pe(4),this.max_nonzero_coeff=0;var M=this;function D(j){return new Int32Array(j)}function P(j){return new Float32Array(j)}this.assign=function(j){M.xr=P(j.xr),M.l3_enc=D(j.l3_enc),M.scalefac=D(j.scalefac),M.xrpow_max=j.xrpow_max,M.part2_3_length=j.part2_3_length,M.big_values=j.big_values,M.count1=j.count1,M.global_gain=j.global_gain,M.scalefac_compress=j.scalefac_compress,M.block_type=j.block_type,M.mixed_block_flag=j.mixed_block_flag,M.table_select=D(j.table_select),M.subblock_gain=D(j.subblock_gain),M.region0_count=j.region0_count,M.region1_count=j.region1_count,M.preflag=j.preflag,M.scalefac_scale=j.scalefac_scale,M.count1table_select=j.count1table_select,M.part2_length=j.part2_length,M.sfb_lmax=j.sfb_lmax,M.sfb_smin=j.sfb_smin,M.psy_lmax=j.psy_lmax,M.sfbmax=j.sfbmax,M.psymax=j.psymax,M.sfbdivide=j.sfbdivide,M.width=D(j.width),M.window=D(j.window),M.count1bits=j.count1bits,M.sfb_partition_table=j.sfb_partition_table.slice(0),M.slen=D(j.slen),M.max_nonzero_coeff=j.max_nonzero_coeff}}var Xa=_t,it=z1,a0=it.new_int,ot=Xa;function lt(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[a0(4),a0(4)];for(var M=0;M<2;M++)for(var D=0;D<2;D++)this.tt[M][D]=new ot}var ft=lt,V0=z1,na=V0.System,ra=V0.new_int,_a=te();function ct(M,D,P,j){this.l=ra(1+_a.SBMAX_l),this.s=ra(1+_a.SBMAX_s),this.psfb21=ra(1+_a.PSFB21),this.psfb12=ra(1+_a.PSFB12);var n1=this.l,Z=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],na.arraycopy(this.arrL,0,n1,0,Math.min(this.arrL.length,this.l.length)),na.arraycopy(this.arrS,0,Z,0,Math.min(this.arrS.length,this.s.length)),na.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),na.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var L0=ct,Na=z1,ka=Na.new_float,ht=Na.new_float_n,ut=Na.new_int,t0=te();function pt(){this.last_en_subshort=ht([4,9]),this.lastAttacks=ut(4),this.pefirbuf=ka(19),this.longfact=ka(t0.SBMAX_l),this.shortfact=ka(t0.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var bt=pt;function mt(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var dt=mt,qe=z1,gt=qe.new_byte,vt=qe.new_double,pe=qe.new_float,Ie=qe.new_float_n,de=qe.new_int,ia=qe.new_int_n,Mt=ft,wt=L0,St=bt,At=dt,s0=y0(),W1=te(),Rt=ca;Se.MFSIZE=3*1152+W1.ENCDELAY-W1.MDCTDELAY;Se.MAX_HEADER_BUF=256;Se.MAX_BITS_PER_CHANNEL=4095;Se.MAX_BITS_PER_GRANULE=7680;Se.BPC=320;function Se(){var M=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ie([2,Se.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new Mt,this.ms_ratio=pe(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=de(2),this.CurrentStep=de(2),this.masking_lower=0,this.bv_scf=de(576),this.pseudohalf=de(Rt.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Se.BPC+1),this.itime=vt(2),this.sideinfo_len=0,this.sb_sample=Ie([2,2,18,W1.SBLIMIT]),this.amp_filter=pe(32);function D(){this.write_timing=0,this.ptr=0,this.buf=gt(M)}this.header=new Array(Se.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new wt,this.minval_l=pe(W1.CBANDS),this.minval_s=pe(W1.CBANDS),this.nb_1=Ie([4,W1.CBANDS]),this.nb_2=Ie([4,W1.CBANDS]),this.nb_s1=Ie([4,W1.CBANDS]),this.nb_s2=Ie([4,W1.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=pe(4),this.loudness_sq=Ie([2,2]),this.loudness_sq_save=pe(2),this.mld_l=pe(W1.SBMAX_l),this.mld_s=pe(W1.SBMAX_s),this.bm_l=de(W1.SBMAX_l),this.bo_l=de(W1.SBMAX_l),this.bm_s=de(W1.SBMAX_s),this.bo_s=de(W1.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=ia([W1.CBANDS,2]),this.s3ind_s=ia([W1.CBANDS,2]),this.numlines_s=de(W1.CBANDS),this.numlines_l=de(W1.CBANDS),this.rnumlines_l=pe(W1.CBANDS),this.mld_cb_l=pe(W1.CBANDS),this.mld_cb_s=pe(W1.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=pe(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=de(2),this.nsPsy=new St,this.VBR_seek_table=new At,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=ia([16,5]),this.bitrate_blockType_Hist=ia([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var P=0;P<this.en.length;P++)this.en[P]=new s0;for(var P=0;P<this.thm.length;P++)this.thm[P]=new s0;for(var P=0;P<this.header.length;P++)this.header[P]=new D}var ha=Se,Bt=z1,Ve=Bt.new_float,Le=te();function Tt(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Ve(Le.SBMAX_l),this.s=Ve(Le.SBMAX_s),this.psfb21=Ve(Le.PSFB21),this.psfb12=Ve(Le.PSFB12),this.cb_l=Ve(Le.CBANDS),this.cb_s=Ve(Le.CBANDS),this.eql_w=Ve(Le.BLKSIZE/2)}var kt=Tt,D0=z1,_e=D0.System,n0=D0.Arrays;K1.STEPS_per_dB=100;K1.MAX_dB=120;K1.GAIN_NOT_ENOUGH_SAMPLES=-24601;K1.GAIN_ANALYSIS_ERROR=0;K1.GAIN_ANALYSIS_OK=1;K1.INIT_GAIN_ANALYSIS_ERROR=0;K1.INIT_GAIN_ANALYSIS_OK=1;K1.YULE_ORDER=10;K1.MAX_ORDER=K1.YULE_ORDER;K1.MAX_SAMP_FREQ=48e3;K1.RMS_WINDOW_TIME_NUMERATOR=1;K1.RMS_WINDOW_TIME_DENOMINATOR=20;K1.MAX_SAMPLES_PER_WINDOW=K1.MAX_SAMP_FREQ*K1.RMS_WINDOW_TIME_NUMERATOR/K1.RMS_WINDOW_TIME_DENOMINATOR+1;function K1(){var M=64.82,D=.95,P=K1.RMS_WINDOW_TIME_NUMERATOR,j=K1.RMS_WINDOW_TIME_DENOMINATOR,n1=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],Z=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function G(p,H,r1,W,s1,K){for(;s1--!=0;)r1[W]=1e-10+p[H+0]*K[0]-r1[W-1]*K[1]+p[H-1]*K[2]-r1[W-2]*K[3]+p[H-2]*K[4]-r1[W-3]*K[5]+p[H-3]*K[6]-r1[W-4]*K[7]+p[H-4]*K[8]-r1[W-5]*K[9]+p[H-5]*K[10]-r1[W-6]*K[11]+p[H-6]*K[12]-r1[W-7]*K[13]+p[H-7]*K[14]-r1[W-8]*K[15]+p[H-8]*K[16]-r1[W-9]*K[17]+p[H-9]*K[18]-r1[W-10]*K[19]+p[H-10]*K[20],++W,++H}function V(p,H,r1,W,s1,K){for(;s1--!=0;)r1[W]=p[H+0]*K[0]-r1[W-1]*K[1]+p[H-1]*K[2]-r1[W-2]*K[3]+p[H-2]*K[4],++W,++H}function J(p,H){for(var r1=0;r1<MAX_ORDER;r1++)p.linprebuf[r1]=p.lstepbuf[r1]=p.loutbuf[r1]=p.rinprebuf[r1]=p.rstepbuf[r1]=p.routbuf[r1]=0;switch(0|H){case 48e3:p.reqindex=0;break;case 44100:p.reqindex=1;break;case 32e3:p.reqindex=2;break;case 24e3:p.reqindex=3;break;case 22050:p.reqindex=4;break;case 16e3:p.reqindex=5;break;case 12e3:p.reqindex=6;break;case 11025:p.reqindex=7;break;case 8e3:p.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return p.sampleWindow=0|(H*P+j-1)/j,p.lsum=0,p.rsum=0,p.totsamp=0,n0.ill(p.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(p,H){return J(p,H)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(p.linpre=MAX_ORDER,p.rinpre=MAX_ORDER,p.lstep=MAX_ORDER,p.rstep=MAX_ORDER,p.lout=MAX_ORDER,p.rout=MAX_ORDER,n0.fill(p.B,0),INIT_GAIN_ANALYSIS_OK)};function u1(p){return p*p}this.AnalyzeSamples=function(p,H,r1,W,s1,K,w){var f,h,v,e,l,A,y;if(K==0)return GAIN_ANALYSIS_OK;switch(y=0,l=K,w){case 1:W=H,s1=r1;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(K<MAX_ORDER?(_e.arraycopy(H,r1,p.linprebuf,MAX_ORDER,K),_e.arraycopy(W,s1,p.rinprebuf,MAX_ORDER,K)):(_e.arraycopy(H,r1,p.linprebuf,MAX_ORDER,MAX_ORDER),_e.arraycopy(W,s1,p.rinprebuf,MAX_ORDER,MAX_ORDER));l>0;){A=l>p.sampleWindow-p.totsamp?p.sampleWindow-p.totsamp:l,y<MAX_ORDER?(f=p.linpre+y,h=p.linprebuf,v=p.rinpre+y,e=p.rinprebuf,A>MAX_ORDER-y&&(A=MAX_ORDER-y)):(f=r1+y,h=H,v=s1+y,e=W),G(h,f,p.lstepbuf,p.lstep+p.totsamp,A,n1[p.reqindex]),G(e,v,p.rstepbuf,p.rstep+p.totsamp,A,n1[p.reqindex]),V(p.lstepbuf,p.lstep+p.totsamp,p.loutbuf,p.lout+p.totsamp,A,Z[p.reqindex]),V(p.rstepbuf,p.rstep+p.totsamp,p.routbuf,p.rout+p.totsamp,A,Z[p.reqindex]),f=p.lout+p.totsamp,h=p.loutbuf,v=p.rout+p.totsamp,e=p.routbuf;for(var N=A%8;N--!=0;)p.lsum+=u1(h[f++]),p.rsum+=u1(e[v++]);for(N=A/8;N--!=0;)p.lsum+=u1(h[f+0])+u1(h[f+1])+u1(h[f+2])+u1(h[f+3])+u1(h[f+4])+u1(h[f+5])+u1(h[f+6])+u1(h[f+7]),f+=8,p.rsum+=u1(e[v+0])+u1(e[v+1])+u1(e[v+2])+u1(e[v+3])+u1(e[v+4])+u1(e[v+5])+u1(e[v+6])+u1(e[v+7]),v+=8;if(l-=A,y+=A,p.totsamp+=A,p.totsamp==p.sampleWindow){var B=K1.STEPS_per_dB*10*Math.log10((p.lsum+p.rsum)/p.totsamp*.5+1e-37),E=B<=0?0:0|B;E>=p.A.length&&(E=p.A.length-1),p.A[E]++,p.lsum=p.rsum=0,_e.arraycopy(p.loutbuf,p.totsamp,p.loutbuf,0,MAX_ORDER),_e.arraycopy(p.routbuf,p.totsamp,p.routbuf,0,MAX_ORDER),_e.arraycopy(p.lstepbuf,p.totsamp,p.lstepbuf,0,MAX_ORDER),_e.arraycopy(p.rstepbuf,p.totsamp,p.rstepbuf,0,MAX_ORDER),p.totsamp=0}if(p.totsamp>p.sampleWindow)return GAIN_ANALYSIS_ERROR}return K<MAX_ORDER?(_e.arraycopy(p.linprebuf,K,p.linprebuf,0,MAX_ORDER-K),_e.arraycopy(p.rinprebuf,K,p.rinprebuf,0,MAX_ORDER-K),_e.arraycopy(H,r1,p.linprebuf,MAX_ORDER-K,K),_e.arraycopy(W,s1,p.rinprebuf,MAX_ORDER-K,K)):(_e.arraycopy(H,r1+K-MAX_ORDER,p.linprebuf,0,MAX_ORDER),_e.arraycopy(W,s1+K-MAX_ORDER,p.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(p,H){var r1,W=0;for(r1=0;r1<H;r1++)W+=p[r1];if(W==0)return GAIN_NOT_ENOUGH_SAMPLES;var s1=0|Math.ceil(W*(1-D));for(r1=H;r1-- >0&&!((s1-=p[r1])<=0););return M-r1/K1.STEPS_per_dB}this.GetTitleGain=function(p){for(var H=d(p.A,p.A.length),r1=0;r1<p.A.length;r1++)p.B[r1]+=p.A[r1],p.A[r1]=0;for(var r1=0;r1<MAX_ORDER;r1++)p.linprebuf[r1]=p.lstepbuf[r1]=p.loutbuf[r1]=p.rinprebuf[r1]=p.rstepbuf[r1]=p.routbuf[r1]=0;return p.totsamp=0,p.lsum=p.rsum=0,H}}var X0=K1,N0=z1,Oe=N0.new_float,r0=N0.new_int,ie=X0;function Et(){this.linprebuf=Oe(ie.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Oe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lstep=0,this.loutbuf=Oe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.lout=0,this.rinprebuf=Oe(ie.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Oe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rstep=0,this.routbuf=Oe(ie.MAX_SAMPLES_PER_WINDOW+ie.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=r0(0|ie.STEPS_per_dB*ie.MAX_dB),this.B=r0(0|ie.STEPS_per_dB*ie.MAX_dB)}var yt=Et;function xt(M){this.bits=M}var O0=xt,Oa=z1,_0=Oa.new_float,Pt=Oa.new_int,i0=Oa.assert,It=O0,o0=te(),Vt=ca,Lt=ha;function Dt(M){var D=M;this.quantize=D,this.iteration_loop=function(P,j,n1,Z){var G=P.internal_flags,V=_0(Vt.SFBMAX),J=_0(576),u1=Pt(2),d=0,p,H=G.l3_side,r1=new It(d);this.quantize.rv.ResvFrameBegin(P,r1),d=r1.bits;for(var W=0;W<G.mode_gr;W++){p=this.quantize.qupvt.on_pe(P,j,u1,d,W,W),G.mode_ext==o0.MPG_MD_MS_LR&&(this.quantize.ms_convert(G.l3_side,W),this.quantize.qupvt.reduce_side(u1,n1[W],d,p));for(var s1=0;s1<G.channels_out;s1++){var K,w,f=H.tt[W][s1];f.block_type!=o0.SHORT_TYPE?(K=0,w=G.PSY.mask_adjust-K):(K=0,w=G.PSY.mask_adjust_short-K),G.masking_lower=Math.pow(10,w*.1),this.quantize.init_outer_loop(G,f),this.quantize.init_xrpow(G,f,J)&&(this.quantize.qupvt.calc_xmin(P,Z[W][s1],f,V),this.quantize.outer_loop(P,f,V,J,s1,u1[s1])),this.quantize.iteration_finish_one(G,W,s1),i0(f.part2_3_length<=Lt.MAX_BITS_PER_CHANNEL),i0(f.part2_3_length<=u1[s1])}}this.quantize.rv.ResvFrameEnd(G,d)}}var Xt=Dt;function H1(M,D,P,j){this.xlen=M,this.linmax=D,this.table=P,this.hlen=j}var c1={};c1.t1HB=[1,1,1,0];c1.t2HB=[1,2,1,3,1,1,3,2,0];c1.t3HB=[3,2,1,1,1,1,3,2,0];c1.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];c1.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];c1.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];c1.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];c1.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];c1.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];c1.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];c1.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];c1.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];c1.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];c1.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];c1.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];c1.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];c1.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];c1.t1l=[1,4,3,5];c1.t2l=[1,4,7,4,5,7,6,7,8];c1.t3l=[2,3,7,4,4,7,6,7,8];c1.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];c1.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];c1.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];c1.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];c1.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];c1.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];c1.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];c1.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];c1.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];c1.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];c1.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];c1.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];c1.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];c1.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];c1.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];c1.ht=[new H1(0,0,null,null),new H1(2,0,c1.t1HB,c1.t1l),new H1(3,0,c1.t2HB,c1.t2l),new H1(3,0,c1.t3HB,c1.t3l),new H1(0,0,null,null),new H1(4,0,c1.t5HB,c1.t5l),new H1(4,0,c1.t6HB,c1.t6l),new H1(6,0,c1.t7HB,c1.t7l),new H1(6,0,c1.t8HB,c1.t8l),new H1(6,0,c1.t9HB,c1.t9l),new H1(8,0,c1.t10HB,c1.t10l),new H1(8,0,c1.t11HB,c1.t11l),new H1(8,0,c1.t12HB,c1.t12l),new H1(16,0,c1.t13HB,c1.t13l),new H1(0,0,null,c1.t16_5l),new H1(16,0,c1.t15HB,c1.t15l),new H1(1,1,c1.t16HB,c1.t16l),new H1(2,3,c1.t16HB,c1.t16l),new H1(3,7,c1.t16HB,c1.t16l),new H1(4,15,c1.t16HB,c1.t16l),new H1(6,63,c1.t16HB,c1.t16l),new H1(8,255,c1.t16HB,c1.t16l),new H1(10,1023,c1.t16HB,c1.t16l),new H1(13,8191,c1.t16HB,c1.t16l),new H1(4,15,c1.t24HB,c1.t24l),new H1(5,31,c1.t24HB,c1.t24l),new H1(6,63,c1.t24HB,c1.t24l),new H1(7,127,c1.t24HB,c1.t24l),new H1(8,255,c1.t24HB,c1.t24l),new H1(9,511,c1.t24HB,c1.t24l),new H1(11,2047,c1.t24HB,c1.t24l),new H1(13,8191,c1.t24HB,c1.t24l),new H1(0,0,c1.t32HB,c1.t32l),new H1(0,0,c1.t33HB,c1.t33l)];c1.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];c1.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];c1.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];c1.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];c1.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];c1.scfsi_band=[0,6,11,16,21];var Ha=c1,Ea,l0;function H0(){if(l0)return Ea;l0=1;var M=L0,D=z1,P=D.VbrMode,j=D.Float,n1=D.Util,Z=D.new_float,G=D.new_int,V=D.assert,J=te(),u1=O0,d=ha;p.Q_MAX=257,p.Q_MAX2=116,p.LARGE_BITS=1e5,p.IXMAX_VAL=8206;function p(){var H=Ya(),r1=null,W=null,s1=null;this.setModules=function(g,x,L){r1=g,W=x,s1=L};function K(g){return V(0<=g+p.Q_MAX2&&g<p.Q_MAX),y[g+p.Q_MAX2]}this.IPOW20=function(g){return V(0<=g&&g<p.Q_MAX),N[g]};var w=2220446049250313e-31,f=p.IXMAX_VAL,h=f+2,v=p.Q_MAX,e=p.Q_MAX2;p.LARGE_BITS;var l=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var A=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=A,this.sfBandIndex=[new M([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new M([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var y=Z(v+e+1),N=Z(v),B=Z(h),E=Z(h);this.adj43=E;function i1(g,x){var L=s1.ATHformula(x,g);return L-=l,L=Math.pow(10,L/10+g.ATHlower),L}function b(g){for(var x=g.internal_flags.ATH.l,L=g.internal_flags.ATH.psfb21,I=g.internal_flags.ATH.s,z=g.internal_flags.ATH.psfb12,R=g.internal_flags,r=g.out_samplerate,n=0;n<J.SBMAX_l;n++){var a=R.scalefac_band.l[n],_=R.scalefac_band.l[n+1];x[n]=j.MAX_VALUE;for(var u=a;u<_;u++){var C=u*r/1152,U=i1(g,C);x[n]=Math.min(x[n],U)}}for(var n=0;n<J.PSFB21;n++){var a=R.scalefac_band.psfb21[n],_=R.scalefac_band.psfb21[n+1];L[n]=j.MAX_VALUE;for(var u=a;u<_;u++){var C=u*r/1152,U=i1(g,C);L[n]=Math.min(L[n],U)}}for(var n=0;n<J.SBMAX_s;n++){var a=R.scalefac_band.s[n],_=R.scalefac_band.s[n+1];I[n]=j.MAX_VALUE;for(var u=a;u<_;u++){var C=u*r/384,U=i1(g,C);I[n]=Math.min(I[n],U)}I[n]*=R.scalefac_band.s[n+1]-R.scalefac_band.s[n]}for(var n=0;n<J.PSFB12;n++){var a=R.scalefac_band.psfb12[n],_=R.scalefac_band.psfb12[n+1];z[n]=j.MAX_VALUE;for(var u=a;u<_;u++){var C=u*r/384,U=i1(g,C);z[n]=Math.min(z[n],U)}z[n]*=R.scalefac_band.s[13]-R.scalefac_band.s[12]}if(g.noATH){for(var n=0;n<J.SBMAX_l;n++)x[n]=1e-20;for(var n=0;n<J.PSFB21;n++)L[n]=1e-20;for(var n=0;n<J.SBMAX_s;n++)I[n]=1e-20;for(var n=0;n<J.PSFB12;n++)z[n]=1e-20}R.ATH.floor=10*Math.log10(i1(g,-1))}this.iteration_init=function(g){var x=g.internal_flags,L=x.l3_side,I;if(x.iteration_init_init==0){for(x.iteration_init_init=1,L.main_data_begin=0,b(g),B[0]=0,I=1;I<h;I++)B[I]=Math.pow(I,4/3);for(I=0;I<h-1;I++)E[I]=I+1-Math.pow(.5*(B[I]+B[I+1]),.75);for(E[I]=.5,I=0;I<v;I++)N[I]=Math.pow(2,(I-210)*-.1875);for(I=0;I<=v+e;I++)y[I]=Math.pow(2,(I-210-e)*.25);r1.huffman_init(x);{var z,R,r,n;for(I=g.exp_nspsytune>>2&63,I>=32&&(I-=64),z=Math.pow(10,I/4/10),I=g.exp_nspsytune>>8&63,I>=32&&(I-=64),R=Math.pow(10,I/4/10),I=g.exp_nspsytune>>14&63,I>=32&&(I-=64),r=Math.pow(10,I/4/10),I=g.exp_nspsytune>>20&63,I>=32&&(I-=64),n=r*Math.pow(10,I/4/10),I=0;I<J.SBMAX_l;I++){var a;I<=6?a=z:I<=13?a=R:I<=20?a=r:a=n,x.nsPsy.longfact[I]=a}for(I=0;I<J.SBMAX_s;I++){var a;I<=5?a=z:I<=10?a=R:I<=11?a=r:a=n,x.nsPsy.shortfact[I]=a}}}},this.on_pe=function(g,x,L,I,z,R){var r=g.internal_flags,n=0,a,_=G(2),u,C=new u1(n),U=W.ResvMaxBits(g,I,C,R);n=C.bits;var T=n+U;for(T>d.MAX_BITS_PER_GRANULE&&(T=d.MAX_BITS_PER_GRANULE),a=0,u=0;u<r.channels_out;++u)L[u]=Math.min(d.MAX_BITS_PER_CHANNEL,n/r.channels_out),_[u]=0|L[u]*x[z][u]/700-L[u],_[u]>I*3/4&&(_[u]=I*3/4),_[u]<0&&(_[u]=0),_[u]+L[u]>d.MAX_BITS_PER_CHANNEL&&(_[u]=Math.max(0,d.MAX_BITS_PER_CHANNEL-L[u])),a+=_[u];if(a>U)for(u=0;u<r.channels_out;++u)_[u]=U*_[u]/a;for(u=0;u<r.channels_out;++u)L[u]+=_[u],U-=_[u];for(a=0,u=0;u<r.channels_out;++u)a+=L[u];if(a>d.MAX_BITS_PER_GRANULE){var F=0;for(u=0;u<r.channels_out;++u)L[u]*=d.MAX_BITS_PER_GRANULE,L[u]/=a,F+=L[u]}return T},this.reduce_side=function(g,x,L,I){V(g[0]+g[1]<=d.MAX_BITS_PER_GRANULE);var z=.33*(.5-x)/.5;z<0&&(z=0),z>.5&&(z=.5);var R=0|z*.5*(g[0]+g[1]);R>d.MAX_BITS_PER_CHANNEL-g[0]&&(R=d.MAX_BITS_PER_CHANNEL-g[0]),R<0&&(R=0),g[1]>=125&&(g[1]-R>125?(g[0]<L&&(g[0]+=R),g[1]-=R):(g[0]+=g[1]-125,g[1]=125)),R=g[0]+g[1],R>I&&(g[0]=I*g[0]/R,g[1]=I*g[1]/R),V(g[0]<=d.MAX_BITS_PER_CHANNEL),V(g[1]<=d.MAX_BITS_PER_CHANNEL),V(g[0]+g[1]<=d.MAX_BITS_PER_GRANULE)},this.athAdjust=function(g,x,L){var I=90.30873362,z=94.82444863,R=n1.FAST_LOG10_X(x,10),r=g*g,n=0;return R-=L,r>1e-20&&(n=1+n1.FAST_LOG10_X(r,10/I)),n<0&&(n=0),R*=n,R+=L+I-z,Math.pow(10,.1*R)},this.calc_xmin=function(g,x,L,I){var z=0,R=g.internal_flags,r,n=0,a=0,_=R.ATH,u=L.xr,C=g.VBR==P.vbr_mtrh?1:0,U=R.masking_lower;for((g.VBR==P.vbr_mtrh||g.VBR==P.vbr_mt)&&(U=1),r=0;r<L.psy_lmax;r++){var T,F,_1,h1,g1,S1;g.VBR==P.vbr_rh||g.VBR==P.vbr_mtrh?F=athAdjust(_.adjust,_.l[r],_.floor):F=_.adjust*_.l[r],g1=L.width[r],_1=F/g1,h1=w,S1=g1>>1,T=0;do{var v1,M1;v1=u[n]*u[n],T+=v1,h1+=v1<_1?v1:_1,n++,M1=u[n]*u[n],T+=M1,h1+=M1<_1?M1:_1,n++}while(--S1>0);if(T>F&&a++,r==J.SBPSY_l){var T1=F*R.nsPsy.longfact[r];h1<T1&&(h1=T1)}if(C!=0&&(F=h1),!g.ATHonly){var j1=x.en.l[r];if(j1>0){var T1;T1=T*x.thm.l[r]*U/j1,C!=0&&(T1*=R.nsPsy.longfact[r]),F<T1&&(F=T1)}}C!=0?I[z++]=F:I[z++]=F*R.nsPsy.longfact[r]}var he=575;if(L.block_type!=J.SHORT_TYPE)for(var s=576;s--!=0&&H.EQ(u[s],0);)he=s;L.max_nonzero_coeff=he;for(var i=L.sfb_smin;r<L.psymax;i++,r+=3){var g1,d1,A1;for(g.VBR==P.vbr_rh||g.VBR==P.vbr_mtrh?A1=athAdjust(_.adjust,_.s[i],_.floor):A1=_.adjust*_.s[i],g1=L.width[r],d1=0;d1<3;d1++){var T=0,F,_1,h1,S1=g1>>1;_1=A1/g1,h1=w;do{var v1,M1;v1=u[n]*u[n],T+=v1,h1+=v1<_1?v1:_1,n++,M1=u[n]*u[n],T+=M1,h1+=M1<_1?M1:_1,n++}while(--S1>0);if(T>A1&&a++,i==J.SBPSY_s){var T1=A1*R.nsPsy.shortfact[i];h1<T1&&(h1=T1)}if(C!=0?F=h1:F=A1,!g.ATHonly&&!g.ATHshort){var j1=x.en.s[i][d1];if(j1>0){var T1;T1=T*x.thm.s[i][d1]*U/j1,C!=0&&(T1*=R.nsPsy.shortfact[i]),F<T1&&(F=T1)}}C!=0?I[z++]=F:I[z++]=F*R.nsPsy.shortfact[i]}g.useTemporal&&(I[z-3]>I[z-3+1]&&(I[z-3+1]+=(I[z-3]-I[z-3+1])*R.decay),I[z-3+1]>I[z-3+2]&&(I[z-3+2]+=(I[z-3+1]-I[z-3+2])*R.decay))}return a};function t(g){this.s=g}this.calc_noise_core=function(g,x,L,I){var z=0,R=x.s,r=g.l3_enc;if(R>g.count1)for(;L--!=0;){var n;n=g.xr[R],R++,z+=n*n,n=g.xr[R],R++,z+=n*n}else if(R>g.big_values){var a=Z(2);for(a[0]=0,a[1]=I;L--!=0;){var n;n=Math.abs(g.xr[R])-a[r[R]],R++,z+=n*n,n=Math.abs(g.xr[R])-a[r[R]],R++,z+=n*n}}else for(;L--!=0;){var n;n=Math.abs(g.xr[R])-B[r[R]]*I,R++,z+=n*n,n=Math.abs(g.xr[R])-B[r[R]]*I,R++,z+=n*n}return x.s=R,z},this.calc_noise=function(g,x,L,I,z){var R=0,r=0,n,a,_=0,u=0,C=0,U=-20,T=0,F=g.scalefac,_1=0;for(I.over_SSD=0,n=0;n<g.psymax;n++){var h1=g.global_gain-(F[_1++]+(g.preflag!=0?A[n]:0)<<g.scalefac_scale+1)-g.subblock_gain[g.window[n]]*8,g1=0;if(z!=null&&z.step[n]==h1)g1=z.noise[n],T+=g.width[n],L[R++]=g1/x[r++],g1=z.noise_log[n];else{var S1=K(h1);if(a=g.width[n]>>1,T+g.width[n]>g.max_nonzero_coeff){var v1;v1=g.max_nonzero_coeff-T+1,v1>0?a=v1>>1:a=0}var M1=new t(T);g1=this.calc_noise_core(g,M1,a,S1),T=M1.s,z!=null&&(z.step[n]=h1,z.noise[n]=g1),g1=L[R++]=g1/x[r++],g1=n1.FAST_LOG10(Math.max(g1,1e-20)),z!=null&&(z.noise_log[n]=g1)}if(z!=null&&(z.global_gain=g.global_gain),C+=g1,g1>0){var T1;T1=Math.max(0|g1*10+.5,1),I.over_SSD+=T1*T1,_++,u+=g1}U=Math.max(U,g1)}return I.over_count=_,I.tot_noise=C,I.over_noise=u,I.max_noise=U,_},this.set_pinfo=function(g,x,L,I,z){var R=g.internal_flags,r,n,a,_,u,C=x.scalefac_scale==0?.5:1,U=x.scalefac,T=Z(L3Side.SFBMAX),F=Z(L3Side.SFBMAX),_1=new CalcNoiseResult;calc_xmin(g,L,x,T),calc_noise(x,T,F,_1,null);var h1=0;for(n=x.sfb_lmax,x.block_type!=J.SHORT_TYPE&&x.mixed_block_flag==0&&(n=22),r=0;r<n;r++){var g1=R.scalefac_band.l[r],S1=R.scalefac_band.l[r+1],v1=S1-g1;for(_=0;h1<S1;h1++)_+=x.xr[h1]*x.xr[h1];_/=v1,u=1e15,R.pinfo.en[I][z][r]=u*_,R.pinfo.xfsf[I][z][r]=u*T[r]*F[r]/v1,L.en.l[r]>0&&!g.ATHonly?_=_/L.en.l[r]:_=0,R.pinfo.thr[I][z][r]=u*Math.max(_*L.thm.l[r],R.ATH.l[r]),R.pinfo.LAMEsfb[I][z][r]=0,x.preflag!=0&&r>=11&&(R.pinfo.LAMEsfb[I][z][r]=-C*A[r]),r<J.SBPSY_l&&(V(U[r]>=0),R.pinfo.LAMEsfb[I][z][r]-=C*U[r])}if(x.block_type==J.SHORT_TYPE)for(n=r,r=x.sfb_smin;r<J.SBMAX_s;r++)for(var g1=R.scalefac_band.s[r],S1=R.scalefac_band.s[r+1],v1=S1-g1,M1=0;M1<3;M1++){for(_=0,a=g1;a<S1;a++)_+=x.xr[h1]*x.xr[h1],h1++;_=Math.max(_/v1,1e-20),u=1e15,R.pinfo.en_s[I][z][3*r+M1]=u*_,R.pinfo.xfsf_s[I][z][3*r+M1]=u*T[n]*F[n]/v1,L.en.s[r][M1]>0?_=_/L.en.s[r][M1]:_=0,(g.ATHonly||g.ATHshort)&&(_=0),R.pinfo.thr_s[I][z][3*r+M1]=u*Math.max(_*L.thm.s[r][M1],R.ATH.s[r]),R.pinfo.LAMEsfb_s[I][z][3*r+M1]=-2*x.subblock_gain[M1],r<J.SBPSY_s&&(R.pinfo.LAMEsfb_s[I][z][3*r+M1]-=C*U[n]),n++}R.pinfo.LAMEqss[I][z]=x.global_gain,R.pinfo.LAMEmainbits[I][z]=x.part2_3_length+x.part2_length,R.pinfo.LAMEsfbits[I][z]=x.part2_length,R.pinfo.over[I][z]=_1.over_count,R.pinfo.max_noise[I][z]=_1.max_noise*10,R.pinfo.over_noise[I][z]=_1.over_noise*10,R.pinfo.tot_noise[I][z]=_1.tot_noise*10,R.pinfo.over_SSD[I][z]=_1.over_SSD}}return Ea=p,Ea}var ya,f0;function Y0(){if(f0)return ya;f0=1;var M=z1,D=M.System,P=M.Arrays,j=M.new_int,n1=M.assert,Z=te(),G=Ha,V=Xa,J=H0();function u1(){var d=null;this.qupvt=null,this.setModules=function(R){this.qupvt=R,d=R};function p(R){this.bits=0|R}var H=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r1(R,r,n,a,_,u){var C=.5946/r;for(R=R>>1;R--!=0;)_[u++]=C>n[a++]?0:1,_[u++]=C>n[a++]?0:1}function W(R,r,n,a,_,u){R=R>>1;var C=R%2;for(R=R>>1;R--!=0;){var U,T,F,_1,h1,g1,S1,v1;U=n[a++]*r,T=n[a++]*r,h1=0|U,F=n[a++]*r,g1=0|T,_1=n[a++]*r,S1=0|F,U+=d.adj43[h1],v1=0|_1,T+=d.adj43[g1],_[u++]=0|U,F+=d.adj43[S1],_[u++]=0|T,_1+=d.adj43[v1],_[u++]=0|F,_[u++]=0|_1}if(C!=0){var U,T,h1,g1;U=n[a++]*r,T=n[a++]*r,h1=0|U,g1=0|T,U+=d.adj43[h1],T+=d.adj43[g1],_[u++]=0|U,_[u++]=0|T}}function s1(R,r,n,a,_){var u,C,U=0,T,F=0,_1=0,h1=0,g1=r,S1=0,v1=g1,M1=0,T1=R,j1=0;for(T=_!=null&&a.global_gain==_.global_gain,a.block_type==Z.SHORT_TYPE?C=38:C=21,u=0;u<=C;u++){var he=-1;if((T||a.block_type==Z.NORM_TYPE)&&(he=a.global_gain-(a.scalefac[u]+(a.preflag!=0?d.pretab[u]:0)<<a.scalefac_scale+1)-a.subblock_gain[a.window[u]]*8),n1(a.width[u]>=0),T&&_.step[u]==he)F!=0&&(W(F,n,T1,j1,v1,M1),F=0),_1!=0&&(r1(_1,n,T1,j1,v1,M1),_1=0);else{var s=a.width[u];if(U+a.width[u]>a.max_nonzero_coeff){var i;i=a.max_nonzero_coeff-U+1,P.fill(r,a.max_nonzero_coeff,576,0),s=i,s<0&&(s=0),u=C+1}if(F==0&&_1==0&&(v1=g1,M1=S1,T1=R,j1=h1),_!=null&&_.sfb_count1>0&&u>=_.sfb_count1&&_.step[u]>0&&he>=_.step[u]?(F!=0&&(W(F,n,T1,j1,v1,M1),F=0,v1=g1,M1=S1,T1=R,j1=h1),_1+=s):(_1!=0&&(r1(_1,n,T1,j1,v1,M1),_1=0,v1=g1,M1=S1,T1=R,j1=h1),F+=s),s<=0){_1!=0&&(r1(_1,n,T1,j1,v1,M1),_1=0),F!=0&&(W(F,n,T1,j1,v1,M1),F=0);break}}u<=C&&(S1+=a.width[u],h1+=a.width[u],U+=a.width[u])}F!=0&&(W(F,n,T1,j1,v1,M1),F=0),_1!=0&&(r1(_1,n,T1,j1,v1,M1),_1=0)}function K(R,r,n){var a=0,_=0;do{var u=R[r++],C=R[r++];a<u&&(a=u),_<C&&(_=C)}while(r<n);return a<_&&(a=_),a}function w(R,r,n,a,_,u){var C=G.ht[a].xlen*65536+G.ht[_].xlen,U=0,T;do{var F=R[r++],_1=R[r++];F!=0&&(F>14&&(F=15,U+=C),F*=16),_1!=0&&(_1>14&&(_1=15,U+=C),F+=_1),U+=G.largetbl[F]}while(r<n);return T=U&65535,U>>=16,U>T&&(U=T,a=_),u.bits+=U,a}function f(R,r,n,a){var _=0,u=G.ht[1].hlen;do{var C=R[r+0]*2+R[r+1];r+=2,_+=u[C]}while(r<n);return a.bits+=_,1}function h(R,r,n,a,_){var u=0,C,U=G.ht[a].xlen,T;a==2?T=G.table23:T=G.table56;do{var F=R[r+0]*U+R[r+1];r+=2,u+=T[F]}while(r<n);return C=u&65535,u>>=16,u>C&&(u=C,a++),_.bits+=u,a}function v(R,r,n,a,_){var u=0,C=0,U=0,T=G.ht[a].xlen,F=G.ht[a].hlen,_1=G.ht[a+1].hlen,h1=G.ht[a+2].hlen;do{var g1=R[r+0]*T+R[r+1];r+=2,u+=F[g1],C+=_1[g1],U+=h1[g1]}while(r<n);var S1=a;return u>C&&(u=C,S1++),u>U&&(u=U,S1=a+2),_.bits+=u,S1}var e=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function l(R,r,n,a){var _=K(R,r,n);switch(_){case 0:return _;case 1:return f(R,r,n,a);case 2:case 3:return h(R,r,n,e[_-1],a);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return v(R,r,n,e[_-1],a);default:if(_>J.IXMAX_VAL)return a.bits=J.LARGE_BITS,-1;_-=15;var u;for(u=24;u<32&&!(G.ht[u].linmax>=_);u++);var C;for(C=u-8;C<24&&!(G.ht[C].linmax>=_);C++);return w(R,r,n,C,u,a)}}this.noquant_count_bits=function(R,r,n){var a=r.l3_enc,_=Math.min(576,r.max_nonzero_coeff+2>>1<<1);for(n!=null&&(n.sfb_count1=0);_>1&&!(a[_-1]|a[_-2]);_-=2);r.count1=_;for(var u=0,C=0;_>3;_-=4){var U;if(((a[_-1]|a[_-2]|a[_-3]|a[_-4])&2147483647)>1)break;U=((a[_-4]*2+a[_-3])*2+a[_-2])*2+a[_-1],u+=G.t32l[U],C+=G.t33l[U]}var T=u;if(r.count1table_select=0,u>C&&(T=C,r.count1table_select=1),r.count1bits=T,r.big_values=_,_==0)return T;if(r.block_type==Z.SHORT_TYPE)u=3*R.scalefac_band.s[3],u>r.big_values&&(u=r.big_values),C=r.big_values;else if(r.block_type==Z.NORM_TYPE){if(u=r.region0_count=R.bv_scf[_-2],C=r.region1_count=R.bv_scf[_-1],n1(u+C+2<Z.SBPSY_l),C=R.scalefac_band.l[u+C+2],u=R.scalefac_band.l[u+1],C<_){var F=new p(T);r.table_select[2]=l(a,C,_,F),T=F.bits}}else r.region0_count=7,r.region1_count=Z.SBMAX_l-1-7-1,u=R.scalefac_band.l[8],C=_,u>C&&(u=C);if(u=Math.min(u,_),C=Math.min(C,_),0<u){var F=new p(T);r.table_select[0]=l(a,0,u,F),T=F.bits}if(u<C){var F=new p(T);r.table_select[1]=l(a,u,C,F),T=F.bits}if(R.use_best_huffman==2&&(r.part2_3_length=T,best_huffman_divide(R,r),T=r.part2_3_length),n!=null&&r.block_type==Z.NORM_TYPE){for(var _1=0;R.scalefac_band.l[_1]<r.big_values;)_1++;n.sfb_count1=_1}return T},this.count_bits=function(R,r,n,a){var _=n.l3_enc,u=J.IXMAX_VAL/d.IPOW20(n.global_gain);if(n.xrpow_max>u)return J.LARGE_BITS;if(s1(r,_,d.IPOW20(n.global_gain),n,a),R.substep_shaping&2)for(var C=0,U=n.global_gain+n.scalefac_scale,T=.634521682242439/d.IPOW20(U),F=0;F<n.sfbmax;F++){var _1=n.width[F];if(R.pseudohalf[F]==0)C+=_1;else{var h1;for(h1=C,C+=_1;h1<C;++h1)_[h1]=r[h1]>=T?_[h1]:0}}return this.noquant_count_bits(R,n,a)};function A(R,r,n,a,_,u,C){for(var U=r.big_values,T=0;T<=22;T++)a[T]=J.LARGE_BITS;for(var T=0;T<16;T++){var F=R.scalefac_band.l[T+1];if(F>=U)break;var _1=0,h1=new p(_1),g1=l(n,0,F,h1);_1=h1.bits;for(var S1=0;S1<8;S1++){var v1=R.scalefac_band.l[T+S1+2];if(v1>=U)break;var M1=_1;h1=new p(M1);var T1=l(n,F,v1,h1);M1=h1.bits,a[T+S1]>M1&&(a[T+S1]=M1,_[T+S1]=T,u[T+S1]=g1,C[T+S1]=T1)}}}function y(R,r,n,a,_,u,C,U){for(var T=r.big_values,F=2;F<Z.SBMAX_l+1;F++){var _1=R.scalefac_band.l[F];if(_1>=T)break;var h1=_[F-2]+r.count1bits;if(n.part2_3_length<=h1)break;var g1=new p(h1),S1=l(a,_1,T,g1);h1=g1.bits,!(n.part2_3_length<=h1)&&(n.assign(r),n.part2_3_length=h1,n.region0_count=u[F-2],n.region1_count=F-2-u[F-2],n.table_select[0]=C[F-2],n.table_select[1]=U[F-2],n.table_select[2]=S1)}}this.best_huffman_divide=function(R,r){var n=new V,a=r.l3_enc,_=j(23),u=j(23),C=j(23),U=j(23);if(!(r.block_type==Z.SHORT_TYPE&&R.mode_gr==1)){n.assign(r),r.block_type==Z.NORM_TYPE&&(A(R,r,a,_,u,C,U),y(R,n,r,a,_,u,C,U));var T=n.big_values;if(!(T==0||(a[T-2]|a[T-1])>1)&&(T=r.count1+2,!(T>576))){n.assign(r),n.count1=T;for(var F=0,_1=0;T>n.big_values;T-=4){var h1=((a[T-4]*2+a[T-3])*2+a[T-2])*2+a[T-1];F+=G.t32l[h1],_1+=G.t33l[h1]}if(n.big_values=T,n.count1table_select=0,F>_1&&(F=_1,n.count1table_select=1),n.count1bits=F,n.block_type==Z.NORM_TYPE)y(R,n,r,a,_,u,C,U);else{if(n.part2_3_length=F,F=R.scalefac_band.l[8],F>T&&(F=T),F>0){var g1=new p(n.part2_3_length);n.table_select[0]=l(a,0,F,g1),n.part2_3_length=g1.bits}if(T>F){var g1=new p(n.part2_3_length);n.table_select[1]=l(a,F,T,g1),n.part2_3_length=g1.bits}r.part2_3_length>n.part2_3_length&&r.assign(n)}}}};var N=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],B=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],E=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],i1=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];u1.slen1_tab=E,u1.slen2_tab=i1;function b(R,r){for(var n,a=r.tt[1][R],_=r.tt[0][R],u=0;u<G.scfsi_band.length-1;u++){for(n=G.scfsi_band[u];n<G.scfsi_band[u+1]&&!(_.scalefac[n]!=a.scalefac[n]&&a.scalefac[n]>=0);n++);if(n==G.scfsi_band[u+1]){for(n=G.scfsi_band[u];n<G.scfsi_band[u+1];n++)a.scalefac[n]=-1;r.scfsi[R][u]=1}}var C=0,U=0;for(n=0;n<11;n++)a.scalefac[n]!=-1&&(U++,C<a.scalefac[n]&&(C=a.scalefac[n]));for(var T=0,F=0;n<Z.SBPSY_l;n++)a.scalefac[n]!=-1&&(F++,T<a.scalefac[n]&&(T=a.scalefac[n]));for(var u=0;u<16;u++)if(C<N[u]&&T<B[u]){var _1=E[u]*U+i1[u]*F;a.part2_length>_1&&(a.part2_length=_1,a.scalefac_compress=u)}}this.best_scalefac_store=function(R,r,n,a){var _=a.tt[r][n],u,C,U,T,F=0;for(U=0,u=0;u<_.sfbmax;u++){var _1=_.width[u];for(U+=_1,T=-_1;T<0&&_.l3_enc[T+U]==0;T++);T==0&&(_.scalefac[u]=F=-2)}if(_.scalefac_scale==0&&_.preflag==0){var h1=0;for(u=0;u<_.sfbmax;u++)_.scalefac[u]>0&&(h1|=_.scalefac[u]);if(!(h1&1)&&h1!=0){for(u=0;u<_.sfbmax;u++)_.scalefac[u]>0&&(_.scalefac[u]>>=1);_.scalefac_scale=F=1}}if(_.preflag==0&&_.block_type!=Z.SHORT_TYPE&&R.mode_gr==2){for(u=11;u<Z.SBPSY_l&&!(_.scalefac[u]<d.pretab[u]&&_.scalefac[u]!=-2);u++);if(u==Z.SBPSY_l){for(u=11;u<Z.SBPSY_l;u++)_.scalefac[u]>0&&(_.scalefac[u]-=d.pretab[u]);_.preflag=F=1}}for(C=0;C<4;C++)a.scfsi[n][C]=0;for(R.mode_gr==2&&r==1&&a.tt[0][n].block_type!=Z.SHORT_TYPE&&a.tt[1][n].block_type!=Z.SHORT_TYPE&&(b(n,a),F=0),u=0;u<_.sfbmax;u++)_.scalefac[u]==-2&&(_.scalefac[u]=0);F!=0&&(R.mode_gr==2?this.scale_bitcount(_):this.scale_bitcount_lsf(R,_))};function t(R,r){for(var n=0;n<r;++n)if(R[n]<0)return!1;return!0}var g=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],x=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],L=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(R){var r,n,a=0,_=0,u,C=R.scalefac;if(n1(t(C,R.sfbmax)),R.block_type==Z.SHORT_TYPE)u=g,R.mixed_block_flag!=0&&(u=x);else if(u=L,R.preflag==0){for(n=11;n<Z.SBPSY_l&&!(C[n]<d.pretab[n]);n++);if(n==Z.SBPSY_l)for(R.preflag=1,n=11;n<Z.SBPSY_l;n++)C[n]-=d.pretab[n]}for(n=0;n<R.sfbdivide;n++)a<C[n]&&(a=C[n]);for(;n<R.sfbmax;n++)_<C[n]&&(_=C[n]);for(R.part2_length=J.LARGE_BITS,r=0;r<16;r++)a<N[r]&&_<B[r]&&R.part2_length>u[r]&&(R.part2_length=u[r],R.scalefac_compress=r);return R.part2_length==J.LARGE_BITS};var I=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(R,r){var n,a,_,u,C,U,T,F,_1=j(4),h1=r.scalefac;for(r.preflag!=0?n=2:n=0,T=0;T<4;T++)_1[T]=0;if(r.block_type==Z.SHORT_TYPE){a=1;var g1=d.nr_of_sfb_block[n][a];for(F=0,_=0;_<4;_++)for(u=g1[_]/3,T=0;T<u;T++,F++)for(C=0;C<3;C++)h1[F*3+C]>_1[_]&&(_1[_]=h1[F*3+C])}else{a=0;var g1=d.nr_of_sfb_block[n][a];for(F=0,_=0;_<4;_++)for(u=g1[_],T=0;T<u;T++,F++)h1[F]>_1[_]&&(_1[_]=h1[F])}for(U=!1,_=0;_<4;_++)_1[_]>I[n][_]&&(U=!0);if(!U){var S1,v1,M1,T1;for(r.sfb_partition_table=d.nr_of_sfb_block[n][a],_=0;_<4;_++)r.slen[_]=z[_1[_]];switch(S1=r.slen[0],v1=r.slen[1],M1=r.slen[2],T1=r.slen[3],n){case 0:r.scalefac_compress=(S1*5+v1<<4)+(M1<<2)+T1;break;case 1:r.scalefac_compress=400+(S1*5+v1<<2)+M1;break;case 2:r.scalefac_compress=500+S1*3+v1;break;default:D.err.printf(`intensity stereo not implemented yet
`);break}}if(!U)for(n1(r.sfb_partition_table!=null),r.part2_length=0,_=0;_<4;_++)r.part2_length+=r.slen[_]*r.sfb_partition_table[_];return U};var z=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(R){for(var r=2;r<=576;r+=2){for(var n=0,a;R.scalefac_band.l[++n]<r;);for(a=H[n][0];R.scalefac_band.l[a+1]>r;)a--;for(a<0&&(a=H[n][0]),R.bv_scf[r-2]=a,a=H[n][1];R.scalefac_band.l[a+R.bv_scf[r-2]+2]>r;)a--;a<0&&(a=H[n][1]),R.bv_scf[r-1]=a}}}return ya=u1,ya}var xa,c0;function Ya(){if(c0)return xa;c0=1;var M=z1,D=M.System,P=M.Arrays,j=M.new_byte,n1=M.new_float_n,Z=M.new_int,G=M.assert,V=Y0(),J=Ha,u1=te(),d=ha;p.EQ=function(H,r1){return Math.abs(H)>Math.abs(r1)?Math.abs(H-r1)<=Math.abs(H)*1e-6:Math.abs(H-r1)<=Math.abs(r1)*1e-6},p.NEQ=function(H,r1){return!p.EQ(H,r1)};function p(){var H=Ca(),r1=this,W=32773,s1=null,K=null,w=null,f=null;this.setModules=function(r,n,a,_){s1=r,K=n,w=a,f=_};var h=null,v=0,e=0,l=0;this.getframebits=function(r){var n=r.internal_flags,a;n.bitrate_index!=0?a=J.bitrate_table[r.version][n.bitrate_index]:a=r.brate;var _=0|(r.version+1)*72e3*a/r.out_samplerate+n.padding;return 8*_};function A(r){D.arraycopy(r.header[r.w_ptr].buf,0,h,e,r.sideinfo_len),e+=r.sideinfo_len,v+=r.sideinfo_len*8,r.w_ptr=r.w_ptr+1&d.MAX_HEADER_BUF-1}function y(r,n,a){for(;a>0;){var _;l==0&&(l=8,e++,G(e<H.LAME_MAXMP3BUFFER),G(r.header[r.w_ptr].write_timing>=v),r.header[r.w_ptr].write_timing==v&&A(r),h[e]=0),_=Math.min(a,l),a-=_,l-=_,h[e]|=n>>a<<l,v+=_}}function N(r,n,a){for(;a>0;){var _;l==0&&(l=8,e++,G(e<H.LAME_MAXMP3BUFFER),h[e]=0),_=Math.min(a,l),a-=_,l-=_,h[e]|=n>>a<<l,v+=_}}function B(r,n){var a=r.internal_flags,_;if(n>=8&&(y(a,76,8),n-=8),n>=8&&(y(a,65,8),n-=8),n>=8&&(y(a,77,8),n-=8),n>=8&&(y(a,69,8),n-=8),n>=32){var u=w.getLameShortVersion();if(n>=32)for(_=0;_<u.length&&n>=8;++_)n-=8,y(a,u.charAt(_),8)}for(;n>=1;n-=1)y(a,a.ancillary_flag,1),a.ancillary_flag^=r.disable_reservoir?0:1}function E(r,n,a){for(var _=r.header[r.h_ptr].ptr;a>0;){var u=Math.min(a,8-(_&7));a-=u,r.header[r.h_ptr].buf[_>>3]|=n>>a<<8-(_&7)-u,_+=u}r.header[r.h_ptr].ptr=_}function i1(r,n){r<<=8;for(var a=0;a<8;a++)r<<=1,n<<=1,(n^r)&65536&&(n^=W);return n}this.CRC_writeheader=function(r,n){var a=65535;a=i1(n[2]&255,a),a=i1(n[3]&255,a);for(var _=6;_<r.sideinfo_len;_++)a=i1(n[_]&255,a);n[4]=byte(a>>8),n[5]=byte(a&255)};function b(r,n){var a=r.internal_flags,_,u,C;if(_=a.l3_side,a.header[a.h_ptr].ptr=0,P.fill(a.header[a.h_ptr].buf,0,a.sideinfo_len,0),r.out_samplerate<16e3?E(a,4094,12):E(a,4095,12),E(a,r.version,1),E(a,1,2),E(a,r.error_protection?0:1,1),E(a,a.bitrate_index,4),E(a,a.samplerate_index,2),E(a,a.padding,1),E(a,r.extension,1),E(a,r.mode.ordinal(),2),E(a,a.mode_ext,2),E(a,r.copyright,1),E(a,r.original,1),E(a,r.emphasis,2),r.error_protection&&E(a,0,16),r.version==1){for(G(_.main_data_begin>=0),E(a,_.main_data_begin,9),a.channels_out==2?E(a,_.private_bits,3):E(a,_.private_bits,5),C=0;C<a.channels_out;C++){var U;for(U=0;U<4;U++)E(a,_.scfsi[C][U],1)}for(u=0;u<2;u++)for(C=0;C<a.channels_out;C++){var T=_.tt[u][C];E(a,T.part2_3_length+T.part2_length,12),E(a,T.big_values/2,9),E(a,T.global_gain,8),E(a,T.scalefac_compress,4),T.block_type!=u1.NORM_TYPE?(E(a,1,1),E(a,T.block_type,2),E(a,T.mixed_block_flag,1),T.table_select[0]==14&&(T.table_select[0]=16),E(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),E(a,T.table_select[1],5),E(a,T.subblock_gain[0],3),E(a,T.subblock_gain[1],3),E(a,T.subblock_gain[2],3)):(E(a,0,1),T.table_select[0]==14&&(T.table_select[0]=16),E(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),E(a,T.table_select[1],5),T.table_select[2]==14&&(T.table_select[2]=16),E(a,T.table_select[2],5),G(0<=T.region0_count&&T.region0_count<16),G(0<=T.region1_count&&T.region1_count<8),E(a,T.region0_count,4),E(a,T.region1_count,3)),E(a,T.preflag,1),E(a,T.scalefac_scale,1),E(a,T.count1table_select,1)}}else for(G(_.main_data_begin>=0),E(a,_.main_data_begin,8),E(a,_.private_bits,a.channels_out),u=0,C=0;C<a.channels_out;C++){var T=_.tt[u][C];E(a,T.part2_3_length+T.part2_length,12),E(a,T.big_values/2,9),E(a,T.global_gain,8),E(a,T.scalefac_compress,9),T.block_type!=u1.NORM_TYPE?(E(a,1,1),E(a,T.block_type,2),E(a,T.mixed_block_flag,1),T.table_select[0]==14&&(T.table_select[0]=16),E(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),E(a,T.table_select[1],5),E(a,T.subblock_gain[0],3),E(a,T.subblock_gain[1],3),E(a,T.subblock_gain[2],3)):(E(a,0,1),T.table_select[0]==14&&(T.table_select[0]=16),E(a,T.table_select[0],5),T.table_select[1]==14&&(T.table_select[1]=16),E(a,T.table_select[1],5),T.table_select[2]==14&&(T.table_select[2]=16),E(a,T.table_select[2],5),G(0<=T.region0_count&&T.region0_count<16),G(0<=T.region1_count&&T.region1_count<8),E(a,T.region0_count,4),E(a,T.region1_count,3)),E(a,T.scalefac_scale,1),E(a,T.count1table_select,1)}r.error_protection&&CRC_writeheader(a,a.header[a.h_ptr].buf);{var F=a.h_ptr;G(a.header[F].ptr==a.sideinfo_len*8),a.h_ptr=F+1&d.MAX_HEADER_BUF-1,a.header[a.h_ptr].write_timing=a.header[F].write_timing+n,a.h_ptr==a.w_ptr&&D.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function t(r,n){var a=J.ht[n.count1table_select+32],_,u=0,C=n.big_values,U=n.big_values;for(G(n.count1table_select<2),_=(n.count1-n.big_values)/4;_>0;--_){var T=0,F=0,_1;_1=n.l3_enc[C+0],_1!=0&&(F+=8,n.xr[U+0]<0&&T++),_1=n.l3_enc[C+1],_1!=0&&(F+=4,T*=2,n.xr[U+1]<0&&T++),_1=n.l3_enc[C+2],_1!=0&&(F+=2,T*=2,n.xr[U+2]<0&&T++),_1=n.l3_enc[C+3],_1!=0&&(F++,T*=2,n.xr[U+3]<0&&T++),C+=4,U+=4,y(r,T+a.table[F],a.hlen[F]),u+=a.hlen[F]}return u}function g(r,n,a,_,u){var C=J.ht[n],U=0;if(n==0)return U;for(var T=a;T<_;T+=2){var F=0,_1=0,h1=C.xlen,g1=C.xlen,S1=0,v1=u.l3_enc[T],M1=u.l3_enc[T+1];if(v1!=0&&(u.xr[T]<0&&S1++,F--),n>15){if(v1>14){var T1=v1-15;G(T1<=C.linmax),S1|=T1<<1,_1=h1,v1=15}if(M1>14){var j1=M1-15;G(j1<=C.linmax),S1<<=h1,S1|=j1,_1+=h1,M1=15}g1=16}M1!=0&&(S1<<=1,u.xr[T+1]<0&&S1++,F--),v1=v1*g1+M1,_1-=F,F+=C.hlen[v1],y(r,C.table[v1],F),y(r,S1,_1),U+=F+_1}return U}function x(r,n){var a=3*r.scalefac_band.s[3];a>n.big_values&&(a=n.big_values);var _=g(r,n.table_select[0],0,a,n);return _+=g(r,n.table_select[1],a,n.big_values,n),_}function L(r,n){var a,_,u,C;a=n.big_values;var U=n.region0_count+1;return G(U<r.scalefac_band.l.length),u=r.scalefac_band.l[U],U+=n.region1_count+1,G(U<r.scalefac_band.l.length),C=r.scalefac_band.l[U],u>a&&(u=a),C>a&&(C=a),_=g(r,n.table_select[0],0,u,n),_+=g(r,n.table_select[1],u,C,n),_+=g(r,n.table_select[2],C,a,n),_}function I(r){var n,a,_,u,C=0,U=r.internal_flags,T=U.l3_side;if(r.version==1)for(n=0;n<2;n++)for(a=0;a<U.channels_out;a++){var F=T.tt[n][a],_1=V.slen1_tab[F.scalefac_compress],h1=V.slen2_tab[F.scalefac_compress];for(u=0,_=0;_<F.sfbdivide;_++)F.scalefac[_]!=-1&&(y(U,F.scalefac[_],_1),u+=_1);for(;_<F.sfbmax;_++)F.scalefac[_]!=-1&&(y(U,F.scalefac[_],h1),u+=h1);G(u==F.part2_length),F.block_type==u1.SHORT_TYPE?u+=x(U,F):u+=L(U,F),u+=t(U,F),G(u==F.part2_3_length+F.part2_length),C+=u}else for(n=0,a=0;a<U.channels_out;a++){var F=T.tt[n][a],g1,S1,v1=0;if(G(F.sfb_partition_table!=null),u=0,_=0,S1=0,F.block_type==u1.SHORT_TYPE){for(;S1<4;S1++){var M1=F.sfb_partition_table[S1]/3,T1=F.slen[S1];for(g1=0;g1<M1;g1++,_++)y(U,Math.max(F.scalefac[_*3+0],0),T1),y(U,Math.max(F.scalefac[_*3+1],0),T1),y(U,Math.max(F.scalefac[_*3+2],0),T1),v1+=3*T1}u+=x(U,F)}else{for(;S1<4;S1++){var M1=F.sfb_partition_table[S1],T1=F.slen[S1];for(g1=0;g1<M1;g1++,_++)y(U,Math.max(F.scalefac[_],0),T1),v1+=T1}u+=L(U,F)}u+=t(U,F),G(u==F.part2_3_length),G(v1==F.part2_length),C+=v1+u}return C}function z(){this.total=0}function R(r,n){var a=r.internal_flags,_,u,C,U,T;return T=a.w_ptr,U=a.h_ptr-1,U==-1&&(U=d.MAX_HEADER_BUF-1),_=a.header[U].write_timing-v,n.total=_,_>=0&&(u=1+U-T,U<T&&(u=1+U-T+d.MAX_HEADER_BUF),_-=u*8*a.sideinfo_len),C=r1.getframebits(r),_+=C,n.total+=C,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=e+1,_<0&&D.err.println(`strange error flushing buffer ... 
`),_}this.flush_bitstream=function(r){var n=r.internal_flags,a,_,u=n.h_ptr-1;if(u==-1&&(u=d.MAX_HEADER_BUF-1),a=n.l3_side,!((_=R(r,new z))<0)){if(B(r,_),G(n.header[u].write_timing+this.getframebits(r)==v),n.ResvSize=0,a.main_data_begin=0,n.findReplayGain){var C=s1.GetTitleGain(n.rgdata);G(NEQ(C,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),n.RadioGain=Math.floor(C*10+.5)|0}n.findPeakSample&&(n.noclipGainChange=Math.ceil(Math.log10(n.PeakSample/32767)*20*10)|0,n.noclipGainChange>0&&(EQ(r.scale,1)||EQ(r.scale,0))?n.noclipScale=Math.floor(32767/n.PeakSample*100)/100:n.noclipScale=-1)}},this.add_dummy_byte=function(r,n,a){for(var _=r.internal_flags,u;a-- >0;)for(N(_,n,8),u=0;u<d.MAX_HEADER_BUF;++u)_.header[u].write_timing+=8},this.format_bitstream=function(r){var n=r.internal_flags,a;a=n.l3_side;var _=this.getframebits(r);B(r,a.resvDrain_pre),b(r,_);var u=8*n.sideinfo_len;if(u+=I(r),B(r,a.resvDrain_post),u+=a.resvDrain_post,a.main_data_begin+=(_-u)/8,R(r,new z)!=n.ResvSize&&D.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),a.main_data_begin*8!=n.ResvSize&&(D.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*a.main_data_begin,n.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*n.sideinfo_len,u-a.resvDrain_post-8*n.sideinfo_len,u,u%8,_),D.err.println("This is a fatal error.  It has several possible causes:"),D.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),D.err.println(" 9%%  Your system is overclocked"),D.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=a.main_data_begin*8),v>1e9){var C;for(C=0;C<d.MAX_HEADER_BUF;++C)n.header[C].write_timing-=v;v=0}return 0},this.copy_buffer=function(r,n,a,_,u){var C=e+1;if(C<=0)return 0;if(_!=0&&C>_)return-1;if(D.arraycopy(h,0,n,a,C),e=-1,l=0,u!=0){var U=Z(1);if(U[0]=r.nMusicCRC,f.updateMusicCRC(U,n,a,C),r.nMusicCRC=U[0],C>0&&(r.VBR_seek_table.nBytesWritten+=C),r.decode_on_the_fly){for(var T=n1([2,1152]),F=C,_1=-1,h1;_1!=0;)if(_1=K.hip_decode1_unclipped(r.hip,n,a,F,T[0],T[1]),F=0,_1==-1&&(_1=0),_1>0){if(r.findPeakSample){for(h1=0;h1<_1;h1++)T[0][h1]>r.PeakSample?r.PeakSample=T[0][h1]:-T[0][h1]>r.PeakSample&&(r.PeakSample=-T[0][h1]);if(r.channels_out>1)for(h1=0;h1<_1;h1++)T[1][h1]>r.PeakSample?r.PeakSample=T[1][h1]:-T[1][h1]>r.PeakSample&&(r.PeakSample=-T[1][h1])}if(r.findReplayGain&&s1.AnalyzeSamples(r.rgdata,T[0],0,T[1],0,_1,r.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return C},this.init_bit_stream_w=function(r){h=j(H.LAME_MAXMP3BUFFER),r.h_ptr=r.w_ptr=0,r.header[r.h_ptr].write_timing=0,e=-1,l=0,v=0}}return xa=p,xa}var Pa,h0;function Ca(){if(h0)return Pa;h0=1;var M=z1,D=M.System,P=M.VbrMode,j=M.ShortBlock,n1=M.new_float,Z=M.new_int_n,G=M.new_short_n,V=M.assert,J=et,u1=st,d=ha,p=kt,H=yt,r1=Xt,W=Ya(),s1=Ha,K=te();function w(){var f=aa,h=this,v=128*1024;w.V9=410,w.V8=420,w.V7=430,w.V6=440,w.V5=450,w.V4=460,w.V3=470,w.V2=480,w.V1=490,w.V0=500,w.R3MIX=1e3,w.STANDARD=1001,w.EXTREME=1002,w.INSANE=1003,w.STANDARD_FAST=1004,w.EXTREME_FAST=1005,w.MEDIUM=1006,w.MEDIUM_FAST=1007;var e=16384+v;w.LAME_MAXMP3BUFFER=e;var l,A,y,N,B,E=new J,i1,b,t;this.enc=new K,this.setModules=function(s,i,d1,A1,V1,E1,k1,B1,L1){l=s,A=i,y=d1,N=A1,B=V1,i1=E1,b=B1,t=L1,this.enc.setModules(A,E,N,i1)};function g(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=n1(K.SBMAX_l),this.bo_s_weight=n1(K.SBMAX_s)}function x(){this.lowerlimit=0}function L(s,i){this.lowpass=i}var I=4294479419;function z(s){var i;return s.class_id=I,i=s.internal_flags=new d,s.mode=f.NOT_SET,s.original=1,s.in_samplerate=44100,s.num_channels=2,s.num_samples=-1,s.bWriteVbrTag=!0,s.quality=-1,s.short_blocks=null,i.subblock_gain=-1,s.lowpassfreq=0,s.highpassfreq=0,s.lowpasswidth=-1,s.highpasswidth=-1,s.VBR=P.vbr_off,s.VBR_q=4,s.ATHcurve=-1,s.VBR_mean_bitrate_kbps=128,s.VBR_min_bitrate_kbps=0,s.VBR_max_bitrate_kbps=0,s.VBR_hard_min=0,i.VBR_min_bitrate=1,i.VBR_max_bitrate=13,s.quant_comp=-1,s.quant_comp_short=-1,s.msfix=-1,i.resample_ratio=1,i.OldValue[0]=180,i.OldValue[1]=180,i.CurrentStep[0]=4,i.CurrentStep[1]=4,i.masking_lower=1,i.nsPsy.attackthre=-1,i.nsPsy.attackthre_s=-1,s.scale=-1,s.athaa_type=-1,s.ATHtype=-1,s.athaa_loudapprox=-1,s.athaa_sensitivity=0,s.useTemporal=null,s.interChRatio=-1,i.mf_samples_to_encode=K.ENCDELAY+K.POSTDELAY,s.encoder_padding=0,i.mf_size=K.ENCDELAY-K.MDCTDELAY,s.findReplayGain=!1,s.decode_on_the_fly=!1,i.decode_on_the_fly=!1,i.findReplayGain=!1,i.findPeakSample=!1,i.RadioGain=0,i.AudiophileGain=0,i.noclipGainChange=0,i.noclipScale=-1,s.preset=0,s.write_id3tag_automatic=!0,0}this.lame_init=function(){var s=new u1;return z(s),s.lame_allocated_gfp=1,s};function R(s){return s>1?0:s<=0?1:Math.cos(Math.PI/2*s)}this.nearestBitrateFullIndex=function(s){var i=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],d1=0,A1=0,V1=0,E1=0;E1=i[16],V1=16,A1=i[16],d1=16;for(var k1=0;k1<16;k1++)if(Math.max(s,i[k1+1])!=s){E1=i[k1+1],V1=k1+1,A1=i[k1],d1=k1;break}return E1-s>s-A1?d1:V1};function r(s,i){var d1=44100;return i>=48e3?d1=48e3:i>=44100?d1=44100:i>=32e3?d1=32e3:i>=24e3?d1=24e3:i>=22050?d1=22050:i>=16e3?d1=16e3:i>=12e3?d1=12e3:i>=11025?d1=11025:i>=8e3&&(d1=8e3),s==-1?d1:(s<=15960&&(d1=44100),s<=15250&&(d1=32e3),s<=11220&&(d1=24e3),s<=9970&&(d1=22050),s<=7230&&(d1=16e3),s<=5420&&(d1=12e3),s<=4510&&(d1=11025),s<=3970&&(d1=8e3),i<d1?i>44100?48e3:i>32e3?44100:i>24e3?32e3:i>22050?24e3:i>16e3?22050:i>12e3?16e3:i>11025?12e3:i>8e3?11025:8e3:d1)}function n(s,i){switch(s){case 44100:return i.version=1,0;case 48e3:return i.version=1,1;case 32e3:return i.version=1,2;case 22050:return i.version=0,0;case 24e3:return i.version=0,1;case 16e3:return i.version=0,2;case 11025:return i.version=0,0;case 12e3:return i.version=0,1;case 8e3:return i.version=0,2;default:return i.version=0,-1}}function a(s,i,d1){d1<16e3&&(i=2);for(var A1=s1.bitrate_table[i][1],V1=2;V1<=14;V1++)s1.bitrate_table[i][V1]>0&&Math.abs(s1.bitrate_table[i][V1]-s)<Math.abs(A1-s)&&(A1=s1.bitrate_table[i][V1]);return A1}function _(s,i,d1){d1<16e3&&(i=2);for(var A1=0;A1<=14;A1++)if(s1.bitrate_table[i][A1]>0&&s1.bitrate_table[i][A1]==s)return A1;return-1}function u(s,i){var d1=[new L(8,2e3),new L(16,3700),new L(24,3900),new L(32,5500),new L(40,7e3),new L(48,7500),new L(56,1e4),new L(64,11e3),new L(80,13500),new L(96,15100),new L(112,15600),new L(128,17e3),new L(160,17500),new L(192,18600),new L(224,19400),new L(256,19700),new L(320,20500)],A1=h.nearestBitrateFullIndex(i);s.lowerlimit=d1[A1].lowpass}function C(s){var i=s.internal_flags,d1=32,A1=-1;if(i.lowpass1>0){for(var V1=999,E1=0;E1<=31;E1++){var k1=E1/31;k1>=i.lowpass2&&(d1=Math.min(d1,E1)),i.lowpass1<k1&&k1<i.lowpass2&&(V1=Math.min(V1,E1))}V1==999?i.lowpass1=(d1-.75)/31:i.lowpass1=(V1-.75)/31,i.lowpass2=d1/31}if(i.highpass2>0&&i.highpass2<.9*(.75/31)&&(i.highpass1=0,i.highpass2=0,D.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),i.highpass2>0){for(var B1=-1,E1=0;E1<=31;E1++){var k1=E1/31;k1<=i.highpass1&&(A1=Math.max(A1,E1)),i.highpass1<k1&&k1<i.highpass2&&(B1=Math.max(B1,E1))}i.highpass1=A1/31,B1==-1?i.highpass2=(A1+.75)/31:i.highpass2=(B1+.75)/31}for(var E1=0;E1<32;E1++){var L1,P1,k1=E1/31;i.highpass2>i.highpass1?L1=R((i.highpass2-k1)/(i.highpass2-i.highpass1+1e-20)):L1=1,i.lowpass2>i.lowpass1?P1=R((k1-i.lowpass1)/(i.lowpass2-i.lowpass1+1e-20)):P1=1,i.amp_filter[E1]=L1*P1}}function U(s){var i=s.internal_flags;switch(s.quality){default:case 9:i.psymodel=0,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 8:s.quality=7;case 7:i.psymodel=1,i.noise_shaping=0,i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.use_best_huffman=0,i.full_outer_loop=0;break;case 6:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 5:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=0,i.full_outer_loop=0;break;case 4:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=0,i.noise_shaping_stop=0,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 3:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 2:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=1,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 1:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break;case 0:i.psymodel=1,i.noise_shaping==0&&(i.noise_shaping=1),i.substep_shaping==0&&(i.substep_shaping=2),i.noise_shaping_amp=2,i.noise_shaping_stop=1,i.subblock_gain==-1&&(i.subblock_gain=1),i.use_best_huffman=1,i.full_outer_loop=0;break}}function T(s){var i=s.internal_flags;s.frameNum=0,s.write_id3tag_automatic&&b.id3tag_write_v2(s),i.bitrate_stereoMode_Hist=Z([16,5]),i.bitrate_blockType_Hist=Z([16,6]),i.PeakSample=0,s.bWriteVbrTag&&i1.InitVbrTag(s)}this.lame_init_params=function(s){var i=s.internal_flags;if(i.Class_ID=0,i.ATH==null&&(i.ATH=new p),i.PSY==null&&(i.PSY=new g),i.rgdata==null&&(i.rgdata=new H),i.channels_in=s.num_channels,i.channels_in==1&&(s.mode=f.MONO),i.channels_out=s.mode==f.MONO?1:2,i.mode_ext=K.MPG_MD_MS_LR,s.mode==f.MONO&&(s.force_ms=!1),s.VBR==P.vbr_off&&s.VBR_mean_bitrate_kbps!=128&&s.brate==0&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==P.vbr_off||s.VBR==P.vbr_mtrh||s.VBR==P.vbr_mt||(s.free_format=!1),s.VBR==P.vbr_off&&s.brate==0&&W.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==P.vbr_off&&s.compression_ratio>0&&(s.out_samplerate==0&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|s.out_samplerate*16*i.channels_out/(1e3*s.compression_ratio),i.samplerate_index=n(s.out_samplerate,s),s.free_format||(s.brate=a(s.brate,s.version,s.out_samplerate))),s.out_samplerate!=0&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),s.lowpassfreq==0){var d1=16e3;switch(s.VBR){case P.vbr_off:{var A1=new x;u(A1,s.brate),d1=A1.lowerlimit;break}case P.vbr_abr:{var A1=new x;u(A1,s.VBR_mean_bitrate_kbps),d1=A1.lowerlimit;break}case P.vbr_rh:{var V1=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var E1=V1[s.VBR_q],k1=V1[s.VBR_q+1],B1=s.VBR_q_frac;d1=linear_int(E1,k1,B1)}else d1=19500;break}default:{var V1=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var E1=V1[s.VBR_q],k1=V1[s.VBR_q+1],B1=s.VBR_q_frac;d1=linear_int(E1,k1,B1)}else d1=19500}}s.mode==f.MONO&&(s.VBR==P.vbr_off||s.VBR==P.vbr_abr)&&(d1*=1.5),s.lowpassfreq=d1|0}if(s.out_samplerate==0&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=r(s.lowpassfreq|0,s.in_samplerate)),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==P.vbr_off&&(s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.brate)),s.VBR==P.vbr_abr&&(s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,i.findPeakSample=!1),i.findReplayGain=s.findReplayGain,i.decode_on_the_fly=s.decode_on_the_fly,i.decode_on_the_fly&&(i.findPeakSample=!0),i.findReplayGain&&l.InitGainAnalysis(i.rgdata,s.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(i.decode_on_the_fly&&!s.decode_only&&(i.hip!=null&&t.hip_decode_exit(i.hip),i.hip=t.hip_decode_init()),i.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*i.mode_gr,s.encoder_delay=K.ENCDELAY,i.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case P.vbr_mt:case P.vbr_rh:case P.vbr_mtrh:{var L1=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];s.compression_ratio=L1[s.VBR_q]}break;case P.vbr_abr:s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=s.out_samplerate*16*i.channels_out/(1e3*s.brate);break}if(s.mode==f.NOT_SET&&(s.mode=f.JOINT_STEREO),s.highpassfreq>0?(i.highpass1=2*s.highpassfreq,s.highpasswidth>=0?i.highpass2=2*(s.highpassfreq+s.highpasswidth):i.highpass2=1*2*s.highpassfreq,i.highpass1/=s.out_samplerate,i.highpass2/=s.out_samplerate):(i.highpass1=0,i.highpass2=0),s.lowpassfreq>0?(i.lowpass2=2*s.lowpassfreq,s.lowpasswidth>=0?(i.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),i.lowpass1<0&&(i.lowpass1=0)):i.lowpass1=1*2*s.lowpassfreq,i.lowpass1/=s.out_samplerate,i.lowpass2/=s.out_samplerate):(i.lowpass1=0,i.lowpass2=0),C(s),i.samplerate_index=n(s.out_samplerate,s),i.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==P.vbr_off){if(s.free_format)i.bitrate_index=0;else if(s.brate=a(s.brate,s.version,s.out_samplerate),i.bitrate_index=_(s.brate,s.version,s.out_samplerate),i.bitrate_index<=0)return s.internal_flags=null,-1}else i.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),i.pinfo!=null&&(s.bWriteVbrTag=!1),A.init_bit_stream_w(i);for(var P1=i.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),b1=0;b1<K.SBMAX_l+1;b1++)i.scalefac_band.l[b1]=N.sfBandIndex[P1].l[b1];for(var b1=0;b1<K.PSFB21+1;b1++){var C1=(i.scalefac_band.l[22]-i.scalefac_band.l[21])/K.PSFB21,Q1=i.scalefac_band.l[21]+b1*C1;i.scalefac_band.psfb21[b1]=Q1}i.scalefac_band.psfb21[K.PSFB21]=576;for(var b1=0;b1<K.SBMAX_s+1;b1++)i.scalefac_band.s[b1]=N.sfBandIndex[P1].s[b1];for(var b1=0;b1<K.PSFB12+1;b1++){var C1=(i.scalefac_band.s[13]-i.scalefac_band.s[12])/K.PSFB12,Q1=i.scalefac_band.s[12]+b1*C1;i.scalefac_band.psfb12[b1]=Q1}i.scalefac_band.psfb12[K.PSFB12]=192,s.version==1?i.sideinfo_len=i.channels_out==1?21:36:i.sideinfo_len=i.channels_out==1?13:21,s.error_protection&&(i.sideinfo_len+=2),T(s),i.Class_ID=I;{var o;for(o=0;o<19;o++)i.nsPsy.pefirbuf[o]=700*i.mode_gr*i.channels_out;s.ATHtype==-1&&(s.ATHtype=4)}switch(V(s.VBR_q<=9),V(s.VBR_q>=0),s.VBR){case P.vbr_mt:s.VBR=P.vbr_mtrh;case P.vbr_mtrh:{s.useTemporal==null&&(s.useTemporal=!1),y.apply_preset(s,500-s.VBR_q*10,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),s.quality>5&&(s.quality=5),i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=s.out_samplerate>44e3,i.iteration_loop=new VBRNewIterationLoop(B);break}case P.vbr_rh:{y.apply_preset(s,500-s.VBR_q*10,0),i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?i.sfb21_extra=!1:i.sfb21_extra=s.out_samplerate>44e3,s.quality>6&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),i.iteration_loop=new VBROldIterationLoop(B);break}default:{var c;i.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),c=s.VBR,c==P.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),y.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=c,i.PSY.mask_adjust=s.maskingadjust,i.PSY.mask_adjust_short=s.maskingadjust_short,c==P.vbr_off?i.iteration_loop=new r1(B):i.iteration_loop=new ABRIterationLoop(B);break}}if(V(s.scale>=0),s.VBR!=P.vbr_off){if(i.VBR_min_bitrate=1,i.VBR_max_bitrate=14,s.out_samplerate<16e3&&(i.VBR_max_bitrate=8),s.VBR_min_bitrate_kbps!=0&&(s.VBR_min_bitrate_kbps=a(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),i.VBR_min_bitrate=_(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),i.VBR_min_bitrate<0)||s.VBR_max_bitrate_kbps!=0&&(s.VBR_max_bitrate_kbps=a(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),i.VBR_max_bitrate=_(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),i.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=s1.bitrate_table[s.version][i.VBR_min_bitrate],s.VBR_max_bitrate_kbps=s1.bitrate_table[s.version][i.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(s1.bitrate_table[s.version][i.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(s1.bitrate_table[s.version][i.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(i.PSY.mask_adjust+=s.tune_value_a,i.PSY.mask_adjust_short+=s.tune_value_a),U(s),V(s.scale>=0),s.athaa_type<0?i.ATH.useAdjust=3:i.ATH.useAdjust=s.athaa_type,i.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),s.short_blocks==null&&(s.short_blocks=j.short_block_allowed),s.short_blocks==j.short_block_allowed&&(s.mode==f.JOINT_STEREO||s.mode==f.STEREO)&&(s.short_blocks=j.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=s.exp_nspsytune|1,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=J.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=J.NSATTACKTHRE_S),V(s.scale>=0),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),s.useTemporal==null&&(s.useTemporal=!0),i.slot_lag=i.frac_SpF=0,s.VBR==P.vbr_off&&(i.slot_lag=i.frac_SpF=(s.version+1)*72e3*s.brate%s.out_samplerate|0),N.iteration_init(s),E.psymodel_init(s),V(s.scale>=0),0};function F(s,i){(s.in_buffer_0==null||s.in_buffer_nsamples<i)&&(s.in_buffer_0=n1(i),s.in_buffer_1=n1(i),s.in_buffer_nsamples=i)}this.lame_encode_flush=function(s,i,d1,A1){var V1=s.internal_flags,E1=G([2,1152]),k1=0,B1,L1,P1,b1,C1=V1.mf_samples_to_encode-K.POSTDELAY,Q1=_1(s);if(V1.mf_samples_to_encode<1)return 0;for(B1=0,s.in_samplerate!=s.out_samplerate&&(C1+=16*s.out_samplerate/s.in_samplerate),P1=s.framesize-C1%s.framesize,P1<576&&(P1+=s.framesize),s.encoder_padding=P1,b1=(C1+P1)/s.framesize;b1>0&&k1>=0;){var o=Q1-V1.mf_size,c=s.frameNum;o*=s.in_samplerate,o/=s.out_samplerate,o>1152&&(o=1152),o<1&&(o=1),L1=A1-B1,A1==0&&(L1=0),k1=this.lame_encode_buffer(s,E1[0],E1[1],o,i,d1,L1),d1+=k1,B1+=k1,b1-=c!=s.frameNum?1:0}if(V1.mf_samples_to_encode=0,k1<0||(L1=A1-B1,A1==0&&(L1=0),A.flush_bitstream(s),k1=A.copy_buffer(V1,i,d1,L1,1),k1<0))return k1;if(d1+=k1,B1+=k1,L1=A1-B1,A1==0&&(L1=0),s.write_id3tag_automatic){if(b.id3tag_write_v1(s),k1=A.copy_buffer(V1,i,d1,L1,0),k1<0)return k1;B1+=k1}return B1},this.lame_encode_buffer=function(s,i,d1,A1,V1,E1,k1){var B1=s.internal_flags,L1=[null,null];if(B1.Class_ID!=I)return-3;if(A1==0)return 0;F(B1,A1),L1[0]=B1.in_buffer_0,L1[1]=B1.in_buffer_1;for(var P1=0;P1<A1;P1++)L1[0][P1]=i[P1],B1.channels_in>1&&(L1[1][P1]=d1[P1]);return h1(s,L1[0],L1[1],A1,V1,E1,k1)};function _1(s){var i=K.BLKSIZE+s.framesize-K.FFTOFFSET;return i=Math.max(i,512+s.framesize-32),i}function h1(s,i,d1,A1,V1,E1,k1){var B1=s.internal_flags,L1=0,P1,b1,C1,Q1,o,c=[null,null],S=[null,null];if(B1.Class_ID!=I)return-3;if(A1==0)return 0;if(o=A.copy_buffer(B1,V1,E1,k1,0),o<0)return o;if(E1+=o,L1+=o,S[0]=i,S[1]=d1,W.NEQ(s.scale,0)&&W.NEQ(s.scale,1))for(b1=0;b1<A1;++b1)S[0][b1]*=s.scale,B1.channels_out==2&&(S[1][b1]*=s.scale);if(W.NEQ(s.scale_left,0)&&W.NEQ(s.scale_left,1))for(b1=0;b1<A1;++b1)S[0][b1]*=s.scale_left;if(W.NEQ(s.scale_right,0)&&W.NEQ(s.scale_right,1))for(b1=0;b1<A1;++b1)S[1][b1]*=s.scale_right;if(s.num_channels==2&&B1.channels_out==1)for(b1=0;b1<A1;++b1)S[0][b1]=.5*(S[0][b1]+S[1][b1]),S[1][b1]=0;Q1=_1(s),c[0]=B1.mfbuf[0],c[1]=B1.mfbuf[1];for(var k=0;A1>0;){var O=[null,null],m=0,Y=0;O[0]=S[0],O[1]=S[1];var q=new S1;if(he(s,c,O,k,A1,q),m=q.n_in,Y=q.n_out,B1.findReplayGain&&!B1.decode_on_the_fly&&l.AnalyzeSamples(B1.rgdata,c[0],B1.mf_size,c[1],B1.mf_size,Y,B1.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(A1-=m,k+=m,B1.channels_out==2,B1.mf_size+=Y,V(B1.mf_size<=d.MFSIZE),B1.mf_samples_to_encode<1&&(B1.mf_samples_to_encode=K.ENCDELAY+K.POSTDELAY),B1.mf_samples_to_encode+=Y,B1.mf_size>=Q1){var X=k1-L1;if(k1==0&&(X=0),P1=g1(s,c[0],c[1],V1,E1,X),P1<0)return P1;for(E1+=P1,L1+=P1,B1.mf_size-=s.framesize,B1.mf_samples_to_encode-=s.framesize,C1=0;C1<B1.channels_out;C1++)for(b1=0;b1<B1.mf_size;b1++)c[C1][b1]=c[C1][b1+s.framesize]}}return L1}function g1(s,i,d1,A1,V1,E1){var k1=h.enc.lame_encode_mp3_frame(s,i,d1,A1,V1,E1);return s.frameNum++,k1}function S1(){this.n_in=0,this.n_out=0}function v1(){this.num_used=0}function M1(s,i){return i!=0?M1(i,s%i):s}function T1(s,i,d1){var A1=Math.PI*i;s/=d1,s<0&&(s=0),s>1&&(s=1);var V1=s-.5,E1=.42-.5*Math.cos(2*s*Math.PI)+.08*Math.cos(4*s*Math.PI);return Math.abs(V1)<1e-9?A1/Math.PI:E1*Math.sin(d1*A1*V1)/(Math.PI*d1*V1)}function j1(s,i,d1,A1,V1,E1,k1,B1,L1){var P1=s.internal_flags,b1,C1=0,Q1,o=s.out_samplerate/M1(s.out_samplerate,s.in_samplerate);o>d.BPC&&(o=d.BPC);var c=Math.abs(P1.resample_ratio-Math.floor(.5+P1.resample_ratio))<1e-4?1:0,S=1/P1.resample_ratio;S>1&&(S=1);var k=31;k%2==0&&--k,k+=c;var O=k+1;if(P1.fill_buffer_resample_init==0){for(P1.inbuf_old[0]=n1(O),P1.inbuf_old[1]=n1(O),b1=0;b1<=2*o;++b1)P1.blackfilt[b1]=n1(O);for(P1.itime[0]=0,P1.itime[1]=0,C1=0;C1<=2*o;C1++){var m=0,Y=(C1-o)/(2*o);for(b1=0;b1<=k;b1++)m+=P1.blackfilt[C1][b1]=T1(b1-Y,S,k);for(b1=0;b1<=k;b1++)P1.blackfilt[C1][b1]/=m}P1.fill_buffer_resample_init=1}var q=P1.inbuf_old[L1];for(Q1=0;Q1<A1;Q1++){var X,a1;if(X=Q1*P1.resample_ratio,C1=0|Math.floor(X-P1.itime[L1]),k+C1-k/2>=k1)break;var Y=X-P1.itime[L1]-(C1+.5*(k%2));a1=0|Math.floor(Y*2*o+o+.5);var Q=0;for(b1=0;b1<=k;++b1){var e1=0|b1+C1-k/2,p1;p1=e1<0?q[O+e1]:V1[E1+e1],Q+=p1*P1.blackfilt[a1][b1]}i[d1+Q1]=Q}if(B1.num_used=Math.min(k1,k+C1-k/2),P1.itime[L1]+=B1.num_used-Q1*P1.resample_ratio,B1.num_used>=O)for(b1=0;b1<O;b1++)q[b1]=V1[E1+B1.num_used+b1-O];else{var x1=O-B1.num_used;for(b1=0;b1<x1;++b1)q[b1]=q[b1+B1.num_used];for(C1=0;b1<O;++b1,++C1)q[b1]=V1[E1+C1];V(C1==B1.num_used)}return Q1}function he(s,i,d1,A1,V1,E1){var k1=s.internal_flags;if(k1.resample_ratio<.9999||k1.resample_ratio>1.0001)for(var B1=0;B1<k1.channels_out;B1++){var L1=new v1;E1.n_out=j1(s,i[B1],k1.mf_size,s.framesize,d1[B1],A1,V1,L1,B1),E1.n_in=L1.num_used}else{E1.n_out=Math.min(s.framesize,V1),E1.n_in=E1.n_out;for(var P1=0;P1<E1.n_out;++P1)i[0][k1.mf_size+P1]=d1[0][A1+P1],k1.channels_out==2&&(i[1][k1.mf_size+P1]=d1[1][A1+P1])}}}return Pa=w,Pa}var Nt=z1,Me=Nt.VbrMode;function Ot(){var M=Ca();function D(d,p,H,r1,W,s1,K,w,f,h,v,e,l,A,y){this.vbr_q=d,this.quant_comp=p,this.quant_comp_s=H,this.expY=r1,this.st_lrm=W,this.st_s=s1,this.masking_adj=K,this.masking_adj_short=w,this.ath_lower=f,this.ath_curve=h,this.ath_sensitivity=v,this.interch=e,this.safejoint=l,this.sfb21mod=A,this.msfix=y}function P(d,p,H,r1,W,s1,K,w,f,h,v,e,l,A){this.quant_comp=p,this.quant_comp_s=H,this.safejoint=r1,this.nsmsfix=W,this.st_lrm=s1,this.st_s=K,this.nsbass=w,this.scale=f,this.masking_adj=h,this.ath_lower=v,this.ath_curve=e,this.interch=l,this.sfscale=A}var j;this.setModules=function(d){j=d};var n1=[new D(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new D(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new D(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new D(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new D(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new D(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new D(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new D(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new D(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new D(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new D(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],Z=[new D(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new D(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new D(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new D(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new D(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new D(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new D(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new D(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new D(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new D(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new D(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function G(d,p,H){var r1=d.VBR==Me.vbr_rh?n1:Z,W=d.VBR_q_frac,s1=r1[p],K=r1[p+1],w=s1;s1.st_lrm=s1.st_lrm+W*(K.st_lrm-s1.st_lrm),s1.st_s=s1.st_s+W*(K.st_s-s1.st_s),s1.masking_adj=s1.masking_adj+W*(K.masking_adj-s1.masking_adj),s1.masking_adj_short=s1.masking_adj_short+W*(K.masking_adj_short-s1.masking_adj_short),s1.ath_lower=s1.ath_lower+W*(K.ath_lower-s1.ath_lower),s1.ath_curve=s1.ath_curve+W*(K.ath_curve-s1.ath_curve),s1.ath_sensitivity=s1.ath_sensitivity+W*(K.ath_sensitivity-s1.ath_sensitivity),s1.interch=s1.interch+W*(K.interch-s1.interch),s1.msfix=s1.msfix+W*(K.msfix-s1.msfix),u1(d,w.vbr_q),H!=0?d.quant_comp=w.quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=w.quant_comp),H!=0?d.quant_comp_short=w.quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=w.quant_comp_s),w.expY!=0&&(d.experimentalY=w.expY!=0),H!=0?d.internal_flags.nsPsy.attackthre=w.st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=w.st_lrm),H!=0?d.internal_flags.nsPsy.attackthre_s=w.st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=w.st_s),H!=0?d.maskingadjust=w.masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=w.masking_adj),H!=0?d.maskingadjust_short=w.masking_adj_short:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=w.masking_adj_short),H!=0?d.ATHlower=-w.ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-w.ath_lower/10),H!=0?d.ATHcurve=w.ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=w.ath_curve),H!=0?d.athaa_sensitivity=w.ath_sensitivity:Math.abs(d.athaa_sensitivity- -1)>0||(d.athaa_sensitivity=w.ath_sensitivity),w.interch>0&&(H!=0?d.interChRatio=w.interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=w.interch)),w.safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|w.safejoint),w.sfb21mod>0&&(d.exp_nspsytune=d.exp_nspsytune|w.sfb21mod<<20),H!=0?d.msfix=w.msfix:Math.abs(d.msfix- -1)>0||(d.msfix=w.msfix),H==0&&(d.VBR_q=p,d.VBR_q_frac=W)}var V=[new P(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new P(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new P(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new P(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new P(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new P(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new P(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new P(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new P(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new P(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new P(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new P(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new P(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new P(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new P(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new P(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new P(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function J(d,p,H){var r1=p,W=j.nearestBitrateFullIndex(p);if(d.VBR=Me.vbr_abr,d.VBR_mean_bitrate_kbps=r1,d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320),d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.brate=d.VBR_mean_bitrate_kbps,d.VBR_mean_bitrate_kbps>320&&(d.disable_reservoir=!0),V[W].safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|2),V[W].sfscale>0&&(d.internal_flags.noise_shaping=2),Math.abs(V[W].nsbass)>0){var s1=int(V[W].nsbass*4);s1<0&&(s1+=64),d.exp_nspsytune=d.exp_nspsytune|s1<<2}return H!=0?d.quant_comp=V[W].quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=V[W].quant_comp),H!=0?d.quant_comp_short=V[W].quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=V[W].quant_comp_s),H!=0?d.msfix=V[W].nsmsfix:Math.abs(d.msfix- -1)>0||(d.msfix=V[W].nsmsfix),H!=0?d.internal_flags.nsPsy.attackthre=V[W].st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=V[W].st_lrm),H!=0?d.internal_flags.nsPsy.attackthre_s=V[W].st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=V[W].st_s),H!=0?d.scale=V[W].scale:Math.abs(d.scale- -1)>0||(d.scale=V[W].scale),H!=0?d.maskingadjust=V[W].masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=V[W].masking_adj),V[W].masking_adj>0?H!=0?d.maskingadjust_short=V[W].masking_adj*.9:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=V[W].masking_adj*.9):H!=0?d.maskingadjust_short=V[W].masking_adj*1.1:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=V[W].masking_adj*1.1),H!=0?d.ATHlower=-V[W].ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-V[W].ath_lower/10),H!=0?d.ATHcurve=V[W].ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=V[W].ath_curve),H!=0?d.interChRatio=V[W].interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=V[W].interch),p}this.apply_preset=function(d,p,H){switch(p){case M.R3MIX:{p=M.V3,d.VBR=Me.vbr_mtrh;break}case M.MEDIUM:{p=M.V4,d.VBR=Me.vbr_rh;break}case M.MEDIUM_FAST:{p=M.V4,d.VBR=Me.vbr_mtrh;break}case M.STANDARD:{p=M.V2,d.VBR=Me.vbr_rh;break}case M.STANDARD_FAST:{p=M.V2,d.VBR=Me.vbr_mtrh;break}case M.EXTREME:{p=M.V0,d.VBR=Me.vbr_rh;break}case M.EXTREME_FAST:{p=M.V0,d.VBR=Me.vbr_mtrh;break}case M.INSANE:return p=320,d.preset=p,J(d,p,H),d.VBR=Me.vbr_off,p}switch(d.preset=p,p){case M.V9:return G(d,9,H),p;case M.V8:return G(d,8,H),p;case M.V7:return G(d,7,H),p;case M.V6:return G(d,6,H),p;case M.V5:return G(d,5,H),p;case M.V4:return G(d,4,H),p;case M.V3:return G(d,3,H),p;case M.V2:return G(d,2,H),p;case M.V1:return G(d,1,H),p;case M.V0:return G(d,0,H),p}return 8<=p&&p<=320?J(d,p,H):(d.preset=0,p)};function u1(d,p){var H=0;return 0>p&&(H=-1,p=0),9<p&&(H=-1,p=9),d.VBR_q=p,d.VBR_q_frac=0,H}}var Ht=Ot;function Yt(){this.setModules=function(M,D){}}var Ct=Yt;function jt(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Ft=jt,C0=z1,u0=C0.new_float,qt=C0.new_int;function Zt(){this.global_gain=0,this.sfb_count1=0,this.step=qt(39),this.noise=u0(39),this.noise_log=u0(39)}var Gt=Zt,Ze=z1,Be=Ze.System,p0=Ze.VbrMode,Ia=Ze.Util,He=Ze.Arrays,Je=Ze.new_float,$e=Ze.assert,zt=Ct,Va=Ft,Qt=Gt,Y1=te(),b0=Xa,m0=ca;function Wt(){var M;this.rv=null;var D;this.qupvt=null;var P,j=new zt,n1;this.setModules=function(w,f,h,v){M=w,D=f,this.rv=f,P=h,this.qupvt=h,n1=v,j.setModules(P,n1)},this.ms_convert=function(w,f){for(var h=0;h<576;++h){var v=w.tt[f][0].xr[h],e=w.tt[f][1].xr[h];w.tt[f][0].xr[h]=(v+e)*(Ia.SQRT2*.5),w.tt[f][1].xr[h]=(v-e)*(Ia.SQRT2*.5)}};function Z(w,f,h,v){v=0;for(var e=0;e<=h;++e){var l=Math.abs(w.xr[e]);v+=l,f[e]=Math.sqrt(l*Math.sqrt(l)),f[e]>w.xrpow_max&&(w.xrpow_max=f[e])}return v}this.init_xrpow=function(w,f,h){var v=0,e=0|f.max_nonzero_coeff;if(f.xrpow_max=0,He.fill(h,e,576,0),v=Z(f,h,e,v),v>1e-20){var l=0;w.substep_shaping&2&&(l=1);for(var A=0;A<f.psymax;A++)w.pseudohalf[A]=l;return!0}return He.fill(f.l3_enc,0,576,0),!1};function G(w,f){var h=w.ATH,v=f.xr;if(f.block_type!=Y1.SHORT_TYPE)for(var e=!1,l=Y1.PSFB21-1;l>=0&&!e;l--){var A=w.scalefac_band.psfb21[l],y=w.scalefac_band.psfb21[l+1],N=P.athAdjust(h.adjust,h.psfb21[l],h.floor);w.nsPsy.longfact[21]>1e-12&&(N*=w.nsPsy.longfact[21]);for(var B=y-1;B>=A;B--)if(Math.abs(v[B])<N)v[B]=0;else{e=!0;break}}else for(var E=0;E<3;E++)for(var e=!1,l=Y1.PSFB12-1;l>=0&&!e;l--){var A=w.scalefac_band.s[12]*3+(w.scalefac_band.s[13]-w.scalefac_band.s[12])*E+(w.scalefac_band.psfb12[l]-w.scalefac_band.psfb12[0]),y=A+(w.scalefac_band.psfb12[l+1]-w.scalefac_band.psfb12[l]),i1=P.athAdjust(h.adjust,h.psfb12[l],h.floor);w.nsPsy.shortfact[12]>1e-12&&(i1*=w.nsPsy.shortfact[12]);for(var B=y-1;B>=A;B--)if(Math.abs(v[B])<i1)v[B]=0;else{e=!0;break}}}this.init_outer_loop=function(w,f){f.part2_3_length=0,f.big_values=0,f.count1=0,f.global_gain=210,f.scalefac_compress=0,f.table_select[0]=0,f.table_select[1]=0,f.table_select[2]=0,f.subblock_gain[0]=0,f.subblock_gain[1]=0,f.subblock_gain[2]=0,f.subblock_gain[3]=0,f.region0_count=0,f.region1_count=0,f.preflag=0,f.scalefac_scale=0,f.count1table_select=0,f.part2_length=0,f.sfb_lmax=Y1.SBPSY_l,f.sfb_smin=Y1.SBPSY_s,f.psy_lmax=w.sfb21_extra?Y1.SBMAX_l:Y1.SBPSY_l,f.psymax=f.psy_lmax,f.sfbmax=f.sfb_lmax,f.sfbdivide=11;for(var h=0;h<Y1.SBMAX_l;h++)f.width[h]=w.scalefac_band.l[h+1]-w.scalefac_band.l[h],f.window[h]=3;if(f.block_type==Y1.SHORT_TYPE){var v=Je(576);f.sfb_smin=0,f.sfb_lmax=0,f.mixed_block_flag!=0&&(f.sfb_smin=3,f.sfb_lmax=w.mode_gr*2+4),f.psymax=f.sfb_lmax+3*((w.sfb21_extra?Y1.SBMAX_s:Y1.SBPSY_s)-f.sfb_smin),f.sfbmax=f.sfb_lmax+3*(Y1.SBPSY_s-f.sfb_smin),f.sfbdivide=f.sfbmax-18,f.psy_lmax=f.sfb_lmax;var e=w.scalefac_band.l[f.sfb_lmax];Be.arraycopy(f.xr,0,v,0,576);for(var h=f.sfb_smin;h<Y1.SBMAX_s;h++)for(var l=w.scalefac_band.s[h],A=w.scalefac_band.s[h+1],y=0;y<3;y++)for(var N=l;N<A;N++)f.xr[e++]=v[3*N+y];for(var B=f.sfb_lmax,h=f.sfb_smin;h<Y1.SBMAX_s;h++)f.width[B]=f.width[B+1]=f.width[B+2]=w.scalefac_band.s[h+1]-w.scalefac_band.s[h],f.window[B]=0,f.window[B+1]=1,f.window[B+2]=2,B+=3}f.count1bits=0,f.sfb_partition_table=P.nr_of_sfb_block[0][0],f.slen[0]=0,f.slen[1]=0,f.slen[2]=0,f.slen[3]=0,f.max_nonzero_coeff=575,He.fill(f.scalefac,0),G(w,f)};function V(w){this.ordinal=w}V.BINSEARCH_NONE=new V(0),V.BINSEARCH_UP=new V(1),V.BINSEARCH_DOWN=new V(2);function J(w,f,h,v,e){var l,A=w.CurrentStep[v],y=!1,N=w.OldValue[v],B=V.BINSEARCH_NONE;for(f.global_gain=N,h-=f.part2_length;;){var E;if(l=n1.count_bits(w,e,f,null),A==1||l==h)break;l>h?(B==V.BINSEARCH_DOWN&&(y=!0),y&&(A/=2),B=V.BINSEARCH_UP,E=A):(B==V.BINSEARCH_UP&&(y=!0),y&&(A/=2),B=V.BINSEARCH_DOWN,E=-A),f.global_gain+=E,f.global_gain<0&&(f.global_gain=0,y=!0),f.global_gain>255&&(f.global_gain=255,y=!0)}for($e(f.global_gain>=0),$e(f.global_gain<256);l>h&&f.global_gain<255;)f.global_gain++,l=n1.count_bits(w,e,f,null);return w.CurrentStep[v]=N-f.global_gain>=4?4:2,w.OldValue[v]=f.global_gain,f.part2_3_length=l,l}this.trancate_smallspectrums=function(w,f,h,v){var e=Je(m0.SFBMAX);if(!(!(w.substep_shaping&4)&&f.block_type==Y1.SHORT_TYPE||w.substep_shaping&128)){P.calc_noise(f,h,e,new Va,null);for(var A=0;A<576;A++){var l=0;f.l3_enc[A]!=0&&(l=Math.abs(f.xr[A])),v[A]=l}var A=0,y=8;f.block_type==Y1.SHORT_TYPE&&(y=6);do{var N,B,E,i1,b=f.width[y];if(A+=b,!(e[y]>=1)&&(He.sort(v,A-b,b),!BitStream.EQ(v[A-1],0))){N=(1-e[y])*h[y],B=0,i1=0;do{var t;for(E=1;i1+E<b&&!BitStream.NEQ(v[i1+A-b],v[i1+A+E-b]);E++);if(t=v[i1+A-b]*v[i1+A-b]*E,N<t){i1!=0&&(B=v[i1+A-b-1]);break}N-=t,i1+=E}while(i1<b);if(!BitStream.EQ(B,0))do Math.abs(f.xr[A-b])<=B&&(f.l3_enc[A-b]=0);while(--b>0)}}while(++y<f.psymax);f.part2_3_length=n1.noquant_count_bits(w,f,null)}};function u1(w){for(var f=0;f<w.sfbmax;f++)if(w.scalefac[f]+w.subblock_gain[w.window[f]]==0)return!1;return!0}function d(w){return Ia.FAST_LOG10(.368+.632*w*w*w)}function p(w,f){for(var h=1e-37,v=0;v<f.psymax;v++)h+=d(w[v]);return Math.max(1e-20,h)}function H(w,f,h,v,e){var l;switch(w){default:case 9:{f.over_count>0?(l=h.over_SSD<=f.over_SSD,h.over_SSD==f.over_SSD&&(l=h.bits<f.bits)):l=h.max_noise<0&&h.max_noise*10+h.bits<=f.max_noise*10+f.bits;break}case 0:l=h.over_count<f.over_count||h.over_count==f.over_count&&h.over_noise<f.over_noise||h.over_count==f.over_count&&BitStream.EQ(h.over_noise,f.over_noise)&&h.tot_noise<f.tot_noise;break;case 8:h.max_noise=p(e,v);case 1:l=h.max_noise<f.max_noise;break;case 2:l=h.tot_noise<f.tot_noise;break;case 3:l=h.tot_noise<f.tot_noise&&h.max_noise<f.max_noise;break;case 4:l=h.max_noise<=0&&f.max_noise>.2||h.max_noise<=0&&f.max_noise<0&&f.max_noise>h.max_noise-.2&&h.tot_noise<f.tot_noise||h.max_noise<=0&&f.max_noise>0&&f.max_noise>h.max_noise-.2&&h.tot_noise<f.tot_noise+f.over_noise||h.max_noise>0&&f.max_noise>-.05&&f.max_noise>h.max_noise-.1&&h.tot_noise+h.over_noise<f.tot_noise+f.over_noise||h.max_noise>0&&f.max_noise>-.1&&f.max_noise>h.max_noise-.15&&h.tot_noise+h.over_noise+h.over_noise<f.tot_noise+f.over_noise+f.over_noise;break;case 5:l=h.over_noise<f.over_noise||BitStream.EQ(h.over_noise,f.over_noise)&&h.tot_noise<f.tot_noise;break;case 6:l=h.over_noise<f.over_noise||BitStream.EQ(h.over_noise,f.over_noise)&&(h.max_noise<f.max_noise||BitStream.EQ(h.max_noise,f.max_noise)&&h.tot_noise<=f.tot_noise);break;case 7:l=h.over_count<f.over_count||h.over_noise<f.over_noise;break}return f.over_count==0&&(l=l&&h.bits<f.bits),l}function r1(w,f,h,v,e){var l=w.internal_flags,A;f.scalefac_scale==0?A=1.2968395546510096:A=1.6817928305074292;for(var y=0,N=0;N<f.sfbmax;N++)y<h[N]&&(y=h[N]);var B=l.noise_shaping_amp;switch(B==3&&(e?B=2:B=1),B){case 2:break;case 1:y>1?y=Math.pow(y,.5):y*=.95;break;case 0:default:y>1?y=1:y*=.95;break}for(var E=0,N=0;N<f.sfbmax;N++){var i1=f.width[N],b;if(E+=i1,!(h[N]<y)){if(l.substep_shaping&2&&(l.pseudohalf[N]=l.pseudohalf[N]==0?1:0,l.pseudohalf[N]==0&&l.noise_shaping_amp==2))return;for(f.scalefac[N]++,b=-i1;b<0;b++)v[E+b]*=A,v[E+b]>f.xrpow_max&&(f.xrpow_max=v[E+b]);if(l.noise_shaping_amp==2)return}}}function W(w,f){for(var h=1.2968395546510096,v=0,e=0;e<w.sfbmax;e++){var l=w.width[e],A=w.scalefac[e];if(w.preflag!=0&&(A+=P.pretab[e]),v+=l,A&1){A++;for(var y=-l;y<0;y++)f[v+y]*=h,f[v+y]>w.xrpow_max&&(w.xrpow_max=f[v+y])}w.scalefac[e]=A>>1}w.preflag=0,w.scalefac_scale=1}function s1(w,f,h){var v,e=f.scalefac;for(v=0;v<f.sfb_lmax;v++)if(e[v]>=16)return!0;for(var l=0;l<3;l++){var A=0,y=0;for(v=f.sfb_lmax+l;v<f.sfbdivide;v+=3)A<e[v]&&(A=e[v]);for(;v<f.sfbmax;v+=3)y<e[v]&&(y=e[v]);if(!(A<16&&y<8)){if(f.subblock_gain[l]>=7)return!0;f.subblock_gain[l]++;var N=w.scalefac_band.l[f.sfb_lmax];for(v=f.sfb_lmax+l;v<f.sfbmax;v+=3){var B,E=f.width[v],i1=e[v];if(i1=i1-(4>>f.scalefac_scale),i1>=0){e[v]=i1,N+=E*3;continue}e[v]=0;{var b=210+(i1<<f.scalefac_scale+1);B=P.IPOW20(b)}N+=E*(l+1);for(var t=-E;t<0;t++)h[N+t]*=B,h[N+t]>f.xrpow_max&&(f.xrpow_max=h[N+t]);N+=E*(3-l-1)}{var B=P.IPOW20(202);N+=f.width[v]*(l+1);for(var t=-f.width[v];t<0;t++)h[N+t]*=B,h[N+t]>f.xrpow_max&&(f.xrpow_max=h[N+t])}}}return!1}function K(w,f,h,v,e){var l=w.internal_flags;r1(w,f,h,v,e);var A=u1(f);return A?!1:(l.mode_gr==2?A=n1.scale_bitcount(f):A=n1.scale_bitcount_lsf(l,f),A?(l.noise_shaping>1&&(He.fill(l.pseudohalf,0),f.scalefac_scale==0?(W(f,v),A=!1):f.block_type==Y1.SHORT_TYPE&&l.subblock_gain>0&&(A=s1(l,f,v)||u1(f))),A||(l.mode_gr==2?A=n1.scale_bitcount(f):A=n1.scale_bitcount_lsf(l,f)),!A):!0)}this.outer_loop=function(w,f,h,v,e,l){var A=w.internal_flags,y=new b0,N=Je(576),B=Je(m0.SFBMAX),E=new Va,i1,b=new Qt,t=9999999,g=!1,x=!1,L=0;if(J(A,f,l,e,v),A.noise_shaping==0)return 100;P.calc_noise(f,h,B,E,b),E.bits=f.part2_3_length,y.assign(f);var I=0;for(Be.arraycopy(v,0,N,0,576);!g;){do{var z=new Va,R,r=255;if(A.substep_shaping&2?R=20:R=3,A.sfb21_extra&&(B[y.sfbmax]>1||y.block_type==Y1.SHORT_TYPE&&(B[y.sfbmax+1]>1||B[y.sfbmax+2]>1))||!K(w,y,B,v,x))break;y.scalefac_scale!=0&&(r=254);var n=l-y.part2_length;if(n<=0)break;for(;(y.part2_3_length=n1.count_bits(A,v,y,b))>n&&y.global_gain<=r;)y.global_gain++;if(y.global_gain>r)break;if(E.over_count==0){for(;(y.part2_3_length=n1.count_bits(A,v,y,b))>t&&y.global_gain<=r;)y.global_gain++;if(y.global_gain>r)break}if(P.calc_noise(y,h,B,z,b),z.bits=y.part2_3_length,f.block_type!=Y1.SHORT_TYPE?i1=w.quant_comp:i1=w.quant_comp_short,i1=H(i1,E,z,y,B)?1:0,i1!=0)t=f.part2_3_length,E=z,f.assign(y),I=0,Be.arraycopy(v,0,N,0,576);else if(A.full_outer_loop==0&&(++I>R&&E.over_count==0||A.noise_shaping_amp==3&&x&&I>30||A.noise_shaping_amp==3&&x&&y.global_gain-L>15))break}while(y.global_gain+y.scalefac_scale<255);A.noise_shaping_amp==3?x?g=!0:(y.assign(f),Be.arraycopy(N,0,v,0,576),I=0,L=y.global_gain,x=!0):g=!0}return $e(f.global_gain+f.scalefac_scale<=255),w.VBR==p0.vbr_rh||w.VBR==p0.vbr_mtrh?Be.arraycopy(N,0,v,0,576):A.substep_shaping&1&&trancate_smallspectrums(A,f,h,v),E.over_count},this.iteration_finish_one=function(w,f,h){var v=w.l3_side,e=v.tt[f][h];n1.best_scalefac_store(w,f,h,v),w.use_best_huffman==1&&n1.best_huffman_divide(w,e),D.ResvAdjust(w,e)},this.VBR_encode_granule=function(w,f,h,v,e,l,A){var y=w.internal_flags,N=new b0,B=Je(576),E=A,i1=A+1,b=(A+l)/2,t,g,x=0,L=y.sfb21_extra;$e(E<=LameInternalFlags.MAX_BITS_PER_CHANNEL),He.fill(N.l3_enc,0);do b>E-42?y.sfb21_extra=!1:y.sfb21_extra=L,g=outer_loop(w,f,h,v,e,b),g<=0?(x=1,i1=f.part2_3_length,N.assign(f),Be.arraycopy(v,0,B,0,576),A=i1-32,t=A-l,b=(A+l)/2):(l=b+32,t=A-l,b=(A+l)/2,x!=0&&(x=2,f.assign(N),Be.arraycopy(B,0,v,0,576)));while(t>12);y.sfb21_extra=L,x==2&&Be.arraycopy(N.l3_enc,0,f.l3_enc,0,576),$e(f.part2_3_length<=E)},this.get_framebits=function(w,f){var h=w.internal_flags;h.bitrate_index=h.VBR_min_bitrate;var v=M.getframebits(w);h.bitrate_index=1,v=M.getframebits(w);for(var e=1;e<=h.VBR_max_bitrate;e++){h.bitrate_index=e;var l=new MeanBits(v);f[e]=D.ResvFrameBegin(w,l),v=l.bits}},this.VBR_old_prepare=function(w,f,h,v,e,l,A,y,N){var B=w.internal_flags,E,i1=0,b=1,t=0;B.bitrate_index=B.VBR_max_bitrate;var g=D.ResvFrameBegin(w,new MeanBits(0))/B.mode_gr;get_framebits(w,l);for(var x=0;x<B.mode_gr;x++){var L=P.on_pe(w,f,y[x],g,x,0);B.mode_ext==Y1.MPG_MD_MS_LR&&(ms_convert(B.l3_side,x),P.reduce_side(y[x],h[x],g,L));for(var I=0;I<B.channels_out;++I){var z=B.l3_side.tt[x][I];z.block_type!=Y1.SHORT_TYPE?(i1=1.28/(1+Math.exp(3.5-f[x][I]/300))-.05,E=B.PSY.mask_adjust-i1):(i1=2.56/(1+Math.exp(3.5-f[x][I]/300))-.14,E=B.PSY.mask_adjust_short-i1),B.masking_lower=Math.pow(10,E*.1),init_outer_loop(B,z),N[x][I]=P.calc_xmin(w,v[x][I],z,e[x][I]),N[x][I]!=0&&(b=0),A[x][I]=126,t+=y[x][I]}}for(var x=0;x<B.mode_gr;x++)for(var I=0;I<B.channels_out;I++)t>l[B.VBR_max_bitrate]&&(y[x][I]*=l[B.VBR_max_bitrate],y[x][I]/=t),A[x][I]>y[x][I]&&(A[x][I]=y[x][I]);return b},this.bitpressure_strategy=function(w,f,h,v){for(var e=0;e<w.mode_gr;e++)for(var l=0;l<w.channels_out;l++){for(var A=w.l3_side.tt[e][l],y=f[e][l],N=0,B=0;B<A.psy_lmax;B++)y[N++]*=1+.029*B*B/Y1.SBMAX_l/Y1.SBMAX_l;if(A.block_type==Y1.SHORT_TYPE)for(var B=A.sfb_smin;B<Y1.SBMAX_s;B++)y[N++]*=1+.029*B*B/Y1.SBMAX_s/Y1.SBMAX_s,y[N++]*=1+.029*B*B/Y1.SBMAX_s/Y1.SBMAX_s,y[N++]*=1+.029*B*B/Y1.SBMAX_s/Y1.SBMAX_s;v[e][l]=0|Math.max(h[e][l],.9*v[e][l])}},this.VBR_new_prepare=function(w,f,h,v,e,l){var A=w.internal_flags,y=1,N=0,B=0,E;if(w.free_format){A.bitrate_index=0;var i1=new MeanBits(N);E=D.ResvFrameBegin(w,i1),N=i1.bits,e[0]=E}else{A.bitrate_index=A.VBR_max_bitrate;var i1=new MeanBits(N);D.ResvFrameBegin(w,i1),N=i1.bits,get_framebits(w,e),E=e[A.VBR_max_bitrate]}for(var b=0;b<A.mode_gr;b++){P.on_pe(w,f,l[b],N,b,0),A.mode_ext==Y1.MPG_MD_MS_LR&&ms_convert(A.l3_side,b);for(var t=0;t<A.channels_out;++t){var g=A.l3_side.tt[b][t];A.masking_lower=Math.pow(10,A.PSY.mask_adjust*.1),init_outer_loop(A,g),P.calc_xmin(w,h[b][t],g,v[b][t])!=0&&(y=0),B+=l[b][t]}}for(var b=0;b<A.mode_gr;b++)for(var t=0;t<A.channels_out;t++)B>E&&(l[b][t]*=E,l[b][t]/=B);return y},this.calc_target_bits=function(w,f,h,v,e,l){var A=w.internal_flags,y=A.l3_side,N,B,E,i1,b=0;A.bitrate_index=A.VBR_max_bitrate;var t=new MeanBits(b);for(l[0]=D.ResvFrameBegin(w,t),b=t.bits,A.bitrate_index=1,b=M.getframebits(w)-A.sideinfo_len*8,e[0]=b/(A.mode_gr*A.channels_out),b=w.VBR_mean_bitrate_kbps*w.framesize*1e3,A.substep_shaping&1&&(b*=1.09),b/=w.out_samplerate,b-=A.sideinfo_len*8,b/=A.mode_gr*A.channels_out,N=.93+.07*(11-w.compression_ratio)/(11-5.5),N<.9&&(N=.9),N>1&&(N=1),B=0;B<A.mode_gr;B++){var g=0;for(E=0;E<A.channels_out;E++){if(v[B][E]=int(N*b),f[B][E]>700){var x=int((f[B][E]-700)/1.4),L=y.tt[B][E];v[B][E]=int(N*b),L.block_type==Y1.SHORT_TYPE&&x<b/2&&(x=b/2),x>b*3/2?x=b*3/2:x<0&&(x=0),v[B][E]+=x}v[B][E]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(v[B][E]=LameInternalFlags.MAX_BITS_PER_CHANNEL),g+=v[B][E]}if(g>LameInternalFlags.MAX_BITS_PER_GRANULE)for(E=0;E<A.channels_out;++E)v[B][E]*=LameInternalFlags.MAX_BITS_PER_GRANULE,v[B][E]/=g}if(A.mode_ext==Y1.MPG_MD_MS_LR)for(B=0;B<A.mode_gr;B++)P.reduce_side(v[B],h[B],b*A.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(i1=0,B=0;B<A.mode_gr;B++)for(E=0;E<A.channels_out;E++)v[B][E]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(v[B][E]=LameInternalFlags.MAX_BITS_PER_CHANNEL),i1+=v[B][E];if(i1>l[0])for(B=0;B<A.mode_gr;B++)for(E=0;E<A.channels_out;E++)v[B][E]*=l[0],v[B][E]/=i1}}var Kt=Wt,Jt=z1,d0=Jt.assert;function $t(){var M;this.setModules=function(D){M=D},this.ResvFrameBegin=function(D,P){var j=D.internal_flags,n1,Z=j.l3_side,G=M.getframebits(D);P.bits=(G-j.sideinfo_len*8)/j.mode_gr;var V=8*256*j.mode_gr-8;D.brate>320?n1=8*int(D.brate*1e3/(D.out_samplerate/1152)/8+.5):(n1=8*1440,D.strict_ISO&&(n1=8*int(32e4/(D.out_samplerate/1152)/8+.5))),j.ResvMax=n1-G,j.ResvMax>V&&(j.ResvMax=V),(j.ResvMax<0||D.disable_reservoir)&&(j.ResvMax=0);var J=P.bits*j.mode_gr+Math.min(j.ResvSize,j.ResvMax);return J>n1&&(J=n1),d0(j.ResvMax%8==0),d0(j.ResvMax>=0),Z.resvDrain_pre=0,j.pinfo!=null&&(j.pinfo.mean_bits=P.bits/2,j.pinfo.resvsize=j.ResvSize),J},this.ResvMaxBits=function(D,P,j,n1){var Z=D.internal_flags,G,V=Z.ResvSize,J=Z.ResvMax;n1!=0&&(V+=P),Z.substep_shaping&1&&(J*=.9),j.bits=P,V*10>J*9?(G=V-J*9/10,j.bits+=G,Z.substep_shaping|=128):(G=0,Z.substep_shaping&=127,!D.disable_reservoir&&!(Z.substep_shaping&1)&&(j.bits-=.1*P));var u1=V<Z.ResvMax*6/10?V:Z.ResvMax*6/10;return u1-=G,u1<0&&(u1=0),u1},this.ResvAdjust=function(D,P){D.ResvSize-=P.part2_3_length+P.part2_length},this.ResvFrameEnd=function(D,P){var j,n1=D.l3_side;D.ResvSize+=P*D.mode_gr;var Z=0;n1.resvDrain_post=0,n1.resvDrain_pre=0,(j=D.ResvSize%8)!=0&&(Z+=j),j=D.ResvSize-Z-D.ResvMax,j>0&&(Z+=j);{var G=Math.min(n1.main_data_begin*8,Z)/8;n1.resvDrain_pre+=8*G,Z-=8*G,D.ResvSize-=8*G,n1.main_data_begin-=G}n1.resvDrain_post+=Z,D.ResvSize-=Z}}var Ut=$t;function e2(){var M="http://www.mp3dev.org/",D=3,P=98,j=4,n1=0,Z=93;this.getLameVersion=function(){return D+"."+P+"."+j},this.getLameShortVersion=function(){return D+"."+P+"."+j},this.getLameVeryShortVersion=function(){return"LAME"+D+"."+P+"r"},this.getPsyVersion=function(){return n1+"."+Z},this.getLameUrl=function(){return M},this.getLameOsBitness=function(){return"32bits"}}var a2=e2,Ge=z1,t2=Ge.System,La=Ge.VbrMode,g0=Ge.ShortBlock,s2=Ge.Arrays,oa=Ge.new_byte,n2=Ge.assert;Ue.NUMTOCENTRIES=100;Ue.MAXFRAMESIZE=2880;function Ue(){var M,D,P;this.setModules=function(b,t,g){M=b,D=t,P=g};var j=1,n1=2,Z=4,G=8,V=Ue.NUMTOCENTRIES,J=Ue.MAXFRAMESIZE,u1=V+4+4+4+4+4,d=u1+9+1+1+8+1+1+3+1+1+2+4+2+2,p=128,H=64,r1=32,W=null,s1="Xing",K="Info",w=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function f(b,t){if(b.nVbrNumFrames++,b.sum+=t,b.seen++,!(b.seen<b.want)&&(b.pos<b.size&&(b.bag[b.pos]=b.sum,b.pos++,b.seen=0),b.pos==b.size)){for(var g=1;g<b.size;g+=2)b.bag[g/2]=b.bag[g];b.want*=2,b.pos/=2}}function h(b,t){if(!(b.pos<=0))for(var g=1;g<V;++g){var x=g/V,L,I,z=0|Math.floor(x*b.pos);z>b.pos-1&&(z=b.pos-1),L=b.bag[z],I=b.sum;var R=0|256*L/I;R>255&&(R=255),t[g]=255&R}}this.addVbrFrame=function(b){var t=b.internal_flags,g=Tables.bitrate_table[b.version][t.bitrate_index];n2(t.VBR_seek_table.bag!=null),f(t.VBR_seek_table,g)};function v(b,t){var g=b[t+0]&255;return g<<=8,g|=b[t+1]&255,g<<=8,g|=b[t+2]&255,g<<=8,g|=b[t+3]&255,g}function e(b,t,g){b[t+0]=255&(g>>24&255),b[t+1]=255&(g>>16&255),b[t+2]=255&(g>>8&255),b[t+3]=255&(g&255)}function l(b,t,g){b[t+0]=255&(g>>8&255),b[t+1]=255&(g&255)}function A(b,t){return new String(b,t,s1.length(),W).equals(s1)||new String(b,t,K.length(),W).equals(K)}function y(b,t,g){return 255&(b<<t|g&~(-1<<t))}function N(b,t){var g=b.internal_flags;t[0]=y(t[0],8,255),t[1]=y(t[1],3,7),t[1]=y(t[1],1,b.out_samplerate<16e3?0:1),t[1]=y(t[1],1,b.version),t[1]=y(t[1],2,1),t[1]=y(t[1],1,b.error_protection?0:1),t[2]=y(t[2],4,g.bitrate_index),t[2]=y(t[2],2,g.samplerate_index),t[2]=y(t[2],1,0),t[2]=y(t[2],1,b.extension),t[3]=y(t[3],2,b.mode.ordinal()),t[3]=y(t[3],2,g.mode_ext),t[3]=y(t[3],1,b.copyright),t[3]=y(t[3],1,b.original),t[3]=y(t[3],2,b.emphasis),t[0]=255;var x=255&(t[1]&241),L;b.version==1?L=p:b.out_samplerate<16e3?L=r1:L=H,b.VBR==La.vbr_off&&(L=b.brate);var I;b.free_format?I=0:I=255&16*M.BitrateIndex(L,b.version,b.out_samplerate),b.version==1?(t[1]=255&(x|10),x=255&(t[2]&13),t[2]=255&(I|x)):(t[1]=255&(x|2),x=255&(t[2]&13),t[2]=255&(I|x))}this.getVbrTag=function(b){var t=new VBRTagData,g=0;t.flags=0;var x=b[g+1]>>3&1,L=b[g+2]>>2&3,I=b[g+3]>>6&3,z=b[g+2]>>4&15;if(z=Tables.bitrate_table[x][z],b[g+1]>>4==14?t.samprate=Tables.samplerate_table[2][L]:t.samprate=Tables.samplerate_table[x][L],x!=0?I!=3?g+=36:g+=21:I!=3?g+=21:g+=13,!A(b,g))return null;g+=4,t.hId=x;var R=t.flags=v(b,g);if(g+=4,R&j&&(t.frames=v(b,g),g+=4),R&n1&&(t.bytes=v(b,g),g+=4),R&Z){if(t.toc!=null)for(var r=0;r<V;r++)t.toc[r]=b[g+r];g+=V}t.vbrScale=-1,R&G&&(t.vbrScale=v(b,g),g+=4),t.headersize=(x+1)*72e3*z/t.samprate,g+=21;var n=b[g+0]<<4;n+=b[g+1]>>4;var a=(b[g+1]&15)<<8;return a+=b[g+2]&255,(n<0||n>3e3)&&(n=-1),(a<0||a>3e3)&&(a=-1),t.encDelay=n,t.encPadding=a,t},this.InitVbrTag=function(b){var t=b.internal_flags,g;b.version==1?g=p:b.out_samplerate<16e3?g=r1:g=H,b.VBR==La.vbr_off&&(g=b.brate);var x=(b.version+1)*72e3*g/b.out_samplerate,L=t.sideinfo_len+d;if(t.VBR_seek_table.TotalFrameSize=x,x<L||x>J){b.bWriteVbrTag=!1;return}t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,t.VBR_seek_table.bag==null&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400);var I=oa(J);N(b,I);for(var z=t.VBR_seek_table.TotalFrameSize,R=0;R<z;++R)D.add_dummy_byte(b,I[R]&255,1)};function B(b,t){var g=t^b;return t=t>>8^w[g&255],t}this.updateMusicCRC=function(b,t,g,x){for(var L=0;L<x;++L)b[0]=B(t[g+L],b[0])};function E(b,t,g,x,L){var I=b.internal_flags,z=0,R=b.encoder_delay,r=b.encoder_padding,n=100-10*b.VBR_q-b.quality,a=P.getLameVeryShortVersion(),_,u=0,C,U=[1,5,3,2,4,0,3],T=0|(b.lowpassfreq/100+.5>255?255:b.lowpassfreq/100+.5),F=0,_1=0,h1=0,g1=b.internal_flags.noise_shaping,S1=0,v1=0,M1=0,T1=0,j1=0,he=(b.exp_nspsytune&1)!=0,s=(b.exp_nspsytune&2)!=0,i=!1,d1=!1,A1=b.internal_flags.nogap_total,V1=b.internal_flags.nogap_current,E1=b.ATHtype,k1=0,B1;switch(b.VBR){case vbr_abr:B1=b.VBR_mean_bitrate_kbps;break;case vbr_off:B1=b.brate;break;default:B1=b.VBR_min_bitrate_kbps}switch(b.VBR.ordinal()<U.length?_=U[b.VBR.ordinal()]:_=0,C=16*u+_,I.findReplayGain&&(I.RadioGain>510&&(I.RadioGain=510),I.RadioGain<-510&&(I.RadioGain=-510),_1=8192,_1|=3072,I.RadioGain>=0?_1|=I.RadioGain:(_1|=512,_1|=-I.RadioGain)),I.findPeakSample&&(F=Math.abs(0|I.PeakSample/32767*Math.pow(2,23)+.5)),A1!=-1&&(V1>0&&(d1=!0),V1<A1-1&&(i=!0)),k1=E1+((he?1:0)<<4)+((s?1:0)<<5)+((i?1:0)<<6)+((d1?1:0)<<7),n<0&&(n=0),b.mode){case MONO:S1=0;break;case STEREO:S1=1;break;case DUAL_CHANNEL:S1=2;break;case JOINT_STEREO:b.force_ms?S1=4:S1=3;break;case NOT_SET:default:S1=7;break}b.in_samplerate<=32e3?M1=0:b.in_samplerate==48e3?M1=2:b.in_samplerate>48e3?M1=3:M1=1,(b.short_blocks==g0.short_block_forced||b.short_blocks==g0.short_block_dispensed||b.lowpassfreq==-1&&b.highpassfreq==-1||b.scale_left<b.scale_right||b.scale_left>b.scale_right||b.disable_reservoir&&b.brate<320||b.noATH||b.ATHonly||E1==0||b.in_samplerate<=32e3)&&(v1=1),T1=g1+(S1<<2)+(v1<<5)+(M1<<6),j1=I.nMusicCRC,e(g,x+z,n),z+=4;for(var L1=0;L1<9;L1++)g[x+z+L1]=255&a.charAt(L1);z+=9,g[x+z]=255&C,z++,g[x+z]=255&T,z++,e(g,x+z,F),z+=4,l(g,x+z,_1),z+=2,l(g,x+z,h1),z+=2,g[x+z]=255&k1,z++,B1>=255?g[x+z]=255:g[x+z]=255&B1,z++,g[x+z]=255&R>>4,g[x+z+1]=255&(R<<4)+(r>>8),g[x+z+2]=255&r,z+=3,g[x+z]=255&T1,z++,g[x+z++]=0,l(g,x+z,b.preset),z+=2,e(g,x+z,t),z+=4,l(g,x+z,j1),z+=2;for(var P1=0;P1<z;P1++)L=B(g[x+P1],L);return l(g,x+z,L),z+=2,z}function i1(b){b.seek(0);var t=oa(10);b.readFully(t);var g;return new String(t,"ISO-8859-1").startsWith("ID3")?g=0:g=((t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127)+t.length,g}this.getLameTagFrame=function(b,t){var g=b.internal_flags;if(!b.bWriteVbrTag||g.Class_ID!=Lame.LAME_ID||g.VBR_seek_table.pos<=0)return 0;if(t.length<g.VBR_seek_table.TotalFrameSize)return g.VBR_seek_table.TotalFrameSize;s2.fill(t,0,g.VBR_seek_table.TotalFrameSize,0),N(b,t);var x=oa(V);if(b.free_format)for(var L=1;L<V;++L)x[L]=255&255*L/100;else h(g.VBR_seek_table,x);var I=g.sideinfo_len;b.error_protection&&(I-=2),b.VBR==La.vbr_off?(t[I++]=255&K.charAt(0),t[I++]=255&K.charAt(1),t[I++]=255&K.charAt(2),t[I++]=255&K.charAt(3)):(t[I++]=255&s1.charAt(0),t[I++]=255&s1.charAt(1),t[I++]=255&s1.charAt(2),t[I++]=255&s1.charAt(3)),e(t,I,j+n1+Z+G),I+=4,e(t,I,g.VBR_seek_table.nVbrNumFrames),I+=4;var z=g.VBR_seek_table.nBytesWritten+g.VBR_seek_table.TotalFrameSize;e(t,I,0|z),I+=4,t2.arraycopy(x,0,t,I,x.length),I+=x.length,b.error_protection&&D.CRC_writeheader(g,t);for(var R=0,L=0;L<I;L++)R=B(t[L],R);return I+=E(b,z,t,I,R),g.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(b,t){var g=b.internal_flags;if(g.VBR_seek_table.pos<=0||(t.seek(t.length()),t.length()==0))return-1;var x=i1(t);t.seek(x);var L=oa(J),I=getLameTagFrame(b,L);return I>L.length?-1:(I<1||t.write(L,0,I),0)}}var r2=Ue,j0=z1,v0=j0.new_byte,_2=j0.assert,i2=Ca(),o2=Ht,l2=X0,f2=H0(),c2=Kt,h2=Y0(),u2=Ut,p2=aa,b2=Ya();te();var m2=a2,d2=r2;function g2(){this.setModules=function(M,D){}}function v2(){this.setModules=function(M,D,P){}}function M2(){}function w2(){this.setModules=function(M,D){}}function S2(M,D,P){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),M=1,D=44100,P=128);var j=new i2,n1=new g2,Z=new l2,G=new b2,V=new o2,J=new f2,u1=new c2,d=new d2,p=new m2,H=new w2,r1=new u2,W=new h2,s1=new v2,K=new M2;j.setModules(Z,G,V,J,u1,d,p,H,K),G.setModules(Z,K,p,d),H.setModules(G,p),V.setModules(j),u1.setModules(G,r1,J,W),J.setModules(W,r1,j.enc.psy),r1.setModules(G),W.setModules(J),d.setModules(j,G,p),n1.setModules(s1,K),s1.setModules(p,H,V);var w=j.lame_init();w.num_channels=M,w.in_samplerate=D,w.brate=P,w.mode=p2.STEREO,w.quality=3,w.bWriteVbrTag=!1,w.disable_reservoir=!0,w.write_id3tag_automatic=!1,j.lame_init_params(w);var f=1152,h=0|1.25*f+7200,v=v0(h);this.encodeBuffer=function(e,l){M==1&&(l=e),_2(e.length==l.length),e.length>f&&(f=e.length,h=0|1.25*f+7200,v=v0(h));var A=j.lame_encode_buffer(w,e,l,e.length,v,0,h);return new Int8Array(v.subarray(0,A))},this.flush=function(){var e=j.lame_encode_flush(w,v,0,h);return new Int8Array(v.subarray(0,e))}}function we(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function ua(M){return M.charCodeAt(0)<<24|M.charCodeAt(1)<<16|M.charCodeAt(2)<<8|M.charCodeAt(3)}we.RIFF=ua("RIFF");we.WAVE=ua("WAVE");we.fmt_=ua("fmt ");we.data=ua("data");we.readHeader=function(M){var D=new we,P=M.getUint32(0,!1);if(we.RIFF==P&&(M.getUint32(4,!0),we.WAVE==M.getUint32(8,!1)&&we.fmt_==M.getUint32(12,!1))){var j=M.getUint32(16,!0),n1=20;switch(j){case 16:case 18:D.channels=M.getUint16(n1+2,!0),D.sampleRate=M.getUint32(n1+4,!0);break;default:throw"extended fmt chunk not implemented"}n1+=j;for(var Z=we.data,G=0;Z!=P&&(P=M.getUint32(n1,!1),G=M.getUint32(n1+4,!0),Z!=P);)n1+=G+8;return D.dataLen=G,D.dataOffset=n1+8,D}};var A2=S2;let Te=null,Ye=null,la=null,ke=null,Ce=null;const R2=M=>{if(Te){ke&&(ke.textContent=M);return}Te=document.createElement("div"),Te.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: flex;
        justify-content: center;
        align-items: center;
    `,Ye=document.createElement("div"),Ye.style.cssText=`
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        text-align: center;
    `,la=document.createElement("div"),la.style.cssText=`
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 0, 0, 0.1);
        border-top: 4px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 10px;
    `,Ye.appendChild(la),ke=document.createElement("p"),ke.textContent=M,Ye.appendChild(ke),Te.appendChild(Ye),document.body.appendChild(Te),Ce=document.createElement("style"),Ce.textContent=`
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    `,document.head.appendChild(Ce)},Da=M=>{ke&&(ke.textContent=M)},B2=()=>{Te&&(document.body.removeChild(Te),Te=null),Ce&&(document.head.removeChild(Ce),Ce=null),Ye=null,la=null,ke=null},V2=async M=>{let D=null;const P=await Fe(`${je}/config`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`}}).then(async j=>{if(!j.ok)throw await j.json();return j.json()}).catch(j=>(console.log(j),D=j.detail,null));if(D)throw D;return P},L2=async(M,D)=>{let P=null;const j=await Fe(`${je}/config/update`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`},body:JSON.stringify({...D})}).then(async n1=>{if(!n1.ok)throw await n1.json();return n1.json()}).catch(n1=>(console.log(n1),P=n1.detail,null));if(P)throw P;return j},T2=M=>new Promise(D=>{const P=new Audio;P.src=URL.createObjectURL(M),P.onloadedmetadata=()=>{D(P.duration),URL.revokeObjectURL(P.src)}}),k2=async(M,D=600)=>{const P=new AudioContext,j=await M.arrayBuffer(),n1=await P.decodeAudioData(j),Z=[],G=D*n1.sampleRate;for(let V=0;V<n1.length;V+=G){const J=P.createBuffer(n1.numberOfChannels,Math.min(G,n1.length-V),n1.sampleRate);for(let d=0;d<n1.numberOfChannels;d++)J.copyToChannel(n1.getChannelData(d).subarray(V,V+G),d);const u1=await E2(J);Z.push(u1)}return P.close(),Z},E2=async M=>{const D=new A2(M.numberOfChannels,M.sampleRate,192),P=M.getChannelData(0),j=new Int16Array(P.length);for(let V=0;V<P.length;V++){const J=Math.max(-1,Math.min(1,P[V]));j[V]=J<0?J*32768:J*32767}const n1=[],Z=1152;for(let V=0;V<j.length;V+=Z){const J=j.subarray(V,V+Z),u1=D.encodeBuffer(J);u1.length>0&&n1.push(u1)}const G=D.flush();return G.length>0&&n1.push(G),new Blob(n1,{type:"audio/mpeg"})},y2=async(M,D=10,P)=>{const j=[],n1=new Set;let Z=0;for(const[V,J]of M.entries()){const d=(async()=>{try{const p=await J();return Z++,P&&P(Z),{index:V,text:p.text}}catch(p){return console.error(`${V}:`,p),Z++,P&&P(Z),{index:V,text:`[${V+1}]`}}})().then(p=>(n1.delete(d),p));n1.add(d),j.push(d),n1.size>=D&&await Promise.race(n1)}return(await Promise.all(j)).sort((V,J)=>V.index-J.index).map(V=>V.text).join("")},D2=async(M,D)=>{try{R2("...");const P=await T2(D),j=600;Da(` (${P>=3600?(P/3600).toFixed(2)+"":(P/60).toFixed(2)+""}), ...`);const n1=await k2(D,j);Da(`LLM: 0/${n1.length} `);const Z=n1.map((J,u1)=>{const d=D.name.replace(/\.[^/.]+$/,""),p=new File([J],`${d}_part${u1}.mp3`,{type:"audio/mpeg"});return()=>x2(M,p)});return{text:await y2(Z,10,J=>{Da(`LLM: ${J}/${Z.length} `)})}}catch(P){throw console.error(":",P),P}finally{B2()}},x2=async(M,D)=>{const P=new FormData;P.append("file",D);let j=null;const n1=await Fe(`${je}/transcriptions`,{method:"POST",headers:{Accept:"application/json",authorization:`Bearer ${M}`},body:P}).then(async Z=>{if(!Z.ok)throw await Z.json();return Z.json()}).catch(Z=>(j=Z.detail,console.log(Z),null));if(j)throw j;return n1},X2=async(M="",D="alloy",P="",j)=>{let n1=null;const Z=await Fe(`${je}/speech`,{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({input:P,voice:D,...j})}).then(async G=>{if(!G.ok)throw await G.json();return G}).catch(G=>(n1=G.detail,console.log(G),null));if(n1)throw n1;return Z},N2=async(M="")=>{let D=null;const P=await Fe(`${je}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`}}).then(async j=>{if(!j.ok)throw await j.json();return j.json()}).catch(j=>(D=j.detail,console.log(j),null));if(D)throw D;return P},O2=async(M="")=>{let D=null;const P=await Fe(`${je}/voices`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M}`}}).then(async j=>{if(!j.ok)throw await j.json();return j.json()}).catch(j=>(D=j.detail,console.log(j),null));if(D)throw D;return P};export{N2 as a,O2 as b,D2 as c,R2 as d,Da as e,V2 as g,B2 as h,X2 as s,x2 as t,L2 as u};
